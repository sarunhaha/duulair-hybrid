import{b as $,r as D,j as e}from"./vendor-query-Du2VTbg0.js";import{k as C,u as be,a as se,l as re,H as je,P as De,M as ge,m as ve,n as Ne,D as we,L as ke,e as W,f as B,o as Me,p as Le,q as Se,r as $e,s as Ce,t as Ae,g as V,X as Te,v as le,B as Ke}from"./index-8HwarDPt.js";import{f as _,t as xe,s as he}from"./th-Czkms0GK.js";import{b as Ee,L as Fe,C as k,X as M,Y as L,T as S,d as Y,e as Pe,B as F,f as P,g as z}from"./vendor-charts-DekULt-a.js";import{I as ze}from"./info-Dp_moITN.js";import{M as qe}from"./message-circle-heart-CaxrTwAt.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-pdf-IriBjpIe.js";import"./vendor-ui-DQGRYUuk.js";function A(s){const t=new Date;return Array.from({length:s},(a,r)=>{const o=he(t,s-1-r);return _(o,"d MMM",{locale:xe})})}function T(s){const t=new Date;return Array.from({length:s},(a,r)=>{const o=he(t,s-1-r);return _(o,"yyyy-MM-dd")})}const K={"7d":7,"15d":15,"30d":30,custom:0},p={all:["trends"],vitals:(s,t)=>[...p.all,"vitals",s,t],meds:(s,t)=>[...p.all,"meds",s,t],sleep:(s,t)=>[...p.all,"sleep",s,t],exercise:(s,t)=>[...p.all,"exercise",s,t],mood:(s,t)=>[...p.all,"mood",s,t],water:(s,t)=>[...p.all,"water",s,t]};function We(s,t,a){const r=s?t==="custom"&&a?[...p.vitals(s,t),a.startDate,a.endDate]:p.vitals(s,t):["trends","vitals","none"];return $({queryKey:r,queryFn:async()=>{if(!s)return ne(t,a);try{let o=`/trends/vitals/${s}?range=${t}`;return t==="custom"&&a&&(o+=`&startDate=${a.startDate}&endDate=${a.endDate}`),await C.get(o)}catch{return console.warn("Vitals trend API not available, using mock data"),ne(t,a)}},enabled:!0,staleTime:60*1e3})}function _e(s,t,a){const r=s?t==="custom"&&a?[...p.meds(s,t),a.startDate,a.endDate]:p.meds(s,t):["trends","meds","none"];return $({queryKey:r,queryFn:async()=>{if(!s)return oe(t,a);try{let o=`/trends/meds/${s}?range=${t}`;return t==="custom"&&a&&(o+=`&startDate=${a.startDate}&endDate=${a.endDate}`),await C.get(o)}catch{return console.warn("Meds trend API not available, using mock data"),oe(t,a)}},enabled:!0,staleTime:60*1e3})}function He(s,t,a){const r=s?t==="custom"&&a?[...p.sleep(s,t),a.startDate,a.endDate]:p.sleep(s,t):["trends","sleep","none"];return $({queryKey:r,queryFn:async()=>{if(!s)return de(t,a);try{let o=`/trends/sleep/${s}?range=${t}`;return t==="custom"&&a&&(o+=`&startDate=${a.startDate}&endDate=${a.endDate}`),await C.get(o)}catch{return console.warn("Sleep trend API not available, using mock data"),de(t,a)}},enabled:!0,staleTime:60*1e3})}function v(s,t){const a=new Date(s),r=new Date(t);return Math.ceil((r.getTime()-a.getTime())/(1e3*60*60*24))+1}function E(s,t){const a=v(s,t),r=new Date(s),o=[],l=[];for(let x=0;x<a;x++){const d=new Date(r);d.setDate(d.getDate()+x),o.push(_(d,"yyyy-MM-dd")),l.push(_(d,"d MMM",{locale:xe}))}return{dates:o,labels:l}}function ne(s,t){let a,r,o;if(s==="custom"&&t){a=v(t.startDate,t.endDate);const n=E(t.startDate,t.endDate);r=n.labels,o=n.dates}else a=K[s]||7,r=A(a),o=T(a);const l=r.map((n,m)=>{const u=120+Math.floor(Math.random()*25),h=75+Math.floor(Math.random()*15),j=70+Math.floor(Math.random()*20),b=u>=140||h>=90;return{day:n,date:o[m],systolic:u,diastolic:h,pulse:j,event:b?"สูง":void 0,note:b&&Math.random()>.5?"ความดันสูงกว่าปกติ":void 0}}),x=Math.round(l.reduce((n,m)=>n+(m.systolic||0),0)/l.length),d=Math.round(l.reduce((n,m)=>n+(m.diastolic||0),0)/l.length),c=l.filter(n=>n.systolic!==null).length;return{data:l,summary:{avg:`${x}/${d}`,label1:"ค่าเฉลี่ย",count:`วัดแล้ว ${c}/${a} วัน`,label2:"วันที่มีการวัด"},insight:Be(x,d,s)}}function oe(s,t){let a,r,o;if(s==="custom"&&t){a=v(t.startDate,t.endDate);const c=E(t.startDate,t.endDate);r=c.labels,o=c.dates}else a=K[s]||7,r=A(a),o=T(a);const l=r.map((c,n)=>{const u=Math.random()>.2?2:Math.random()>.5?1:0,h=Math.round(u/2*100);return{day:c,date:o[n],target:2,done:u,percent:h,event:u===0?"ลืม":u<2?"พลาด":void 0,note:u<2?u===0?"ลืมทั้งวัน":"พลาดบางมื้อ":void 0}}),x=Math.round(l.reduce((c,n)=>c+(n.percent||0),0)/l.length),d=l.filter(c=>c.percent===100).length;return{data:l,summary:{avg:`${x}%`,label1:"% กินยาครบ",count:`กินครบ ${d}/${a} วัน`,label2:"วันกินครบ"},insight:Ve(x)}}function de(s,t){let a,r,o;if(s==="custom"&&t){a=v(t.startDate,t.endDate);const c=E(t.startDate,t.endDate);r=c.labels,o=c.dates}else a=K[s]||7,r=A(a),o=T(a);const l=r.map((c,n)=>{const m=parseFloat((5+Math.random()*3.5).toFixed(1)),u=m<6;return{day:c,date:o[n],hours:m,event:u?"น้อย":void 0,note:u?"นอนน้อยกว่าเกณฑ์":void 0}}),x=(l.reduce((c,n)=>c+(n.hours||0),0)/l.length).toFixed(1),d=l.filter(c=>c.hours!==null).length;return{data:l,summary:{avg:`${x} ชม.`,label1:"ชม.นอนเฉลี่ย",count:`บันทึก ${d}/${a} คืน`,label2:"คืนที่บันทึก"},insight:Ye(parseFloat(x))}}function Be(s,t,a){return s>=140||t>=90?"ความดันโดยเฉลี่ยสูงกว่าปกติ ควรปรึกษาแพทย์เพื่อปรับยา":s>=130||t>=80?"ความดันอยู่ในระดับสูงกว่าปกติเล็กน้อย ควรระวังเรื่องอาหารเค็มและพักผ่อนให้เพียงพอ":`ความดัน${a==="7d"?"สัปดาห์นี้":a==="15d"?"15 วันที่ผ่านมา":"เดือนนี้"}อยู่ในเกณฑ์ดี ควบคุมได้ต่อเนื่อง`}function Ve(s,t,a){return s>=95?"กินยาครบถ้วนมาก สุดยอดครับ!":s>=80?"กินยาได้ดี แต่ยังพลาดบ้าง ลองตั้งเตือนเพิ่มไหมครับ":s>=60?"ช่วงนี้พลาดกินยาบ่อย ลองหาวิธีจดจำที่เหมาะกับคุณนะครับ":"ต้องปรับปรุงการกินยา ลองตั้งนาฬิกาเตือนหรือบอกคนใกล้ชิดให้ช่วยเตือน"}function Ye(s,t){return s>=7?"พักผ่อนเพียงพอ สุขภาพโดยรวมจะดีครับ":s>=6?"นอนได้พอประมาณ ลองเข้านอนเร็วขึ้นอีกสัก 30 นาทีจะดีมากครับ":"นอนน้อยกว่าเกณฑ์ ลองพักงีบช่วงบ่าย และเข้านอนเร็วขึ้นนะครับ"}function Oe(s,t,a){const r=s?t==="custom"&&a?[...p.exercise(s,t),a.startDate,a.endDate]:p.exercise(s,t):["trends","exercise","none"];return $({queryKey:r,queryFn:async()=>{if(!s)return ie(t,a);try{let o=`/trends/exercise/${s}?range=${t}`;return t==="custom"&&a&&(o+=`&startDate=${a.startDate}&endDate=${a.endDate}`),await C.get(o)}catch{return console.warn("Exercise trend API not available, using mock data"),ie(t,a)}},enabled:!0,staleTime:60*1e3})}function Xe(s,t,a){const r=s?t==="custom"&&a?[...p.mood(s,t),a.startDate,a.endDate]:p.mood(s,t):["trends","mood","none"];return $({queryKey:r,queryFn:async()=>{if(!s)return ce(t,a);try{let o=`/trends/mood/${s}?range=${t}`;return t==="custom"&&a&&(o+=`&startDate=${a.startDate}&endDate=${a.endDate}`),await C.get(o)}catch{return console.warn("Mood trend API not available, using mock data"),ce(t,a)}},enabled:!0,staleTime:60*1e3})}function Qe(s,t,a){const r=s?t==="custom"&&a?[...p.water(s,t),a.startDate,a.endDate]:p.water(s,t):["trends","water","none"];return $({queryKey:r,queryFn:async()=>{if(!s)return ue(t,a);try{let o=`/trends/water/${s}?range=${t}`;return t==="custom"&&a&&(o+=`&startDate=${a.startDate}&endDate=${a.endDate}`),await C.get(o)}catch{return console.warn("Water trend API not available, using mock data"),ue(t,a)}},enabled:!0,staleTime:60*1e3})}function ie(s,t){let a,r,o;if(s==="custom"&&t){a=v(t.startDate,t.endDate);const n=E(t.startDate,t.endDate);r=n.labels,o=n.dates}else a=K[s]||7,r=A(a),o=T(a);const l=["เดิน","วิ่ง","ว่ายน้ำ","ปั่นจักรยาน","โยคะ"],x=r.map((n,m)=>{const u=Math.random()>.3,h=u?Math.floor(15+Math.random()*45):null,j=u?l[Math.floor(Math.random()*l.length)]:void 0;return{day:n,date:o[m],duration:h,exerciseType:j,event:h&&h>=30?"ดี":void 0,note:j}}),d=x.filter(n=>n.duration!==null).length,c=d>0?Math.round(x.reduce((n,m)=>n+(m.duration||0),0)/d):0;return{data:x,summary:{avg:d>0?`${c} นาที`:"-",label1:"เวลาเฉลี่ย",count:`ออกกำลังกาย ${d}/${a} วัน`,label2:"วันที่ออกกำลังกาย"},insight:Ge(d,a,c)}}function Ge(s,t,a){const r=s/t;return r>=.7&&a>=30?"ออกกำลังกายสม่ำเสมอมาก สุขภาพแข็งแรงแน่นอนครับ!":r>=.5?"ออกกำลังกายได้ดี ลองเพิ่มเวลาออกกำลังกายอีกนิดจะยิ่งดีครับ":r>=.3?"ออกกำลังกายบ้าง ลองตั้งเป้าอย่างน้อยวันละ 30 นาที 5 วัน/สัปดาห์นะครับ":"ช่วงนี้ออกกำลังกายน้อย ลองเริ่มจากเดินวันละ 15-20 นาทีก่อนนะครับ"}function ce(s,t){let a,r,o;if(s==="custom"&&t){a=v(t.startDate,t.endDate);const u=E(t.startDate,t.endDate);r=u.labels,o=u.dates}else a=K[s]||7,r=A(a),o=T(a);const l=["happy","calm","neutral","sad","anxious"],x={happy:"มีความสุข",calm:"สงบ",neutral:"เฉยๆ",sad:"เศร้า",anxious:"กังวล"},d={happy:5,calm:4,neutral:3,sad:2,anxious:1},c=r.map((u,h)=>{const j=Math.random()>.2,b=j?l[Math.floor(Math.random()*l.length)]:null,g=b?d[b]:null,N=j?Math.floor(1+Math.random()*5):null;return{day:u,date:o[h],mood:b,moodScore:g,stressLevel:N,event:g&&g<=2?"ต่ำ":void 0,note:b?x[b]:void 0}}),n=c.filter(u=>u.moodScore!==null).length,m=n>0?(c.reduce((u,h)=>u+(h.moodScore||0),0)/n).toFixed(1):"0";return{data:c,summary:{avg:n>0?`${m}/5`:"-",label1:"คะแนนอารมณ์เฉลี่ย",count:`บันทึก ${n}/${a} วัน`,label2:"วันที่บันทึก"},insight:Je(parseFloat(m),n)}}function Je(s,t,a){return t===0?"ยังไม่มีการบันทึกอารมณ์ ลองบันทึกทุกวันเพื่อติดตามสุขภาพจิตนะครับ":s>=4?"อารมณ์ดีสม่ำเสมอ ยอดเยี่ยมครับ! รักษาความสุขนี้ไว้นะครับ":s>=3?"อารมณ์โดยรวมปกติดี ลองหากิจกรรมที่ชอบทำเพื่อเพิ่มความสุขนะครับ":s>=2?"ช่วงนี้อารมณ์อาจไม่ค่อยดี ลองพูดคุยกับคนใกล้ชิดหรือทำกิจกรรมผ่อนคลายนะครับ":"ดูเหมือนช่วงนี้อารมณ์ไม่ค่อยดี หากรู้สึกหนักใจ ลองปรึกษาผู้เชี่ยวชาญนะครับ"}function ue(s,t){let a,r,o;if(s==="custom"&&t){a=v(t.startDate,t.endDate);const c=E(t.startDate,t.endDate);r=c.labels,o=c.dates}else a=K[s]||7,r=A(a),o=T(a);const l=r.map((c,n)=>{const m=Math.floor(4+Math.random()*6),u=m*250,h=m<6;return{day:c,date:o[n],glasses:m,ml:u,event:h?"น้อย":m>=8?"ดี":void 0,note:h?"ดื่มน้ำน้อย":m>=8?"ดื่มน้ำได้ดี":void 0}}),x=Math.round(l.reduce((c,n)=>c+(n.glasses||0),0)/l.length),d=l.filter(c=>(c.glasses||0)>=8).length;return{data:l,summary:{avg:`${x} แก้ว`,label1:"เฉลี่ย/วัน",count:`ดื่มครบ ${d}/${a} วัน`,label2:"วันดื่มครบ 8 แก้ว"},insight:Ue(x)}}function Ue(s,t,a){return s>=8?"ดื่มน้ำได้ตามเป้าหมาย สุขภาพดีแน่นอนครับ!":s>=6?"ดื่มน้ำได้ดี ลองเพิ่มอีก 2-3 แก้วต่อวันจะยิ่งดีครับ":s>=4?"ดื่มน้ำน้อยไป ลองพกขวดน้ำติดตัวเพื่อเตือนให้ดื่มบ่อยขึ้นนะครับ":"ดื่มน้ำน้อยมาก ร่างกายต้องการน้ำอย่างน้อย 8 แก้ว/วันนะครับ"}const me={data:[{day:"จ",date:"2026-01-06",systolic:122,diastolic:80,pulse:72},{day:"อ",date:"2026-01-07",systolic:125,diastolic:82,pulse:75,event:"สูงนิดหน่อย"},{day:"พ",date:"2026-01-08",systolic:118,diastolic:78,pulse:70},{day:"พฤ",date:"2026-01-09",systolic:120,diastolic:79,pulse:73},{day:"ศ",date:"2026-01-10",systolic:123,diastolic:81,pulse:74,note:"ตื่นมาเหนื่อย"},{day:"ส",date:"2026-01-11",systolic:119,diastolic:77,pulse:71},{day:"อา",date:"2026-01-12",systolic:121,diastolic:80,pulse:72}],summary:{avg:"121/79",count:"7/7 วัน",label1:"ค่าเฉลี่ย",label2:"บันทึกครบ"},insight:"ความดันคุณอยู่ในเกณฑ์ปกติตลอดสัปดาห์ ยอดเยี่ยม!"},Ze={data:[{day:"จ",date:"2026-01-06",percent:100,target:3,done:3},{day:"อ",date:"2026-01-07",percent:67,target:3,done:2,note:"ลืมมื้อเที่ยง"},{day:"พ",date:"2026-01-08",percent:100,target:3,done:3},{day:"พฤ",date:"2026-01-09",percent:100,target:3,done:3},{day:"ศ",date:"2026-01-10",percent:100,target:3,done:3},{day:"ส",date:"2026-01-11",percent:33,target:3,done:1,note:"ลืม 2 มื้อ"},{day:"อา",date:"2026-01-12",percent:100,target:3,done:3}],summary:{avg:"86%",count:"5/7 วัน",label1:"อัตราครบ",label2:"กินครบทั้งวัน"},insight:"สัปดาห์นี้คุณลืมยา 2 วัน ลองตั้งเตือนเพิ่มช่วงเที่ยงนะคะ"},Ie={data:[{day:"จ",date:"2026-01-06",hours:7.5},{day:"อ",date:"2026-01-07",hours:6.2,note:"นอนดึก"},{day:"พ",date:"2026-01-08",hours:7},{day:"พฤ",date:"2026-01-09",hours:5.5,note:"ตื่นกลางดึก"},{day:"ศ",date:"2026-01-10",hours:8},{day:"ส",date:"2026-01-11",hours:7.2},{day:"อา",date:"2026-01-12",hours:6.8}],summary:{avg:"6.9 ชม.",count:"7/7 วัน",label1:"เฉลี่ย/คืน",label2:"บันทึกครบ"},insight:"สัปดาห์นี้คุณนอนเฉลี่ย 6.9 ชม. ลองนอนก่อน 22:00 จะดีขึ้นนะคะ"},q=(s=0)=>{const t=new Date;return t.setDate(t.getDate()-s),`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`};function dt(){const{context:s,user:t}=be(),a=s.patientId||(t.role==="patient"?t.profileId:null),[r,o]=D.useState("7d"),[l,x]=D.useState("heart"),[d,c]=D.useState(null),[n,m]=D.useState({startDate:q(30),endDate:q(0)}),[u,h]=D.useState(!1),[j,b]=D.useState(n.startDate),[g,N]=D.useState(n.endDate),{data:H,isLoading:O}=We(a,r,r==="custom"?n:void 0),{data:X,isLoading:Q}=_e(a,r,r==="custom"?n:void 0),{data:G,isLoading:J}=He(a,r,r==="custom"?n:void 0),{data:U,isLoading:Z}=Oe(a,r,r==="custom"?n:void 0),{data:I,isLoading:R}=Xe(a,r,r==="custom"?n:void 0),{data:ee,isLoading:te}=Qe(a,r,r==="custom"?n:void 0),f=D.useMemo(()=>{switch(l){case"heart":return H||me;case"meds":return X||Ze;case"sleep":return G||Ie;case"exercise":return U;case"mood":return I;case"water":return ee;default:return H||me}},[l,H,X,G,U,I,ee]),ae=D.useMemo(()=>{switch(l){case"heart":return O;case"meds":return Q;case"sleep":return J;case"exercise":return Z;case"mood":return R;case"water":return te;default:return!1}},[l,O,Q,J,Z,R,te]);D.useEffect(()=>{c(null)},[r,l]);const fe=[{id:"heart",label:"ความดัน",icon:je},{id:"meds",label:"ยา",icon:De},{id:"sleep",label:"นอน",icon:ge},{id:"exercise",label:"ออกกำลัง",icon:ve},{id:"mood",label:"อารมณ์",icon:Ne},{id:"water",label:"น้ำ",icon:we}],w=i=>{i&&i.activePayload&&i.activePayload[0]&&c(i.activePayload[0].payload)};return e.jsxs("div",{className:"min-h-screen pb-32 font-sans overflow-x-hidden relative z-10 bg-background",children:[e.jsx("header",{className:"bg-card pt-12 pb-4 px-6 sticky top-0 z-20 flex justify-between items-center border-b border-border",children:e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"แนวโน้ม"})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 space-y-6 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex bg-muted/50 p-1 rounded-xl gap-1",children:["7d","15d","30d","custom"].map((i,y)=>{const pe=["7 วัน","15 วัน","30 วัน","กำหนดเอง"],ye=r===i;return e.jsxs("button",{onClick:()=>{o(i),i==="custom"&&(b(n.startDate),N(n.endDate),h(!0))},className:se("flex-1 py-2 text-xs font-semibold rounded-lg transition-all flex items-center justify-center gap-1",ye?"bg-primary/10 text-primary shadow-sm border border-primary/30":"text-muted-foreground"),children:[i==="custom"&&e.jsx(re,{className:"w-3 h-3"}),pe[y]]},i)})}),r==="custom"&&e.jsxs("button",{onClick:()=>{b(n.startDate),N(n.endDate),h(!0)},className:"flex items-center justify-center gap-2 text-xs text-primary bg-primary/5 px-3 py-2 rounded-lg border border-primary/20",children:[e.jsx(re,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[new Date(n.startDate).toLocaleDateString("th-TH",{day:"numeric",month:"short"})," - ",new Date(n.endDate).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"2-digit"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:fe.map(i=>{const y=l===i.id;return e.jsxs("button",{onClick:()=>x(i.id),className:se("flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all border",y?"bg-primary text-primary-foreground border-primary shadow-md shadow-primary/20":"bg-card text-muted-foreground border-border"),children:[e.jsx(i.icon,{className:"w-3.5 h-3.5"}),i.label]},i.id)})}),ae&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ke,{className:"w-8 h-8 animate-spin text-primary"})}),!ae&&f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 transition-all",children:[e.jsx(W,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:f.summary.label1}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:f.summary.avg})]})}),e.jsx(W,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:f.summary.label2}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:f.summary.count})]})})]}),e.jsxs(W,{className:"border-none shadow-sm bg-card p-6 relative",children:[l==="heart"&&e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-1 bg-[#0E8A9A] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"SYS"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-1 border-t-2 border-dashed border-[#0E8A9A]"}),e.jsx("span",{className:"text-muted-foreground",children:"DIA"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-1 bg-[#F2994A] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"HR"})]})]}),e.jsx("div",{className:"h-[240px] w-full",children:e.jsx(Ee,{width:"100%",height:"100%",children:l==="heart"?e.jsxs(Fe,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:w,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(M,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"}}),e.jsx(S,{cursor:{stroke:"#0E8A9A",strokeWidth:1,strokeDasharray:"4 4"},content:()=>null}),e.jsx(Y,{type:"monotone",dataKey:"systolic",stroke:"#0E8A9A",strokeWidth:3,dot:{r:4,fill:"white",strokeWidth:2,stroke:"#0E8A9A"},activeDot:{r:6,strokeWidth:0,fill:"#0E8A9A"}}),e.jsx(Y,{type:"monotone",dataKey:"diastolic",stroke:"rgba(14, 138, 154, 0.5)",strokeWidth:2,strokeDasharray:"5 5",dot:{r:3,fill:"white",strokeWidth:2,stroke:"rgba(14, 138, 154, 0.5)"}}),e.jsx(Y,{type:"monotone",dataKey:"pulse",stroke:"#F2994A",strokeWidth:2,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#F2994A"}}),f.data.map((i,y)=>i.event?e.jsx(Pe,{x:i.day,y:i.systolic,r:6,fill:"hsl(var(--destructive) / 0.2)",stroke:"hsl(var(--destructive))",strokeWidth:1},y):null)]}):l==="meds"?e.jsxs(F,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:w,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(M,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,100]}),e.jsx(S,{cursor:{fill:"transparent"},content:()=>null}),e.jsx(P,{dataKey:"percent",radius:[6,6,0,0],children:f.data.map((i,y)=>e.jsx(z,{fill:i.percent===100?"#10b981":i.percent===0?"#ef4444":"#f97316"},`cell-${y}`))})]}):l==="sleep"?e.jsxs(F,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:w,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(M,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,10]}),e.jsx(S,{cursor:{fill:"transparent"},content:()=>null}),e.jsx(P,{dataKey:"hours",radius:[6,6,0,0],children:f.data.map((i,y)=>e.jsx(z,{fill:i.hours&&i.hours<6?"#f97316":"#8b5cf6"},`cell-${y}`))})]}):l==="exercise"?e.jsxs(F,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:w,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(M,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,60]}),e.jsx(S,{cursor:{fill:"transparent"},content:()=>null}),e.jsx(P,{dataKey:"duration",radius:[6,6,0,0],children:f.data.map((i,y)=>e.jsx(z,{fill:i.duration==null?"#e5e7eb":(i.duration??0)>=30?"#10b981":"#f97316"},`cell-${y}`))})]}):l==="mood"?e.jsxs(F,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:w,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(M,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,5]}),e.jsx(S,{cursor:{fill:"transparent"},content:()=>null}),e.jsx(P,{dataKey:"moodScore",radius:[6,6,0,0],children:f.data.map((i,y)=>e.jsx(z,{fill:i.moodScore==null?"#e5e7eb":(i.moodScore??0)>=4?"#10b981":(i.moodScore??0)>=3?"#f59e0b":"#ef4444"},`cell-${y}`))})]}):e.jsxs(F,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:w,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(M,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,12]}),e.jsx(S,{cursor:{fill:"transparent"},content:()=>null}),e.jsx(P,{dataKey:"glasses",radius:[6,6,0,0],children:f.data.map((i,y)=>e.jsx(z,{fill:(i.glasses||0)>=8?"#3b82f6":(i.glasses||0)>=6?"#60a5fa":"#93c5fd"},`cell-${y}`))})]})})}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium bg-muted/30 px-3 py-1 rounded-full flex items-center gap-1.5",children:[e.jsx(ze,{className:"w-3 h-3"})," แตะจุดบนกราฟเพื่อดูรายละเอียด"]})}),d&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-muted/50 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:d.day}),l==="heart"&&e.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[e.jsxs("p",{className:"text-xl font-bold text-primary",children:[d.systolic,"/",d.diastolic," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"mmHg"})]}),e.jsxs("p",{className:"text-base font-bold text-orange-500",children:[d.pulse," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"bpm"})]})]}),l==="meds"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-sm font-bold text-foreground",children:["ตั้งไว้ ",d.target," ช่วง | ทำได้ ",d.done," ช่วง |"," ","= ",d.percent,"%"]})}),l==="sleep"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[d.hours," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"ชม."})]})}),l==="exercise"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:d.duration!==null?e.jsxs(e.Fragment,{children:[d.duration," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"นาที"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้ออกกำลังกาย"})}),d.exerciseType&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:d.exerciseType})]}),l==="mood"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-amber-600",children:d.moodScore!==null?e.jsxs(e.Fragment,{children:[d.moodScore,"/5"," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"คะแนน"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้บันทึก"})}),d.note&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:d.note})]}),l==="water"&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[d.glasses," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"แก้ว"})]}),d.ml&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["≈ ",d.ml," ml"]})]})]}),d.note&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/30 px-3 py-2 rounded-xl text-xs font-medium text-yellow-700 dark:text-yellow-400 max-w-[150px]",children:['"',d.note,'"']})]}),d.event&&!d.note&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 bg-red-50 dark:bg-red-950/30 text-red-600 dark:text-red-400 px-2.5 py-1 rounded-full",children:[e.jsx(Me,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px] font-bold",children:d.event})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-sm font-bold text-foreground flex items-center gap-2 pl-1",children:[e.jsx("div",{className:"w-1 h-4 bg-accent rounded-full"}),"อุ่นใจสังเกตให้"]}),e.jsx(W,{className:"border-none shadow-sm bg-accent/5 overflow-hidden group hover:bg-accent/10 transition-colors",children:e.jsxs(B,{className:"p-5 flex gap-4 items-start",children:[e.jsx("div",{className:"bg-accent/10 p-3 rounded-2xl text-accent group-hover:scale-110 transition-transform",children:e.jsx(qe,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 space-y-2",children:e.jsxs("p",{className:"text-sm leading-relaxed font-semibold text-foreground",children:['"',f.insight,'"']})})]})})]})]})]}),e.jsx(Le,{open:u,onOpenChange:h,children:e.jsxs(Se,{className:"max-h-[85vh]",children:[e.jsxs($e,{className:"flex items-center justify-between px-6",children:[e.jsx(Ce,{className:"text-xl font-bold",children:"เลือกช่วงวันที่"}),e.jsx(Ae,{asChild:!0,children:e.jsx(V,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10",children:e.jsx(Te,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"px-6 pb-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันเริ่มต้น"}),e.jsx(le,{value:j,onChange:b,maxDate:g})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันสิ้นสุด"}),e.jsx(le,{value:g,onChange:N,minDate:j,maxDate:q(0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"เลือกด่วน"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"7 วันที่แล้ว",days:7},{label:"14 วันที่แล้ว",days:14},{label:"30 วันที่แล้ว",days:30},{label:"60 วันที่แล้ว",days:60},{label:"90 วันที่แล้ว",days:90}].map(i=>e.jsx("button",{onClick:()=>{b(q(i.days-1)),N(q(0))},className:"px-3 py-1.5 text-xs font-medium rounded-full bg-muted hover:bg-muted/80 text-muted-foreground transition-colors",children:i.label},i.days))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(V,{variant:"ghost",className:"flex-1 h-12 rounded-xl",onClick:()=>h(!1),children:"ยกเลิก"}),e.jsx(V,{className:"flex-1 h-12 rounded-xl bg-primary text-primary-foreground",onClick:()=>{m({startDate:j,endDate:g}),h(!1)},children:"ยืนยัน"})]})]})]})}),e.jsx(Ke,{})]})}export{dt as default};
