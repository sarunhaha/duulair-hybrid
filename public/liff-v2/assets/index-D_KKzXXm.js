import{b as E,r as k,j as e}from"./vendor-query-OvJu5Khy.js";import{l as z,u as Te,m as Ee,H as ze,P as Ke,M as Be,n as Pe,o as We,D as qe,p as He,q as ge,a as ye,r as be,L as Oe,e as V,f as I,s as Ye,t as Ve,v as Ge,w as Xe,x as Ze,y as Qe,g as re,X as Je,z as je,B as Ue}from"./index-Dxj55EkB.js";import{f as te,t as Le,s as Ce,R,L as le,C as M,X as S,Y as L,T as C,a as ee,b as H,B as G,c as X,d as Z,S as Ie,Z as Re,e as et}from"./th-DHaaKEu3.js";import{I as tt}from"./info-MF1xY200.js";import{M as st}from"./message-circle-heart-DDr_obJs.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-ui-CYcp45lG.js";function K(a){const t=new Date;return Array.from({length:a},(s,o)=>{const l=Ce(t,a-1-o);return te(l,"d MMM",{locale:Le})})}function B(a){const t=new Date;return Array.from({length:a},(s,o)=>{const l=Ce(t,a-1-o);return te(l,"yyyy-MM-dd")})}const P={"7d":7,"15d":15,"30d":30,custom:0},y={all:["trends"],vitals:(a,t)=>[...y.all,"vitals",a,t],meds:(a,t)=>[...y.all,"meds",a,t],sleep:(a,t)=>[...y.all,"sleep",a,t],exercise:(a,t)=>[...y.all,"exercise",a,t],mood:(a,t)=>[...y.all,"mood",a,t],water:(a,t)=>[...y.all,"water",a,t],glucose:(a,t)=>[...y.all,"glucose",a,t]};function at(a,t,s){const o=a?t==="custom"&&s?[...y.vitals(a,t),s.startDate,s.endDate]:y.vitals(a,t):["trends","vitals","none"];return E({queryKey:o,queryFn:async()=>{if(!a)return ve(t,s);try{let l=`/trends/vitals/${a}?range=${t}`;return t==="custom"&&s&&(l+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await z.get(l)}catch{return console.warn("Vitals trend API not available, using mock data"),ve(t,s)}},enabled:!0,staleTime:60*1e3})}function rt(a,t,s){const o=a?t==="custom"&&s?[...y.meds(a,t),s.startDate,s.endDate]:y.meds(a,t):["trends","meds","none"];return E({queryKey:o,queryFn:async()=>{if(!a)return De(t,s);try{let l=`/trends/meds/${a}?range=${t}`;return t==="custom"&&s&&(l+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await z.get(l)}catch{return console.warn("Meds trend API not available, using mock data"),De(t,s)}},enabled:!0,staleTime:60*1e3})}function lt(a,t,s){const o=a?t==="custom"&&s?[...y.sleep(a,t),s.startDate,s.endDate]:y.sleep(a,t):["trends","sleep","none"];return E({queryKey:o,queryFn:async()=>{if(!a)return Ne(t,s);try{let l=`/trends/sleep/${a}?range=${t}`;return t==="custom"&&s&&(l+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await z.get(l)}catch{return console.warn("Sleep trend API not available, using mock data"),Ne(t,s)}},enabled:!0,staleTime:60*1e3})}function A(a,t){const s=new Date(a),o=new Date(t);return Math.ceil((o.getTime()-s.getTime())/(1e3*60*60*24))+1}function W(a,t){const s=A(a,t),o=new Date(a),l=[],c=[];for(let d=0;d<s;d++){const f=new Date(o);f.setDate(f.getDate()+d),l.push(te(f,"yyyy-MM-dd")),c.push(te(f,"d MMM",{locale:Le}))}return{dates:l,labels:c}}function ve(a,t){let s,o,l;if(a==="custom"&&t){s=A(t.startDate,t.endDate);const i=W(t.startDate,t.endDate);o=i.labels,l=i.dates}else s=P[a]||7,o=K(s),l=B(s);const c=o.map((i,m)=>{const u=118+Math.floor(Math.random()*25),x=73+Math.floor(Math.random()*15),j=68+Math.floor(Math.random()*18),D=122+Math.floor(Math.random()*25),g=76+Math.floor(Math.random()*15),w=72+Math.floor(Math.random()*20),N=D,$=g,J=w,O=N>=140||$>=90;return{day:i,date:l[m],systolic:N,diastolic:$,pulse:J,sys_am:u,dia_am:x,pulse_am:j,sys_pm:D,dia_pm:g,pulse_pm:w,event:O?"สูง":void 0,note:O&&Math.random()>.5?"ความดันสูงกว่าปกติ":void 0}}),d=Math.round(c.reduce((i,m)=>i+(m.systolic||0),0)/c.length),f=Math.round(c.reduce((i,m)=>i+(m.diastolic||0),0)/c.length),r=c.filter(i=>i.systolic!==null).length;return{data:c,summary:{avg:`${d}/${f}`,label1:"ค่าเฉลี่ย",count:`วัดแล้ว ${r}/${s} วัน`,label2:"วันที่มีการวัด"},insight:ot(d,f,a)}}function De(a,t){let s,o,l;if(a==="custom"&&t){s=A(t.startDate,t.endDate);const r=W(t.startDate,t.endDate);o=r.labels,l=r.dates}else s=P[a]||7,o=K(s),l=B(s);const c=o.map((r,i)=>{const u=Math.random()>.2?2:Math.random()>.5?1:0,x=Math.round(u/2*100);return{day:r,date:l[i],target:2,done:u,percent:x,event:u===0?"ลืม":u<2?"พลาด":void 0,note:u<2?u===0?"ลืมทั้งวัน":"พลาดบางมื้อ":void 0}}),d=Math.round(c.reduce((r,i)=>r+(i.percent||0),0)/c.length),f=c.filter(r=>r.percent===100).length;return{data:c,summary:{avg:`${d}%`,label1:"% กินยาครบ",count:`กินครบ ${f}/${s} วัน`,label2:"วันกินครบ"},insight:nt(d)}}function Ne(a,t){let s,o,l;if(a==="custom"&&t){s=A(t.startDate,t.endDate);const r=W(t.startDate,t.endDate);o=r.labels,l=r.dates}else s=P[a]||7,o=K(s),l=B(s);const c=o.map((r,i)=>{const m=parseFloat((5+Math.random()*3.5).toFixed(1)),u=m<6;return{day:r,date:l[i],hours:m,event:u?"น้อย":void 0,note:u?"นอนน้อยกว่าเกณฑ์":void 0}}),d=(c.reduce((r,i)=>r+(i.hours||0),0)/c.length).toFixed(1),f=c.filter(r=>r.hours!==null).length;return{data:c,summary:{avg:`${d} ชม.`,label1:"ชม.นอนเฉลี่ย",count:`บันทึก ${f}/${s} คืน`,label2:"คืนที่บันทึก"},insight:dt(parseFloat(d))}}function ot(a,t,s){return a>=140||t>=90?"ความดันโดยเฉลี่ยสูงกว่าปกติ ควรปรึกษาแพทย์เพื่อปรับยา":a>=130||t>=80?"ความดันอยู่ในระดับสูงกว่าปกติเล็กน้อย ควรระวังเรื่องอาหารเค็มและพักผ่อนให้เพียงพอ":`ความดัน${s==="7d"?"สัปดาห์นี้":s==="15d"?"15 วันที่ผ่านมา":"เดือนนี้"}อยู่ในเกณฑ์ดี ควบคุมได้ต่อเนื่อง`}function nt(a,t,s){return a>=95?"กินยาครบถ้วนมาก สุดยอดครับ!":a>=80?"กินยาได้ดี แต่ยังพลาดบ้าง ลองตั้งเตือนเพิ่มไหมครับ":a>=60?"ช่วงนี้พลาดกินยาบ่อย ลองหาวิธีจดจำที่เหมาะกับคุณนะครับ":"ต้องปรับปรุงการกินยา ลองตั้งนาฬิกาเตือนหรือบอกคนใกล้ชิดให้ช่วยเตือน"}function dt(a,t){return a>=7?"พักผ่อนเพียงพอ สุขภาพโดยรวมจะดีครับ":a>=6?"นอนได้พอประมาณ ลองเข้านอนเร็วขึ้นอีกสัก 30 นาทีจะดีมากครับ":"นอนน้อยกว่าเกณฑ์ ลองพักงีบช่วงบ่าย และเข้านอนเร็วขึ้นนะครับ"}function it(a,t,s){const o=a?t==="custom"&&s?[...y.exercise(a,t),s.startDate,s.endDate]:y.exercise(a,t):["trends","exercise","none"];return E({queryKey:o,queryFn:async()=>{if(!a)return ke(t,s);try{let l=`/trends/exercise/${a}?range=${t}`;return t==="custom"&&s&&(l+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await z.get(l)}catch{return console.warn("Exercise trend API not available, using mock data"),ke(t,s)}},enabled:!0,staleTime:60*1e3})}function ct(a,t,s){const o=a?t==="custom"&&s?[...y.mood(a,t),s.startDate,s.endDate]:y.mood(a,t):["trends","mood","none"];return E({queryKey:o,queryFn:async()=>{if(!a)return we(t,s);try{let l=`/trends/mood/${a}?range=${t}`;return t==="custom"&&s&&(l+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await z.get(l)}catch{return console.warn("Mood trend API not available, using mock data"),we(t,s)}},enabled:!0,staleTime:60*1e3})}function mt(a,t,s){const o=a?t==="custom"&&s?[...y.water(a,t),s.startDate,s.endDate]:y.water(a,t):["trends","water","none"];return E({queryKey:o,queryFn:async()=>{if(!a)return _e(t,s);try{let l=`/trends/water/${a}?range=${t}`;return t==="custom"&&s&&(l+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await z.get(l)}catch{return console.warn("Water trend API not available, using mock data"),_e(t,s)}},enabled:!0,staleTime:60*1e3})}function ke(a,t){let s,o,l;if(a==="custom"&&t){s=A(t.startDate,t.endDate);const i=W(t.startDate,t.endDate);o=i.labels,l=i.dates}else s=P[a]||7,o=K(s),l=B(s);const c=["เดิน","วิ่ง","ว่ายน้ำ","ปั่นจักรยาน","โยคะ"],d=o.map((i,m)=>{const u=Math.random()>.3,x=u?Math.floor(15+Math.random()*45):null,j=u?c[Math.floor(Math.random()*c.length)]:void 0;return{day:i,date:l[m],duration:x,exerciseType:j,event:x&&x>=30?"ดี":void 0,note:j}}),f=d.filter(i=>i.duration!==null).length,r=f>0?Math.round(d.reduce((i,m)=>i+(m.duration||0),0)/f):0;return{data:d,summary:{avg:f>0?`${r} นาที`:"-",label1:"เวลาเฉลี่ย",count:`ออกกำลังกาย ${f}/${s} วัน`,label2:"วันที่ออกกำลังกาย"},insight:ut(f,s,r)}}function ut(a,t,s){const o=a/t;return o>=.7&&s>=30?"ออกกำลังกายสม่ำเสมอมาก สุขภาพแข็งแรงแน่นอนครับ!":o>=.5?"ออกกำลังกายได้ดี ลองเพิ่มเวลาออกกำลังกายอีกนิดจะยิ่งดีครับ":o>=.3?"ออกกำลังกายบ้าง ลองตั้งเป้าอย่างน้อยวันละ 30 นาที 5 วัน/สัปดาห์นะครับ":"ช่วงนี้ออกกำลังกายน้อย ลองเริ่มจากเดินวันละ 15-20 นาทีก่อนนะครับ"}function we(a,t){let s,o,l;if(a==="custom"&&t){s=A(t.startDate,t.endDate);const u=W(t.startDate,t.endDate);o=u.labels,l=u.dates}else s=P[a]||7,o=K(s),l=B(s);const c=["happy","calm","neutral","sad","anxious"],d={happy:"มีความสุข",calm:"สงบ",neutral:"เฉยๆ",sad:"เศร้า",anxious:"กังวล"},f={happy:5,calm:4,neutral:3,sad:2,anxious:1},r=o.map((u,x)=>{const j=Math.random()>.2,D=j?c[Math.floor(Math.random()*c.length)]:null,g=D?f[D]:null,w=j?Math.floor(1+Math.random()*5):null;return{day:u,date:l[x],mood:D,moodScore:g,stressLevel:w,event:g&&g<=2?"ต่ำ":void 0,note:D?d[D]:void 0}}),i=r.filter(u=>u.moodScore!==null).length,m=i>0?(r.reduce((u,x)=>u+(x.moodScore||0),0)/i).toFixed(1):"0";return{data:r,summary:{avg:i>0?`${m}/5`:"-",label1:"คะแนนอารมณ์เฉลี่ย",count:`บันทึก ${i}/${s} วัน`,label2:"วันที่บันทึก"},insight:xt(parseFloat(m),i)}}function xt(a,t,s){return t===0?"ยังไม่มีการบันทึกอารมณ์ ลองบันทึกทุกวันเพื่อติดตามสุขภาพจิตนะครับ":a>=4?"อารมณ์ดีสม่ำเสมอ ยอดเยี่ยมครับ! รักษาความสุขนี้ไว้นะครับ":a>=3?"อารมณ์โดยรวมปกติดี ลองหากิจกรรมที่ชอบทำเพื่อเพิ่มความสุขนะครับ":a>=2?"ช่วงนี้อารมณ์อาจไม่ค่อยดี ลองพูดคุยกับคนใกล้ชิดหรือทำกิจกรรมผ่อนคลายนะครับ":"ดูเหมือนช่วงนี้อารมณ์ไม่ค่อยดี หากรู้สึกหนักใจ ลองปรึกษาผู้เชี่ยวชาญนะครับ"}function _e(a,t){let s,o,l;if(a==="custom"&&t){s=A(t.startDate,t.endDate);const r=W(t.startDate,t.endDate);o=r.labels,l=r.dates}else s=P[a]||7,o=K(s),l=B(s);const c=o.map((r,i)=>{const m=Math.floor(4+Math.random()*6),u=m*250,x=m<6;return{day:r,date:l[i],glasses:m,ml:u,event:x?"น้อย":m>=8?"ดี":void 0,note:x?"ดื่มน้ำน้อย":m>=8?"ดื่มน้ำได้ดี":void 0}}),d=Math.round(c.reduce((r,i)=>r+(i.glasses||0),0)/c.length),f=c.filter(r=>(r.glasses||0)>=8).length;return{data:c,summary:{avg:`${d} แก้ว`,label1:"เฉลี่ย/วัน",count:`ดื่มครบ ${f}/${s} วัน`,label2:"วันดื่มครบ 8 แก้ว"},insight:ft(d)}}function ft(a,t,s){return a>=8?"ดื่มน้ำได้ตามเป้าหมาย สุขภาพดีแน่นอนครับ!":a>=6?"ดื่มน้ำได้ดี ลองเพิ่มอีก 2-3 แก้วต่อวันจะยิ่งดีครับ":a>=4?"ดื่มน้ำน้อยไป ลองพกขวดน้ำติดตัวเพื่อเตือนให้ดื่มบ่อยขึ้นนะครับ":"ดื่มน้ำน้อยมาก ร่างกายต้องการน้ำอย่างน้อย 8 แก้ว/วันนะครับ"}function ht(a,t,s){const o=a?t==="custom"&&s?[...y.glucose(a,t),s.startDate,s.endDate]:y.glucose(a,t):["trends","glucose","none"];return E({queryKey:o,queryFn:async()=>{if(!a)return Me(t,s);try{let l=`/trends/glucose/${a}?range=${t}`;return t==="custom"&&s&&(l+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await z.get(l)}catch{return console.warn("Glucose trend API not available, using mock data"),Me(t,s)}},enabled:!0,staleTime:60*1e3})}function Me(a,t){let s,o,l;if(a==="custom"&&t){s=A(t.startDate,t.endDate);const x=W(t.startDate,t.endDate);o=x.labels,l=x.dates}else s=P[a]||7,o=K(s),l=B(s);const c=["fasting","post_meal_1h","post_meal_2h","before_bed"],d=["06:30","08:00","12:30","13:30","18:30","21:00"];let f=0;const r=o.map((x,j)=>{const D=Math.random()>.2?1+Math.floor(Math.random()*3):0,g=[];for(let N=0;N<D;N++)g.push({glucose:85+Math.floor(Math.random()*55),mealContext:c[N%c.length],time:d[N*2]||"12:00"});f+=g.length;const w=g.length>0?Math.round(g.reduce((N,$)=>N+$.glucose,0)/g.length):null;return{day:x,date:l[j],glucose:w,mealContext:g.length>0?g[g.length-1].mealContext:null,glucoseReadings:g.length>0?g:void 0}}),i=r.flatMap(x=>x.glucoseReadings||[]),m=i.length>0?Math.round(i.reduce((x,j)=>x+j.glucose,0)/i.length):0,u=r.filter(x=>x.glucoseReadings&&x.glucoseReadings.length>0).length;return{data:r,summary:{avg:i.length>0?`${m} mg/dL`:"-",label1:"ค่าเฉลี่ย",count:`วัดแล้ว ${u}/${s} วัน (${i.length} ครั้ง)`,label2:"จำนวนการวัด"},insight:pt(m,u)}}function pt(a,t){return t===0?"ยังไม่มีข้อมูลน้ำตาลในช่วงนี้ ลองวัดระดับน้ำตาลเพื่อติดตามสุขภาพนะครับ":a>=126?"ระดับน้ำตาลเฉลี่ยสูงกว่าปกติ ควรปรึกษาแพทย์เพื่อปรับยาหรือพฤติกรรม":a>=100?"ระดับน้ำตาลอยู่ในช่วงเสี่ยง ควรลดอาหารหวานและออกกำลังกายสม่ำเสมอ":"ระดับน้ำตาลอยู่ในเกณฑ์ปกติ ดีมากครับ รักษาพฤติกรรมนี้ต่อไป"}const Se={data:[{day:"จ",date:"2026-01-06",systolic:122,diastolic:80,pulse:72,sys_am:118,dia_am:76,pulse_am:68,sys_pm:122,dia_pm:80,pulse_pm:72},{day:"อ",date:"2026-01-07",systolic:125,diastolic:82,pulse:75,sys_am:120,dia_am:78,pulse_am:70,sys_pm:125,dia_pm:82,pulse_pm:75,event:"สูงนิดหน่อย"},{day:"พ",date:"2026-01-08",systolic:118,diastolic:78,pulse:70,sys_am:115,dia_am:74,pulse_am:66,sys_pm:118,dia_pm:78,pulse_pm:70},{day:"พฤ",date:"2026-01-09",systolic:120,diastolic:79,pulse:73,sys_am:117,dia_am:75,pulse_am:69,sys_pm:120,dia_pm:79,pulse_pm:73},{day:"ศ",date:"2026-01-10",systolic:123,diastolic:81,pulse:74,sys_am:119,dia_am:77,pulse_am:70,sys_pm:123,dia_pm:81,pulse_pm:74,note:"ตื่นมาเหนื่อย"},{day:"ส",date:"2026-01-11",systolic:119,diastolic:77,pulse:71,sys_am:116,dia_am:73,pulse_am:67,sys_pm:119,dia_pm:77,pulse_pm:71},{day:"อา",date:"2026-01-12",systolic:121,diastolic:80,pulse:72,sys_am:118,dia_am:76,pulse_am:68,sys_pm:121,dia_pm:80,pulse_pm:72}],summary:{avg:"121/79",count:"7/7 วัน",label1:"ค่าเฉลี่ย",label2:"บันทึกครบ"},insight:"ความดันคุณอยู่ในเกณฑ์ปกติตลอดสัปดาห์ ยอดเยี่ยม!"},gt={data:[{day:"จ",date:"2026-01-06",percent:100,target:3,done:3},{day:"อ",date:"2026-01-07",percent:67,target:3,done:2,note:"ลืมมื้อเที่ยง"},{day:"พ",date:"2026-01-08",percent:100,target:3,done:3},{day:"พฤ",date:"2026-01-09",percent:100,target:3,done:3},{day:"ศ",date:"2026-01-10",percent:100,target:3,done:3},{day:"ส",date:"2026-01-11",percent:33,target:3,done:1,note:"ลืม 2 มื้อ"},{day:"อา",date:"2026-01-12",percent:100,target:3,done:3}],summary:{avg:"86%",count:"5/7 วัน",label1:"อัตราครบ",label2:"กินครบทั้งวัน"},insight:"สัปดาห์นี้คุณลืมยา 2 วัน ลองตั้งเตือนเพิ่มช่วงเที่ยงนะคะ"},yt={data:[{day:"จ",date:"2026-01-06",hours:7.5},{day:"อ",date:"2026-01-07",hours:6.2,note:"นอนดึก"},{day:"พ",date:"2026-01-08",hours:7},{day:"พฤ",date:"2026-01-09",hours:5.5,note:"ตื่นกลางดึก"},{day:"ศ",date:"2026-01-10",hours:8},{day:"ส",date:"2026-01-11",hours:7.2},{day:"อา",date:"2026-01-12",hours:6.8}],summary:{avg:"6.9 ชม.",count:"7/7 วัน",label1:"เฉลี่ย/คืน",label2:"บันทึกครบ"},insight:"สัปดาห์นี้คุณนอนเฉลี่ย 6.9 ชม. ลองนอนก่อน 22:00 จะดีขึ้นนะคะ"},Q=(a=0)=>{const t=new Date;return t.setDate(t.getDate()-a),`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`};function _t(){const{context:a,user:t}=Te(),s=a.patientId||(t.role==="patient"?t.profileId:null),{data:o}=Ee(s),[l,c]=k.useState("7d"),[d,f]=k.useState("heart"),[r,i]=k.useState(null),[m,u]=k.useState({startDate:Q(30),endDate:Q(0)}),[x,j]=k.useState(!1),[D,g]=k.useState(m.startDate),[w,N]=k.useState(m.endDate),{data:$,isLoading:J}=at(s,l,l==="custom"?m:void 0),{data:O,isLoading:oe}=rt(s,l,l==="custom"?m:void 0),{data:ne,isLoading:de}=lt(s,l,l==="custom"?m:void 0),{data:ie,isLoading:ce}=it(s,l,l==="custom"?m:void 0),{data:me,isLoading:ue}=ct(s,l,l==="custom"?m:void 0),{data:xe,isLoading:fe}=mt(s,l,l==="custom"?m:void 0),{data:he,isLoading:pe}=ht(s,l,l==="custom"?m:void 0),h=k.useMemo(()=>{switch(d){case"heart":return $||Se;case"meds":return O||gt;case"sleep":return ne||yt;case"exercise":return ie;case"mood":return me;case"water":return xe;case"glucose":return he;case"lab_results":return null;default:return $||Se}},[d,$,O,ne,ie,me,xe,he]),se=k.useMemo(()=>{switch(d){case"heart":return J;case"meds":return oe;case"sleep":return de;case"exercise":return ce;case"mood":return ue;case"water":return fe;case"glucose":return pe;case"lab_results":return!1;default:return!1}},[d,J,oe,de,ce,ue,fe,pe]);k.useEffect(()=>{i(null)},[l,d]);const $e={heart:"vitals_enabled",meds:"medications_enabled",sleep:"sleep_enabled",exercise:"exercise_enabled",mood:"mood_enabled",water:"water_enabled",glucose:"glucose_enabled",lab_results:"lab_results_enabled"},Fe=[{id:"heart",label:"ความดัน",icon:ze},{id:"meds",label:"ยา",icon:Ke},{id:"sleep",label:"นอน",icon:Be},{id:"exercise",label:"ออกกำลัง",icon:Pe},{id:"mood",label:"อารมณ์",icon:We},{id:"water",label:"น้ำ",icon:qe},{id:"glucose",label:"ระดับน้ำตาล",icon:He},{id:"lab_results",label:"ผลแล็บ",icon:ge}],Y=k.useMemo(()=>Fe.filter(n=>!o||o[$e[n.id]]!==!1),[o]);k.useEffect(()=>{Y.length>0&&!Y.find(n=>n.id===d)&&f(Y[0].id)},[Y,d]);const F=n=>{n&&n.activePayload&&n.activePayload[0]&&i(n.activePayload[0].payload)};return e.jsxs("div",{className:"min-h-screen pb-32 font-sans overflow-x-hidden relative z-10 bg-background",children:[e.jsx("header",{className:"bg-card pt-4 pb-1 px-6 sticky top-0 z-20 flex justify-between items-center border-b border-border",children:e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"แนวโน้ม"})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 space-y-6 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex bg-muted/50 p-1 rounded-xl gap-1",children:["7d","15d","30d","custom"].map((n,b)=>{const q=["7 วัน","15 วัน","30 วัน","กำหนดเอง"],_=l===n;return e.jsxs("button",{onClick:()=>{c(n),n==="custom"&&(g(m.startDate),N(m.endDate),j(!0))},className:ye("flex-1 py-2 text-xs font-semibold rounded-lg transition-all flex items-center justify-center gap-1",_?"bg-primary/10 text-primary shadow-sm border border-primary/30":"text-muted-foreground"),children:[n==="custom"&&e.jsx(be,{className:"w-3 h-3"}),q[b]]},n)})}),l==="custom"&&e.jsxs("button",{onClick:()=>{g(m.startDate),N(m.endDate),j(!0)},className:"flex items-center justify-center gap-2 text-xs text-primary bg-primary/5 px-3 py-2 rounded-lg border border-primary/20",children:[e.jsx(be,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[new Date(m.startDate).toLocaleDateString("th-TH",{day:"numeric",month:"short"})," - ",new Date(m.endDate).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"2-digit"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:Y.map(n=>{const b=d===n.id;return e.jsxs("button",{onClick:()=>f(n.id),className:ye("flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all border",b?"bg-primary text-primary-foreground border-primary shadow-md shadow-primary/20":"bg-card text-muted-foreground border-border"),children:[e.jsx(n.icon,{className:"w-3.5 h-3.5"}),n.label]},n.id)})}),se&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Oe,{className:"w-8 h-8 animate-spin text-primary"})}),!se&&d==="lab_results"&&e.jsx(V,{className:"border-none shadow-sm bg-card",children:e.jsxs(I,{className:"py-12 flex flex-col items-center text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-teal-50 dark:bg-teal-950/30 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"w-8 h-8 text-teal-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-foreground",children:"กราฟผลแล็บ"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-[250px]",children:'กราฟแนวโน้มผลตรวจเลือดกำลังพัฒนา สามารถบันทึกผลแล็บได้จากหน้า "บันทึก" แล้ววันนี้'})]})]})}),!se&&h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 transition-all",children:[e.jsx(V,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(I,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:h.summary.label1}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:h.summary.avg})]})}),e.jsx(V,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(I,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:h.summary.label2}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:h.summary.count})]})})]}),e.jsxs(V,{className:"border-none shadow-sm bg-card p-6 relative",children:[d==="heart"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#EF4444]"}),"ความดันช่วงเช้า (AM)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#EF4444] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"SYS"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#3B82F6] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"DIA"})]})]}),e.jsx("div",{className:"h-[180px] w-full",children:e.jsx(R,{width:"100%",height:"100%",children:e.jsxs(le,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,180]}),e.jsx(C,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(ee,{y:135,stroke:"#EF4444",strokeDasharray:"6 4",strokeOpacity:.4}),e.jsx(H,{type:"monotone",dataKey:"sys_am",name:"SYS เช้า",stroke:"#EF4444",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#EF4444"},activeDot:{r:5,strokeWidth:0,fill:"#EF4444"},connectNulls:!0}),e.jsx(H,{type:"monotone",dataKey:"dia_am",name:"DIA เช้า",stroke:"#3B82F6",strokeWidth:2,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#3B82F6"},activeDot:{r:5,strokeWidth:0,fill:"#3B82F6"},connectNulls:!0})]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#991B1B]"}),"ความดันช่วงเย็น (PM)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#991B1B] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"SYS"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#1E3A8A] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"DIA"})]})]}),e.jsx("div",{className:"h-[180px] w-full",children:e.jsx(R,{width:"100%",height:"100%",children:e.jsxs(le,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,180]}),e.jsx(C,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(ee,{y:135,stroke:"#991B1B",strokeDasharray:"6 4",strokeOpacity:.4}),e.jsx(H,{type:"monotone",dataKey:"sys_pm",name:"SYS เย็น",stroke:"#991B1B",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#991B1B"},activeDot:{r:5,strokeWidth:0,fill:"#991B1B"},connectNulls:!0}),e.jsx(H,{type:"monotone",dataKey:"dia_pm",name:"DIA เย็น",stroke:"#1E3A8A",strokeWidth:2,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#1E3A8A"},activeDot:{r:5,strokeWidth:0,fill:"#1E3A8A"},connectNulls:!0})]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#F59E0B]"}),"ชีพจร (Heart Rate)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 border-t-2 border-dashed border-[#F59E0B]"}),e.jsx("span",{className:"text-muted-foreground",children:"เช้า"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#F97316] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"เย็น"})]})]}),e.jsx("div",{className:"h-[150px] w-full",children:e.jsx(R,{width:"100%",height:"100%",children:e.jsxs(le,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[40,120]}),e.jsx(C,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(H,{type:"monotone",dataKey:"pulse_am",name:"HR เช้า",stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"5 5",dot:{r:3,fill:"white",strokeWidth:2,stroke:"#F59E0B"},activeDot:{r:5,strokeWidth:0,fill:"#F59E0B"},connectNulls:!0}),e.jsx(H,{type:"monotone",dataKey:"pulse_pm",name:"HR เย็น",stroke:"#F97316",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#F97316"},activeDot:{r:5,strokeWidth:0,fill:"#F97316"},connectNulls:!0})]})})})]})]}),d==="glucose"&&e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#6366f1]"}),e.jsx("span",{className:"text-muted-foreground",children:"ตื่นนอน"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#f97316]"}),e.jsx("span",{className:"text-muted-foreground",children:"หลังอาหาร 1 ชม."})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#f59e0b]"}),e.jsx("span",{className:"text-muted-foreground",children:"หลังอาหาร 2 ชม."})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#8b5cf6]"}),e.jsx("span",{className:"text-muted-foreground",children:"ก่อนนอน"})]})]}),d!=="heart"&&e.jsx("div",{className:"h-[240px] w-full",children:e.jsx(R,{width:"100%",height:"100%",children:d==="meds"?e.jsxs(G,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,100]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(X,{dataKey:"percent",radius:[6,6,0,0],children:h.data.map((n,b)=>e.jsx(Z,{fill:n.percent===100?"#10b981":n.percent===0?"#ef4444":"#f97316"},`cell-${b}`))})]}):d==="sleep"?e.jsxs(G,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,10]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(X,{dataKey:"hours",radius:[6,6,0,0],children:h.data.map((n,b)=>e.jsx(Z,{fill:n.hours&&n.hours<6?"#f97316":"#8b5cf6"},`cell-${b}`))})]}):d==="exercise"?e.jsxs(G,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,60]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(X,{dataKey:"duration",radius:[6,6,0,0],children:h.data.map((n,b)=>e.jsx(Z,{fill:n.duration==null?"#e5e7eb":(n.duration??0)>=30?"#10b981":"#f97316"},`cell-${b}`))})]}):d==="mood"?e.jsxs(G,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,5]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(X,{dataKey:"moodScore",radius:[6,6,0,0],children:h.data.map((n,b)=>e.jsx(Z,{fill:n.moodScore==null?"#e5e7eb":(n.moodScore??0)>=4?"#10b981":(n.moodScore??0)>=3?"#f59e0b":"#ef4444"},`cell-${b}`))})]}):d==="glucose"?(()=>{const n={fasting:"#6366f1",post_meal_1h:"#f97316",post_meal_2h:"#f59e0b",before_bed:"#8b5cf6"},b={fasting:"ตื่นนอน",post_meal_1h:"หลังอาหาร 1 ชม.",post_meal_2h:"หลังอาหาร 2 ชม.",before_bed:"ก่อนนอน"},q=[];h.data.forEach((p,v)=>{p.glucoseReadings&&p.glucoseReadings.forEach((T,U)=>{const ae=p.glucoseReadings.length>1?(U-(p.glucoseReadings.length-1)/2)*.15:0;q.push({dayIndex:v+ae,glucose:T.glucose,mealContext:T.mealContext||"fasting",time:T.time,day:p.day,date:p.date})})});const _={};q.forEach(p=>{const v=p.mealContext;_[v]||(_[v]=[]),_[v].push(p)});const Ae=h.data.map(p=>p.day);return e.jsxs(Ie,{margin:{top:10,right:10,left:-25,bottom:0},children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{type:"number",dataKey:"dayIndex",domain:[-.5,h.data.length-.5],ticks:h.data.map((p,v)=>v),tickFormatter:p=>Ae[Math.round(p)]||"",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{type:"number",dataKey:"glucose",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,250]}),e.jsx(Re,{range:[80,80]}),e.jsx(ee,{y:100,stroke:"#f59e0b",strokeDasharray:"6 4",strokeOpacity:.5,label:{value:"เสี่ยง 100",position:"insideTopLeft",fontSize:9,fill:"#f59e0b"}}),e.jsx(ee,{y:126,stroke:"#ef4444",strokeDasharray:"6 4",strokeOpacity:.5,label:{value:"สูง 126",position:"insideTopLeft",fontSize:9,fill:"#ef4444"}}),e.jsx(C,{content:({payload:p})=>{if(!p||!p[0])return null;const v=p[0].payload;return e.jsxs("div",{className:"bg-card border border-border rounded-xl px-3 py-2 shadow-md text-xs space-y-0.5",children:[e.jsxs("p",{className:"font-bold",children:[v.day," (",v.date,")"]}),e.jsxs("p",{className:"font-bold text-base",style:{color:n[v.mealContext]||"#ec4899"},children:[v.glucose," mg/dL"]}),e.jsxs("p",{className:"text-muted-foreground",children:[b[v.mealContext]||v.mealContext," · ",v.time]})]})}}),Object.entries(_).map(([p,v])=>e.jsx(et,{name:b[p]||p,data:v,fill:n[p]||"#ec4899",stroke:"white",strokeWidth:2,onClick:T=>{if(T&&T.date){const U=h.data.find(ae=>ae.date===T.date);U&&i(U)}},cursor:"pointer"},p))]})})():e.jsxs(G,{data:h.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:F,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,12]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(X,{dataKey:"glasses",radius:[6,6,0,0],children:h.data.map((n,b)=>e.jsx(Z,{fill:(n.glasses||0)>=8?"#3b82f6":(n.glasses||0)>=6?"#60a5fa":"#93c5fd"},`cell-${b}`))})]})})}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium bg-muted/30 px-3 py-1 rounded-full flex items-center gap-1.5",children:[e.jsx(tt,{className:"w-3 h-3"})," แตะจุดบนกราฟเพื่อดูรายละเอียด"]})}),r&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-muted/50 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:r.day}),d==="heart"&&e.jsxs("div",{className:"space-y-2 mt-1",children:[(r.sys_am||r.pulse_am)&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground w-8",children:"เช้า"}),e.jsxs("p",{className:"text-base font-bold text-[#EF4444]",children:[r.sys_am,"/",r.dia_am," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"mmHg"})]}),e.jsxs("p",{className:"text-sm font-bold text-[#F59E0B]",children:[r.pulse_am," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"bpm"})]})]}),(r.sys_pm||r.pulse_pm)&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground w-8",children:"เย็น"}),e.jsxs("p",{className:"text-base font-bold text-[#991B1B]",children:[r.sys_pm,"/",r.dia_pm," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"mmHg"})]}),e.jsxs("p",{className:"text-sm font-bold text-[#F97316]",children:[r.pulse_pm," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"bpm"})]})]})]}),d==="meds"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-sm font-bold text-foreground",children:["ตั้งไว้ ",r.target," ช่วง | ทำได้ ",r.done," ช่วง |"," ","= ",r.percent,"%"]})}),d==="sleep"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[r.hours," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"ชม."})]})}),d==="exercise"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:r.duration!==null?e.jsxs(e.Fragment,{children:[r.duration," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"นาที"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้ออกกำลังกาย"})}),r.exerciseType&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:r.exerciseType})]}),d==="mood"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-amber-600",children:r.moodScore!==null?e.jsxs(e.Fragment,{children:[r.moodScore,"/5"," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"คะแนน"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้บันทึก"})}),r.note&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:r.note})]}),d==="water"&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[r.glasses," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"แก้ว"})]}),r.ml&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["≈ ",r.ml," ml"]})]}),d==="glucose"&&e.jsx("div",{className:"mt-1 space-y-2",children:r.glucoseReadings&&r.glucoseReadings.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider",children:["วัด ",r.glucoseReadings.length," ครั้ง · เฉลี่ย ",r.glucose," mg/dL"]}),r.glucoseReadings.map((n,b)=>{const q={fasting:"ตื่นนอน",post_meal_1h:"หลังอาหาร 1 ชม.",post_meal_2h:"หลังอาหาร 2 ชม.",before_bed:"ก่อนนอน"},_={fasting:"#6366f1",post_meal_1h:"#f97316",post_meal_2h:"#f59e0b",before_bed:"#8b5cf6"};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:_[n.mealContext||""]||"#ec4899"}}),e.jsx("span",{className:"text-base font-bold",style:{color:_[n.mealContext||""]||"#ec4899"},children:n.glucose}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"mg/dL"}),e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[q[n.mealContext||""]||n.mealContext," · ",n.time]})]},b)})]}):e.jsx("p",{className:"text-muted-foreground text-base",children:"ไม่ได้วัด"})})]}),r.note&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/30 px-3 py-2 rounded-xl text-xs font-medium text-yellow-700 dark:text-yellow-400 max-w-[150px]",children:['"',r.note,'"']})]}),r.event&&!r.note&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 bg-red-50 dark:bg-red-950/30 text-red-600 dark:text-red-400 px-2.5 py-1 rounded-full",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px] font-bold",children:r.event})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-sm font-bold text-foreground flex items-center gap-2 pl-1",children:[e.jsx("div",{className:"w-1 h-4 bg-accent rounded-full"}),"อุ่นใจสังเกตให้"]}),e.jsx(V,{className:"border-none shadow-sm bg-accent/5 overflow-hidden group hover:bg-accent/10 transition-colors",children:e.jsxs(I,{className:"p-5 flex gap-4 items-start",children:[e.jsx("div",{className:"bg-accent/10 p-3 rounded-2xl text-accent group-hover:scale-110 transition-transform",children:e.jsx(st,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 space-y-2",children:e.jsxs("p",{className:"text-sm leading-relaxed font-semibold text-foreground",children:['"',h.insight,'"']})})]})})]})]})]}),e.jsx(Ve,{open:x,onOpenChange:j,children:e.jsxs(Ge,{className:"max-h-[85vh]",children:[e.jsxs(Xe,{className:"flex items-center justify-between px-6",children:[e.jsx(Ze,{className:"text-xl font-bold",children:"เลือกช่วงวันที่"}),e.jsx(Qe,{asChild:!0,children:e.jsx(re,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10",children:e.jsx(Je,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"px-6 pb-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันเริ่มต้น"}),e.jsx(je,{value:D,onChange:g,maxDate:w})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันสิ้นสุด"}),e.jsx(je,{value:w,onChange:N,minDate:D,maxDate:Q(0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"เลือกด่วน"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"7 วันที่แล้ว",days:7},{label:"14 วันที่แล้ว",days:14},{label:"30 วันที่แล้ว",days:30},{label:"60 วันที่แล้ว",days:60},{label:"90 วันที่แล้ว",days:90}].map(n=>e.jsx("button",{onClick:()=>{g(Q(n.days-1)),N(Q(0))},className:"px-3 py-1.5 text-xs font-medium rounded-full bg-muted hover:bg-muted/80 text-muted-foreground transition-colors",children:n.label},n.days))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(re,{variant:"ghost",className:"flex-1 h-12 rounded-xl",onClick:()=>j(!1),children:"ยกเลิก"}),e.jsx(re,{className:"flex-1 h-12 rounded-xl bg-primary text-primary-foreground",onClick:()=>{u({startDate:D,endDate:w}),j(!1)},children:"ยืนยัน"})]})]})]})}),e.jsx(Ue,{})]})}export{_t as default};
