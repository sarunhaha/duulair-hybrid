import{r as c,j as e}from"./vendor-query-OvJu5Khy.js";import{c as Se,a as x,y as Pe,$ as Te,Q as Ee,a0 as Re,g as h,W as Y,L as D,P as $,o as Ie,H as Me,a4 as Ae,a5 as Le,e as qe,f as De,a2 as ze,I as O,a1 as Be,_ as W,a6 as X,X as Z,q as He,r as Oe,s as Fe,t as $e,R as Ue,E as T,J as Ve,a3 as Ye,Z as We}from"./index-3wI5tf5d.js";import{e as ae,u as Xe,a as Ze,d as ne,f as Ge,g as Je,h as Qe}from"./vendor-ui-CYcp45lG.js";import{S as G,a as J,b as Q,c as K,d as F}from"./select-DoqnslbJ.js";import{k as Ke,g as et,l as tt,m as st,n as at}from"./use-profile-Cu-66GyC.js";import{P as ee}from"./pen-fHCH83Bf.js";import{C as nt}from"./chevron-down-D0pSlfKn.js";import"./vendor-react-qkC6yhPU.js";const lt=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],rt=Se("utensils",lt);var B="Switch",[it]=Ze(B),[ct,ot]=it(B),le=c.forwardRef((i,f)=>{const{__scopeSwitch:n,name:p,checked:o,defaultChecked:E,required:_,disabled:u,value:v="on",onCheckedChange:k,form:g,...y}=i,[S,r]=c.useState(null),R=ae(f,I=>r(I)),m=c.useRef(!1),j=S?g||!!S.closest("form"):!0,[a,N]=Xe({prop:o,defaultProp:E??!1,onChange:k,caller:B});return e.jsxs(ct,{scope:n,checked:a,disabled:u,children:[e.jsx(ne.button,{type:"button",role:"switch","aria-checked":a,"aria-required":_,"data-state":oe(a),"data-disabled":u?"":void 0,disabled:u,value:v,...y,ref:R,onClick:Ge(i.onClick,I=>{N(L=>!L),j&&(m.current=I.isPropagationStopped(),m.current||I.stopPropagation())})}),j&&e.jsx(ce,{control:S,bubbles:!m.current,name:p,value:v,checked:a,required:_,disabled:u,form:g,style:{transform:"translateX(-100%)"}})]})});le.displayName=B;var re="SwitchThumb",ie=c.forwardRef((i,f)=>{const{__scopeSwitch:n,...p}=i,o=ot(re,n);return e.jsx(ne.span,{"data-state":oe(o.checked),"data-disabled":o.disabled?"":void 0,...p,ref:f})});ie.displayName=re;var dt="SwitchBubbleInput",ce=c.forwardRef(({__scopeSwitch:i,control:f,checked:n,bubbles:p=!0,...o},E)=>{const _=c.useRef(null),u=ae(_,E),v=Je(n),k=Qe(f);return c.useEffect(()=>{const g=_.current;if(!g)return;const y=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(y,"checked").set;if(v!==n&&r){const R=new Event("click",{bubbles:p});r.call(g,n),g.dispatchEvent(R)}},[v,n,p]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:u,style:{...o.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ce.displayName=dt;function oe(i){return i?"checked":"unchecked"}var de=le,ut=ie;const ue=c.forwardRef(({className:i,...f},n)=>e.jsx(de,{className:x("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",i),...f,ref:n,children:e.jsx(ut,{className:x("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ue.displayName=de.displayName;const z=[{value:"medication",label:"กินยา",icon:$,color:"bg-purple-500/10 text-purple-500"},{value:"water",label:"ดื่มน้ำ",icon:Ie,color:"bg-blue-500/10 text-blue-500"},{value:"vitals",label:"วัดความดัน",icon:Me,color:"bg-red-500/10 text-red-500"},{value:"food",label:"ทานอาหาร",icon:rt,color:"bg-orange-500/10 text-orange-500"},{value:"exercise",label:"ออกกำลังกาย",icon:Ae,color:"bg-green-500/10 text-green-500"},{value:"glucose",label:"วัดน้ำตาล",icon:Le,color:"bg-amber-500/10 text-amber-500"}],mt=z.map(i=>({value:i.value,label:i.label,icon:i.icon})),te=[{value:"monday",label:"จ",fullLabel:"จันทร์"},{value:"tuesday",label:"อ",fullLabel:"อังคาร"},{value:"wednesday",label:"พ",fullLabel:"พุธ"},{value:"thursday",label:"พฤ",fullLabel:"พฤหัสบดี"},{value:"friday",label:"ศ",fullLabel:"ศุกร์"},{value:"saturday",label:"ส",fullLabel:"เสาร์"},{value:"sunday",label:"อา",fullLabel:"อาทิตย์"}],xt=[{label:"เช้า",time:"08:00"},{label:"กลางวัน",time:"12:00"},{label:"เย็น",time:"18:00"},{label:"ก่อนนอน",time:"21:00"}],ht={type:"medication",title:"",time:"08:00",note:"",frequency:"daily",days_of_week:[],is_active:!0},se=i=>{switch(i){case"medication":return"พิมพ์ชื่อยาอื่นๆ...";case"water":return"เช่น ดื่มน้ำ 1 แก้ว";case"vitals":return"เช่น วัดความดันเช้า";case"food":return"เช่น ทานอาหารเช้า";case"exercise":return"เช่น เดินออกกำลังกาย";case"glucose":return"เช่น วัดน้ำตาลเช้า";default:return"ชื่อกิจกรรม"}},ft=i=>{switch(i){case"medication":return"ยังไม่มีเตือนกินยา";case"water":return"ยังไม่มีเตือนดื่มน้ำ";case"vitals":return"ยังไม่มีเตือนวัดความดัน";case"food":return"ยังไม่มีเตือนทานอาหาร";case"exercise":return"ยังไม่มีเตือนออกกำลังกาย";case"glucose":return"ยังไม่มีเตือนวัดระดับน้ำตาล";default:return"ยังไม่มีการเตือน"}};function _t(){const[,i]=Pe(),f=Te(),{toast:n}=Ee(),p=Re(),o=p.patientId,[E,_]=c.useState(!1);!f.isLoading&&!p.isLoading&&!o&&!E&&(_(!0),p.ensurePatient());const{data:u,isLoading:v}=Ke(o),{data:k}=et(o),g=tt(),y=st(),S=at(),[r,R]=c.useState("medication"),[m,j]=c.useState(""),[a,N]=c.useState(["08:00"]),[I,L]=c.useState(""),[q,H]=c.useState(!1),[me,M]=c.useState(!1),[U,xe]=c.useState(null),[l,b]=c.useState(ht),P=c.useMemo(()=>u?u.filter(t=>t.type===r):[],[u,r]),he=c.useMemo(()=>{if(!u)return{};const t={};for(const s of u)t[s.type]||(t[s.type]={active:0,total:0}),t[s.type].total++,s.is_active&&t[s.type].active++;return t},[u]),w=c.useMemo(()=>k?k.filter(t=>t.active):[],[k]),fe=()=>{const t=a[a.length-1],[s]=t.split(":").map(Number),C=`${Math.min(s+4,23).toString().padStart(2,"0")}:00`;a.includes(C)||N([...a,C])},pe=t=>{a.length<=1||N(a.filter((s,d)=>d!==t))},ge=t=>{j(t),L(""),H(!1)},be=async()=>{if(!(!o||!m.trim()||a.length===0))try{for(const t of a)await g.mutateAsync({type:r,title:m.trim(),time:t,custom_time:t,patient_id:o,is_active:!0,frequency:"daily"});j(""),N(["08:00"]),L(""),n({title:a.length>1?`เพิ่ม ${a.length} การเตือนเรียบร้อยแล้ว`:"เพิ่มการเตือนเรียบร้อยแล้ว"})}catch{n({title:"ไม่สามารถเพิ่มการเตือนได้",variant:"destructive"})}},ve=t=>{xe(t.id),b({type:t.type,title:t.title,time:t.custom_time||t.time||"08:00",note:t.note||"",frequency:t.frequency==="specific_days"?"specific_days":"daily",days_of_week:t.days_of_week||[],is_active:t.is_active}),M(!0)},ye=async t=>{if(o&&confirm("ต้องการลบการเตือนนี้หรือไม่?"))try{await S.mutateAsync({id:t,patientId:o}),n({title:"ลบการเตือนเรียบร้อยแล้ว"})}catch{n({title:"ไม่สามารถลบการเตือนได้",variant:"destructive"})}},je=async t=>{if(o)try{await y.mutateAsync({id:t.id,data:{is_active:!t.is_active,patient_id:o}})}catch{n({title:"ไม่สามารถเปลี่ยนสถานะได้",variant:"destructive"})}},Ne=async()=>{if(!o){n({title:"กรุณาคุยกับน้องอุ่นใน LINE Chat ก่อนนะคะ",variant:"destructive"});return}if(!l.title.trim()){n({title:"กรุณาระบุชื่อเตือน",variant:"destructive"});return}if(!l.time){n({title:"กรุณาระบุเวลาเตือน",variant:"destructive"});return}if(l.frequency==="specific_days"&&l.days_of_week.length===0){n({title:"กรุณาเลือกวันที่ต้องการเตือน",variant:"destructive"});return}try{U&&(await y.mutateAsync({id:U,data:{...l,custom_time:l.time,days_of_week:l.frequency==="specific_days"?l.days_of_week:void 0,patient_id:o}}),n({title:"แก้ไขการเตือนเรียบร้อยแล้ว"})),M(!1)}catch{n({title:"ไม่สามารถบันทึกการเตือนได้",variant:"destructive"})}},we=t=>{b(s=>({...s,days_of_week:s.days_of_week.includes(t)?s.days_of_week.filter(d=>d!==t):[...s.days_of_week,t]}))},V=t=>z.find(s=>s.value===t)||z[0];if(f.isLoading)return e.jsxs("div",{className:"min-h-screen pb-8 font-sans bg-background",children:[e.jsxs("header",{className:"bg-card pt-12 pb-4 px-6 sticky top-0 z-20 flex items-center gap-4 border-b border-border",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>i("/settings"),children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-bold text-foreground flex-1",children:"ตั้งเวลาเตือน"})]}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-3",children:[e.jsx(D,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"กำลังโหลด..."})]})})]});const A=V(r);return e.jsxs("div",{className:"min-h-screen pb-8 font-sans bg-background",children:[e.jsxs("header",{className:"bg-card pt-12 pb-4 px-6 sticky top-0 z-20 flex items-center gap-4 border-b border-border",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>i("/settings"),children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-bold text-foreground flex-1",children:"ตั้งเวลาเตือน"})]}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 space-y-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:mt.map(t=>{const s=r===t.value,d=he[t.value];return e.jsxs("button",{onClick:()=>R(t.value),className:x("flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all border",s?"bg-primary text-primary-foreground border-primary shadow-md shadow-primary/20":"bg-card text-muted-foreground border-border"),children:[e.jsx(t.icon,{className:"w-3.5 h-3.5"}),t.label,d&&d.total>0&&e.jsx("span",{className:x("ml-0.5 text-[10px] font-bold rounded-full px-1.5 py-0.5 leading-none",s?"bg-white/20":"bg-muted"),children:d.total})]},t.value)})}),e.jsx(qe,{className:"border-none shadow-sm",children:e.jsxs(De,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:x("w-10 h-10 rounded-xl flex items-center justify-center",A.color),children:e.jsx(A.icon,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-bold",children:["เตือน",A.label]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r==="medication"&&"ตั้งเตือนเวลากินยา",r==="water"&&"ตั้งเตือนดื่มน้ำระหว่างวัน",r==="vitals"&&"ตั้งเตือนวัดความดัน ชีพจร",r==="food"&&"ตั้งเตือนเวลาทานอาหาร",r==="exercise"&&"ตั้งเตือนเวลาออกกำลังกาย",r==="glucose"&&"ตั้งเตือนวัดระดับน้ำตาล"]})]}),P.length>0&&e.jsxs("span",{className:"text-xs font-bold text-muted-foreground bg-muted/50 px-2 py-1 rounded-lg",children:[P.filter(t=>t.is_active).length,"/",P.length]})]}),v&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(D,{className:"w-6 h-6 animate-spin text-primary"})}),!v&&P.length===0&&e.jsxs("div",{className:"flex flex-col items-center py-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 mb-3 bg-muted/50 rounded-full flex items-center justify-center",children:e.jsx(A.icon,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:ft(r)}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-0.5",children:"เพิ่มการเตือนด้านล่างได้เลย"})]}),P.length>0&&e.jsx("div",{className:"space-y-2",children:P.map(t=>{const s=V(t.type),d=s.icon,C=t.custom_time||t.time,_e=t.frequency==="daily"?"ทุกวัน":t.frequency==="specific_days"&&t.days_of_week?t.days_of_week.map(ke=>te.find(Ce=>Ce.value===ke)?.label).join(" "):"ตามกำหนด";return e.jsxs("div",{className:x("bg-muted/20 p-3 rounded-xl space-y-2 transition-opacity",!t.is_active&&"opacity-50"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:x("p-1.5 rounded-lg shrink-0",s.color),children:e.jsx(d,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-foreground truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-xs font-semibold text-primary",children:[C," น."]}),e.jsx("span",{className:"text-muted-foreground/30",children:"·"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:_e})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx(ue,{checked:t.is_active,onCheckedChange:()=>je(t),className:"scale-75"}),e.jsx(h,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-primary",onClick:()=>ve(t),children:e.jsx(ee,{className:"w-3.5 h-3.5"})}),e.jsx(h,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-red-500",onClick:()=>ye(t.id),children:e.jsx(ze,{className:"w-3.5 h-3.5"})})]})]}),t.note&&e.jsx("div",{className:"text-[11px] text-muted-foreground bg-accent/5 border-l-2 border-accent/30 px-2 py-1 rounded ml-9",children:t.note})]},t.id)})}),e.jsxs("div",{className:"border-t border-border pt-4 space-y-3",children:[r==="medication"&&e.jsxs("div",{className:"space-y-2",children:[w.length>0&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>H(!q),className:x("w-full h-10 px-3 rounded-xl border border-input bg-muted/20 text-left text-sm","flex items-center justify-between","hover:bg-muted/40 transition-colors",!m&&"text-muted-foreground"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:m||"เลือกยาจากรายการ..."})]}),e.jsx(nt,{className:x("w-4 h-4 text-muted-foreground transition-transform",q&&"rotate-180")})]}),q&&e.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-card border border-border rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"max-h-[180px] overflow-y-auto",children:w.map(t=>e.jsxs("button",{type:"button",onClick:()=>ge(t.name),className:x("w-full px-3 py-2.5 text-left text-sm hover:bg-muted/40 transition-colors flex items-center gap-2",m===t.name&&"bg-primary/5 text-primary font-bold"),children:[e.jsx($,{className:"w-3.5 h-3.5 text-purple-400 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"truncate",children:t.name}),t.dosage&&e.jsx("span",{className:"text-[11px] text-muted-foreground ml-1.5",children:t.dosage})]})]},t.id))}),e.jsx("div",{className:"border-t border-border",children:e.jsxs("button",{type:"button",onClick:()=>{j(""),H(!1)},className:"w-full px-3 py-2.5 text-left text-sm text-muted-foreground hover:bg-muted/40 transition-colors flex items-center gap-2",children:[e.jsx(ee,{className:"w-3.5 h-3.5 shrink-0"}),"พิมพ์ชื่อยาอื่นๆ..."]})})]})]}),(w.length===0||!q&&!m)&&e.jsx(O,{value:m,onChange:t=>j(t.target.value),placeholder:se(r),className:"h-10 rounded-xl text-sm"})]}),r!=="medication"&&e.jsx(O,{value:m,onChange:t=>j(t.target.value),placeholder:se(r),className:"h-10 rounded-xl text-sm"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("p",{className:"text-xs font-bold text-muted-foreground flex items-center gap-1.5 whitespace-nowrap",children:[e.jsx(Be,{className:"w-3.5 h-3.5 shrink-0"}),"เวลาเตือน (",a.length," รอบ/วัน)"]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"h-7 text-xs text-primary hover:text-primary/80 px-2 shrink-0 whitespace-nowrap",onClick:fe,children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"เพิ่มรอบ"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((t,s)=>e.jsxs("div",{className:"flex items-center bg-muted/30 rounded-xl pr-1.5",children:[e.jsx(X,{value:t,onChange:d=>{const C=[...a];C[s]=d,N(C)},className:"w-auto min-w-0 h-9 text-xs border-none bg-transparent px-2.5"}),a.length>1&&e.jsx("button",{type:"button",onClick:()=>pe(s),className:"w-5 h-5 rounded-full flex items-center justify-center text-muted-foreground hover:text-red-500 hover:bg-red-500/10 transition-colors shrink-0",children:e.jsx(Z,{className:"w-3 h-3"})})]},s))}),e.jsx("div",{className:"flex gap-1.5",children:xt.map(t=>{const s=a.includes(t.time);return e.jsxs("button",{type:"button",onClick:()=>{s?a.length>1&&N(a.filter(d=>d!==t.time)):N([...a,t.time].sort())},className:x("flex-1 py-1.5 rounded-lg text-[11px] font-bold transition-all border",s?"bg-primary/10 text-primary border-primary/20":"text-muted-foreground border-transparent hover:bg-muted/40"),children:[t.label,e.jsx("span",{className:"block text-[10px] font-normal opacity-70",children:t.time})]},t.time)})})]}),e.jsxs(h,{className:"w-full h-11 rounded-xl text-sm font-bold gap-2",onClick:be,disabled:!m.trim()||a.length===0||g.isPending,children:[g.isPending?e.jsx(D,{className:"w-4 h-4 animate-spin"}):e.jsx(W,{className:"w-4 h-4"}),"เพิ่มเตือน",A.label,a.length>1&&` (${a.length} รอบ)`]})]})]})})]}),e.jsx(He,{open:me,onOpenChange:M,children:e.jsxs(Oe,{className:"max-h-[90vh]",children:[e.jsx(Fe,{className:"border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-primary"}),"แก้ไขการเตือน"]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>M(!1),children:e.jsx(Z,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"ประเภท"}),e.jsxs(G,{value:l.type,onValueChange:t=>b(s=>({...s,type:t})),children:[e.jsx(J,{children:e.jsx(Q,{})}),e.jsx(K,{children:z.map(t=>e.jsx(F,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"reminder_title",children:"ชื่อเตือน *"}),l.type==="medication"&&w.length>0&&e.jsxs(G,{value:w.some(t=>t.name===l.title)?l.title:"__custom__",onValueChange:t=>{b(t==="__custom__"?s=>({...s,title:""}):s=>({...s,title:t}))},children:[e.jsx(J,{children:e.jsx(Q,{placeholder:"เลือกยา"})}),e.jsxs(K,{children:[w.map(t=>e.jsxs(F,{value:t.name,children:[t.name," ",t.dosage?`(${t.dosage})`:""]},t.id)),e.jsx(F,{value:"__custom__",children:"อื่นๆ (พิมพ์เอง)"})]})]}),(l.type!=="medication"||w.length===0||!w.some(t=>t.name===l.title))&&e.jsx(O,{id:"reminder_title",value:l.title,onChange:t=>b(s=>({...s,title:t.target.value})),placeholder:l.type==="medication"?"พิมพ์ชื่อยา":"เช่น กินยาความดัน"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"เวลาเตือน *"}),e.jsx(X,{value:l.time,onChange:t=>b(s=>({...s,time:t})),placeholder:"เลือกเวลา"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"ความถี่"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{type:"button",variant:l.frequency==="daily"?"default":"outline",className:"flex-1",onClick:()=>b(t=>({...t,frequency:"daily"})),children:"ทุกวัน"}),e.jsx(h,{type:"button",variant:l.frequency==="specific_days"?"default":"outline",className:"flex-1",onClick:()=>b(t=>({...t,frequency:"specific_days"})),children:"เลือกวัน"})]})]}),l.frequency==="specific_days"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"เลือกวันที่ต้องการเตือน"}),e.jsx("div",{className:"flex gap-2 justify-center",children:te.map(t=>e.jsx("button",{type:"button",onClick:()=>we(t.value),className:x("w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-colors",l.days_of_week.includes(t.value)?"bg-primary text-white":"bg-muted text-muted-foreground hover:bg-muted/80"),children:t.label},t.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{children:"หมายเหตุ (ถ้ามี)"}),e.jsx(Ve,{value:l.note,onChange:t=>b(s=>({...s,note:t.target.value})),placeholder:"เพิ่มรายละเอียดเพิ่มเติม",rows:2})]})]}),e.jsx(Ye,{className:"border-t border-border",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"outline",className:"flex-1",onClick:()=>M(!1),children:"ยกเลิก"}),e.jsxs(h,{className:"flex-1 gap-2",onClick:Ne,disabled:y.isPending,children:[y.isPending&&e.jsx(D,{className:"w-4 h-4 animate-spin"}),e.jsx(We,{className:"w-4 h-4"}),"บันทึก"]})]})})]})})]})}export{_t as default};
