import{b as l,u as s,c as a}from"./vendor-query-OvJu5Khy.js";import{l as i}from"./index-De6MWExH.js";const r={all:["profile"],patient:e=>[...r.all,"patient",e],caregiver:e=>[...r.all,"caregiver",e],caregivers:e=>[...r.all,"caregivers",e],patients:e=>[...r.all,"patients",e],linkCode:e=>[...r.all,"linkCode",e],medications:e=>[...r.all,"medications",e],reminders:e=>[...r.all,"reminders",e]};function y(e){return l({queryKey:e?r.patient(e):["profile","patient","none"],queryFn:async()=>{if(!e)return null;try{const n=await i.get(`/registration/profile/patient/${e}`);return console.log("[usePatientProfile] API response:",n),n.profile}catch(n){return console.warn("[usePatientProfile] API error:",n),d(e)}},enabled:!!e,staleTime:60*1e3})}function f(){const e=s();return a({mutationFn:async({patientId:n,data:t})=>{console.log("[useUpdatePatientProfile] Calling API with:",{patientId:n,data:t});const o=await i.put(`/registration/profile/patient/${n}`,t);return console.log("[useUpdatePatientProfile] API result:",o),o},onError:n=>{console.error("[useUpdatePatientProfile] Error:",n)},onSuccess:(n,{patientId:t})=>{console.log("[useUpdatePatientProfile] Success, invalidating queries for:",t),e.invalidateQueries({queryKey:r.patient(t)})}})}function P(e){return l({queryKey:e?r.linkCode(e):["profile","linkCode","none"],queryFn:async()=>{if(!e)return null;try{const n=await i.post("/registration/generate-link-code",{patient_id:e});return console.log("[useLinkCode] API response:",n),n}catch(n){return console.warn("[useLinkCode] API error:",n),null}},enabled:!!e,staleTime:300*1e3})}function p(e){return l({queryKey:e?r.caregivers(e):["profile","caregivers","none"],queryFn:async()=>{if(!e)return[];try{const n=await i.get(`/registration/patient/${e}/caregivers`);return console.log("[usePatientCaregivers] API response:",n),n.caregivers||[]}catch(n){return console.warn("[usePatientCaregivers] API error:",n),[]}},enabled:!!e,staleTime:60*1e3})}function _(e){return console.log("[usePatientMedicationsAll] Called with patientId:",e),l({queryKey:e?r.medications(e):["profile","medications","none"],queryFn:async()=>{if(console.log("[usePatientMedicationsAll] queryFn executing, patientId:",e),!e)return console.warn("[usePatientMedicationsAll] No patientId, returning empty array"),[];try{console.log("[usePatientMedicationsAll] Calling API:",`/medications/patient/${e}`);const n=await i.get(`/medications/patient/${e}`);return console.log("[usePatientMedicationsAll] API response:",n),console.log("[usePatientMedicationsAll] Medications count:",n.medications?.length||0),n.medications||[]}catch(n){return console.error("[usePatientMedicationsAll] API error:",n),[]}},enabled:!!e,staleTime:60*1e3})}function h(){const e=s();return a({mutationFn:async n=>{console.log("[useAddMedication] Adding medication:",n);const t=await i.post("/medications",n);return console.log("[useAddMedication] Result:",t),t},onError:n=>{console.error("[useAddMedication] Error:",n)},onSuccess:(n,t)=>{console.log("[useAddMedication] Success, invalidating queries"),e.invalidateQueries({queryKey:r.medications(t.patient_id)})}})}function A(){const e=s();return a({mutationFn:async({id:n,data:t})=>{console.log("[useUpdateMedication] Updating:",{id:n,data:t});const o=await i.put(`/medications/${n}`,t);return console.log("[useUpdateMedication] Result:",o),o},onError:n=>{console.error("[useUpdateMedication] Error:",n)},onSuccess:(n,{data:t})=>{console.log("[useUpdateMedication] Success, invalidating queries"),t.patient_id&&e.invalidateQueries({queryKey:r.medications(t.patient_id)})}})}function q(){const e=s();return a({mutationFn:async({id:n})=>i.delete(`/medications/${n}`),onSuccess:(n,{patientId:t})=>{e.invalidateQueries({queryKey:r.medications(t)})}})}function M(e){return console.log("[usePatientReminders] Called with patientId:",e),l({queryKey:e?r.reminders(e):["profile","reminders","none"],queryFn:async()=>{if(console.log("[usePatientReminders] queryFn executing, patientId:",e),!e)return console.warn("[usePatientReminders] No patientId, returning empty array"),[];try{console.log("[usePatientReminders] Calling API:",`/reminders/patient/${e}`);const n=await i.get(`/reminders/patient/${e}`);return console.log("[usePatientReminders] API response:",n),console.log("[usePatientReminders] Reminders count:",n.reminders?.length||0),n.reminders||[]}catch(n){return console.error("[usePatientReminders] API error:",n),[]}},enabled:!!e,staleTime:60*1e3})}function C(){const e=s();return a({mutationFn:async n=>i.post("/reminders",n),onSuccess:(n,t)=>{e.invalidateQueries({queryKey:r.reminders(t.patient_id)})}})}function v(){const e=s();return a({mutationFn:async({id:n,data:t})=>i.put(`/reminders/${n}`,t),onSuccess:(n,{data:t})=>{t.patient_id&&e.invalidateQueries({queryKey:r.reminders(t.patient_id)})}})}function w(){const e=s();return a({mutationFn:async({id:n})=>i.delete(`/reminders/${n}`),onSuccess:(n,{patientId:t})=>{e.invalidateQueries({queryKey:r.reminders(t)})}})}function F(e){if(!e)return null;const n=new Date,t=new Date(e);let o=n.getFullYear()-t.getFullYear();const u=n.getMonth()-t.getMonth();return(u<0||u===0&&n.getDate()<t.getDate())&&o--,o}function R(e){if(!e)return"-";const n=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],t=new Date(e),o=t.getDate(),u=n[t.getMonth()],c=t.getFullYear()+543;return`${o} ${u} ${c}`}function $(e){return e?{male:"ชาย",female:"หญิง",other:"อื่นๆ"}[e]||e:"-"}function d(e){return{id:e,user_id:"mock-user-id",first_name:"สมชาย",last_name:"ใจดี",nickname:"ชาย",birth_date:"1955-05-15",gender:"male",phone_number:"081-234-5678",address:"123/45 ถ.สุขุมวิท แขวงคลองเตย เขตคลองเตย กรุงเทพฯ 10110",weight_kg:65,height_cm:168,blood_type:"O",chronic_diseases:["ความดันโลหิตสูง","เบาหวาน"],drug_allergies:["Penicillin"],food_allergies:["อาหารทะเล"],medical_condition:"ความดันสูง ควบคุมด้วยยา",medical_notes:"ต้องวัดความดันทุกเช้า",hospital_name:"โรงพยาบาลบำรุงราษฎร์",hospital_phone:"02-667-1000",emergency_contact_name:"สมหญิง ใจดี",emergency_contact_relation:"ลูกสาว",emergency_contact_phone:"089-876-5432",created_at:"2024-01-15T00:00:00Z"}}export{P as a,p as b,F as c,$ as d,f as e,R as f,_ as g,h,A as i,q as j,M as k,C as l,v as m,w as n,y as u};
