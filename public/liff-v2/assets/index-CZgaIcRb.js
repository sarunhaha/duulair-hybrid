import{b as E,r as w,j as e}from"./vendor-query-OvJu5Khy.js";import{k as K,u as Ce,a as fe,l as pe,H as $e,P as Fe,M as Ae,m as Te,n as Ee,D as Ke,o as ze,L as Be,e as J,f as te,p as We,q as Pe,r as qe,s as He,t as Oe,v as Ye,g as se,X as Ve,w as ge,B as Ge}from"./index-3wI5tf5d.js";import{f as R,t as _e,s as Me,R as U,L as ae,C as M,X as S,Y as L,T as C,a as I,b as H,B as Y,c as V,d as G,S as Xe,Z as Ze,e as Qe}from"./th-Bhe4YqC6.js";import{I as Je}from"./info-CV-L6YAm.js";import{M as Ue}from"./message-circle-heart-DxSS6Ilb.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-ui-CYcp45lG.js";function z(a){const t=new Date;return Array.from({length:a},(s,r)=>{const d=Me(t,a-1-r);return R(d,"d MMM",{locale:_e})})}function B(a){const t=new Date;return Array.from({length:a},(s,r)=>{const d=Me(t,a-1-r);return R(d,"yyyy-MM-dd")})}const W={"7d":7,"15d":15,"30d":30,custom:0},y={all:["trends"],vitals:(a,t)=>[...y.all,"vitals",a,t],meds:(a,t)=>[...y.all,"meds",a,t],sleep:(a,t)=>[...y.all,"sleep",a,t],exercise:(a,t)=>[...y.all,"exercise",a,t],mood:(a,t)=>[...y.all,"mood",a,t],water:(a,t)=>[...y.all,"water",a,t],glucose:(a,t)=>[...y.all,"glucose",a,t]};function Ie(a,t,s){const r=a?t==="custom"&&s?[...y.vitals(a,t),s.startDate,s.endDate]:y.vitals(a,t):["trends","vitals","none"];return E({queryKey:r,queryFn:async()=>{if(!a)return ye(t,s);try{let d=`/trends/vitals/${a}?range=${t}`;return t==="custom"&&s&&(d+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await K.get(d)}catch{return console.warn("Vitals trend API not available, using mock data"),ye(t,s)}},enabled:!0,staleTime:60*1e3})}function Re(a,t,s){const r=a?t==="custom"&&s?[...y.meds(a,t),s.startDate,s.endDate]:y.meds(a,t):["trends","meds","none"];return E({queryKey:r,queryFn:async()=>{if(!a)return be(t,s);try{let d=`/trends/meds/${a}?range=${t}`;return t==="custom"&&s&&(d+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await K.get(d)}catch{return console.warn("Meds trend API not available, using mock data"),be(t,s)}},enabled:!0,staleTime:60*1e3})}function et(a,t,s){const r=a?t==="custom"&&s?[...y.sleep(a,t),s.startDate,s.endDate]:y.sleep(a,t):["trends","sleep","none"];return E({queryKey:r,queryFn:async()=>{if(!a)return je(t,s);try{let d=`/trends/sleep/${a}?range=${t}`;return t==="custom"&&s&&(d+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await K.get(d)}catch{return console.warn("Sleep trend API not available, using mock data"),je(t,s)}},enabled:!0,staleTime:60*1e3})}function F(a,t){const s=new Date(a),r=new Date(t);return Math.ceil((r.getTime()-s.getTime())/(1e3*60*60*24))+1}function P(a,t){const s=F(a,t),r=new Date(a),d=[],l=[];for(let h=0;h<s;h++){const o=new Date(r);o.setDate(o.getDate()+h),d.push(R(o,"yyyy-MM-dd")),l.push(R(o,"d MMM",{locale:_e}))}return{dates:d,labels:l}}function ye(a,t){let s,r,d;if(a==="custom"&&t){s=F(t.startDate,t.endDate);const n=P(t.startDate,t.endDate);r=n.labels,d=n.dates}else s=W[a]||7,r=z(s),d=B(s);const l=r.map((n,x)=>{const u=118+Math.floor(Math.random()*25),m=73+Math.floor(Math.random()*15),v=68+Math.floor(Math.random()*18),D=122+Math.floor(Math.random()*25),g=76+Math.floor(Math.random()*15),k=72+Math.floor(Math.random()*20),N=D,A=g,Z=k,O=N>=140||A>=90;return{day:n,date:d[x],systolic:N,diastolic:A,pulse:Z,sys_am:u,dia_am:m,pulse_am:v,sys_pm:D,dia_pm:g,pulse_pm:k,event:O?"สูง":void 0,note:O&&Math.random()>.5?"ความดันสูงกว่าปกติ":void 0}}),h=Math.round(l.reduce((n,x)=>n+(x.systolic||0),0)/l.length),o=Math.round(l.reduce((n,x)=>n+(x.diastolic||0),0)/l.length),c=l.filter(n=>n.systolic!==null).length;return{data:l,summary:{avg:`${h}/${o}`,label1:"ค่าเฉลี่ย",count:`วัดแล้ว ${c}/${s} วัน`,label2:"วันที่มีการวัด"},insight:tt(h,o,a)}}function be(a,t){let s,r,d;if(a==="custom"&&t){s=F(t.startDate,t.endDate);const c=P(t.startDate,t.endDate);r=c.labels,d=c.dates}else s=W[a]||7,r=z(s),d=B(s);const l=r.map((c,n)=>{const u=Math.random()>.2?2:Math.random()>.5?1:0,m=Math.round(u/2*100);return{day:c,date:d[n],target:2,done:u,percent:m,event:u===0?"ลืม":u<2?"พลาด":void 0,note:u<2?u===0?"ลืมทั้งวัน":"พลาดบางมื้อ":void 0}}),h=Math.round(l.reduce((c,n)=>c+(n.percent||0),0)/l.length),o=l.filter(c=>c.percent===100).length;return{data:l,summary:{avg:`${h}%`,label1:"% กินยาครบ",count:`กินครบ ${o}/${s} วัน`,label2:"วันกินครบ"},insight:st(h)}}function je(a,t){let s,r,d;if(a==="custom"&&t){s=F(t.startDate,t.endDate);const c=P(t.startDate,t.endDate);r=c.labels,d=c.dates}else s=W[a]||7,r=z(s),d=B(s);const l=r.map((c,n)=>{const x=parseFloat((5+Math.random()*3.5).toFixed(1)),u=x<6;return{day:c,date:d[n],hours:x,event:u?"น้อย":void 0,note:u?"นอนน้อยกว่าเกณฑ์":void 0}}),h=(l.reduce((c,n)=>c+(n.hours||0),0)/l.length).toFixed(1),o=l.filter(c=>c.hours!==null).length;return{data:l,summary:{avg:`${h} ชม.`,label1:"ชม.นอนเฉลี่ย",count:`บันทึก ${o}/${s} คืน`,label2:"คืนที่บันทึก"},insight:at(parseFloat(h))}}function tt(a,t,s){return a>=140||t>=90?"ความดันโดยเฉลี่ยสูงกว่าปกติ ควรปรึกษาแพทย์เพื่อปรับยา":a>=130||t>=80?"ความดันอยู่ในระดับสูงกว่าปกติเล็กน้อย ควรระวังเรื่องอาหารเค็มและพักผ่อนให้เพียงพอ":`ความดัน${s==="7d"?"สัปดาห์นี้":s==="15d"?"15 วันที่ผ่านมา":"เดือนนี้"}อยู่ในเกณฑ์ดี ควบคุมได้ต่อเนื่อง`}function st(a,t,s){return a>=95?"กินยาครบถ้วนมาก สุดยอดครับ!":a>=80?"กินยาได้ดี แต่ยังพลาดบ้าง ลองตั้งเตือนเพิ่มไหมครับ":a>=60?"ช่วงนี้พลาดกินยาบ่อย ลองหาวิธีจดจำที่เหมาะกับคุณนะครับ":"ต้องปรับปรุงการกินยา ลองตั้งนาฬิกาเตือนหรือบอกคนใกล้ชิดให้ช่วยเตือน"}function at(a,t){return a>=7?"พักผ่อนเพียงพอ สุขภาพโดยรวมจะดีครับ":a>=6?"นอนได้พอประมาณ ลองเข้านอนเร็วขึ้นอีกสัก 30 นาทีจะดีมากครับ":"นอนน้อยกว่าเกณฑ์ ลองพักงีบช่วงบ่าย และเข้านอนเร็วขึ้นนะครับ"}function rt(a,t,s){const r=a?t==="custom"&&s?[...y.exercise(a,t),s.startDate,s.endDate]:y.exercise(a,t):["trends","exercise","none"];return E({queryKey:r,queryFn:async()=>{if(!a)return ve(t,s);try{let d=`/trends/exercise/${a}?range=${t}`;return t==="custom"&&s&&(d+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await K.get(d)}catch{return console.warn("Exercise trend API not available, using mock data"),ve(t,s)}},enabled:!0,staleTime:60*1e3})}function lt(a,t,s){const r=a?t==="custom"&&s?[...y.mood(a,t),s.startDate,s.endDate]:y.mood(a,t):["trends","mood","none"];return E({queryKey:r,queryFn:async()=>{if(!a)return De(t,s);try{let d=`/trends/mood/${a}?range=${t}`;return t==="custom"&&s&&(d+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await K.get(d)}catch{return console.warn("Mood trend API not available, using mock data"),De(t,s)}},enabled:!0,staleTime:60*1e3})}function ot(a,t,s){const r=a?t==="custom"&&s?[...y.water(a,t),s.startDate,s.endDate]:y.water(a,t):["trends","water","none"];return E({queryKey:r,queryFn:async()=>{if(!a)return Ne(t,s);try{let d=`/trends/water/${a}?range=${t}`;return t==="custom"&&s&&(d+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await K.get(d)}catch{return console.warn("Water trend API not available, using mock data"),Ne(t,s)}},enabled:!0,staleTime:60*1e3})}function ve(a,t){let s,r,d;if(a==="custom"&&t){s=F(t.startDate,t.endDate);const n=P(t.startDate,t.endDate);r=n.labels,d=n.dates}else s=W[a]||7,r=z(s),d=B(s);const l=["เดิน","วิ่ง","ว่ายน้ำ","ปั่นจักรยาน","โยคะ"],h=r.map((n,x)=>{const u=Math.random()>.3,m=u?Math.floor(15+Math.random()*45):null,v=u?l[Math.floor(Math.random()*l.length)]:void 0;return{day:n,date:d[x],duration:m,exerciseType:v,event:m&&m>=30?"ดี":void 0,note:v}}),o=h.filter(n=>n.duration!==null).length,c=o>0?Math.round(h.reduce((n,x)=>n+(x.duration||0),0)/o):0;return{data:h,summary:{avg:o>0?`${c} นาที`:"-",label1:"เวลาเฉลี่ย",count:`ออกกำลังกาย ${o}/${s} วัน`,label2:"วันที่ออกกำลังกาย"},insight:nt(o,s,c)}}function nt(a,t,s){const r=a/t;return r>=.7&&s>=30?"ออกกำลังกายสม่ำเสมอมาก สุขภาพแข็งแรงแน่นอนครับ!":r>=.5?"ออกกำลังกายได้ดี ลองเพิ่มเวลาออกกำลังกายอีกนิดจะยิ่งดีครับ":r>=.3?"ออกกำลังกายบ้าง ลองตั้งเป้าอย่างน้อยวันละ 30 นาที 5 วัน/สัปดาห์นะครับ":"ช่วงนี้ออกกำลังกายน้อย ลองเริ่มจากเดินวันละ 15-20 นาทีก่อนนะครับ"}function De(a,t){let s,r,d;if(a==="custom"&&t){s=F(t.startDate,t.endDate);const u=P(t.startDate,t.endDate);r=u.labels,d=u.dates}else s=W[a]||7,r=z(s),d=B(s);const l=["happy","calm","neutral","sad","anxious"],h={happy:"มีความสุข",calm:"สงบ",neutral:"เฉยๆ",sad:"เศร้า",anxious:"กังวล"},o={happy:5,calm:4,neutral:3,sad:2,anxious:1},c=r.map((u,m)=>{const v=Math.random()>.2,D=v?l[Math.floor(Math.random()*l.length)]:null,g=D?o[D]:null,k=v?Math.floor(1+Math.random()*5):null;return{day:u,date:d[m],mood:D,moodScore:g,stressLevel:k,event:g&&g<=2?"ต่ำ":void 0,note:D?h[D]:void 0}}),n=c.filter(u=>u.moodScore!==null).length,x=n>0?(c.reduce((u,m)=>u+(m.moodScore||0),0)/n).toFixed(1):"0";return{data:c,summary:{avg:n>0?`${x}/5`:"-",label1:"คะแนนอารมณ์เฉลี่ย",count:`บันทึก ${n}/${s} วัน`,label2:"วันที่บันทึก"},insight:dt(parseFloat(x),n)}}function dt(a,t,s){return t===0?"ยังไม่มีการบันทึกอารมณ์ ลองบันทึกทุกวันเพื่อติดตามสุขภาพจิตนะครับ":a>=4?"อารมณ์ดีสม่ำเสมอ ยอดเยี่ยมครับ! รักษาความสุขนี้ไว้นะครับ":a>=3?"อารมณ์โดยรวมปกติดี ลองหากิจกรรมที่ชอบทำเพื่อเพิ่มความสุขนะครับ":a>=2?"ช่วงนี้อารมณ์อาจไม่ค่อยดี ลองพูดคุยกับคนใกล้ชิดหรือทำกิจกรรมผ่อนคลายนะครับ":"ดูเหมือนช่วงนี้อารมณ์ไม่ค่อยดี หากรู้สึกหนักใจ ลองปรึกษาผู้เชี่ยวชาญนะครับ"}function Ne(a,t){let s,r,d;if(a==="custom"&&t){s=F(t.startDate,t.endDate);const c=P(t.startDate,t.endDate);r=c.labels,d=c.dates}else s=W[a]||7,r=z(s),d=B(s);const l=r.map((c,n)=>{const x=Math.floor(4+Math.random()*6),u=x*250,m=x<6;return{day:c,date:d[n],glasses:x,ml:u,event:m?"น้อย":x>=8?"ดี":void 0,note:m?"ดื่มน้ำน้อย":x>=8?"ดื่มน้ำได้ดี":void 0}}),h=Math.round(l.reduce((c,n)=>c+(n.glasses||0),0)/l.length),o=l.filter(c=>(c.glasses||0)>=8).length;return{data:l,summary:{avg:`${h} แก้ว`,label1:"เฉลี่ย/วัน",count:`ดื่มครบ ${o}/${s} วัน`,label2:"วันดื่มครบ 8 แก้ว"},insight:it(h)}}function it(a,t,s){return a>=8?"ดื่มน้ำได้ตามเป้าหมาย สุขภาพดีแน่นอนครับ!":a>=6?"ดื่มน้ำได้ดี ลองเพิ่มอีก 2-3 แก้วต่อวันจะยิ่งดีครับ":a>=4?"ดื่มน้ำน้อยไป ลองพกขวดน้ำติดตัวเพื่อเตือนให้ดื่มบ่อยขึ้นนะครับ":"ดื่มน้ำน้อยมาก ร่างกายต้องการน้ำอย่างน้อย 8 แก้ว/วันนะครับ"}function ct(a,t,s){const r=a?t==="custom"&&s?[...y.glucose(a,t),s.startDate,s.endDate]:y.glucose(a,t):["trends","glucose","none"];return E({queryKey:r,queryFn:async()=>{if(!a)return ke(t,s);try{let d=`/trends/glucose/${a}?range=${t}`;return t==="custom"&&s&&(d+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await K.get(d)}catch{return console.warn("Glucose trend API not available, using mock data"),ke(t,s)}},enabled:!0,staleTime:60*1e3})}function ke(a,t){let s,r,d;if(a==="custom"&&t){s=F(t.startDate,t.endDate);const m=P(t.startDate,t.endDate);r=m.labels,d=m.dates}else s=W[a]||7,r=z(s),d=B(s);const l=["fasting","post_meal_1h","post_meal_2h","before_bed"],h=["06:30","08:00","12:30","13:30","18:30","21:00"];let o=0;const c=r.map((m,v)=>{const D=Math.random()>.2?1+Math.floor(Math.random()*3):0,g=[];for(let N=0;N<D;N++)g.push({glucose:85+Math.floor(Math.random()*55),mealContext:l[N%l.length],time:h[N*2]||"12:00"});o+=g.length;const k=g.length>0?Math.round(g.reduce((N,A)=>N+A.glucose,0)/g.length):null;return{day:m,date:d[v],glucose:k,mealContext:g.length>0?g[g.length-1].mealContext:null,glucoseReadings:g.length>0?g:void 0}}),n=c.flatMap(m=>m.glucoseReadings||[]),x=n.length>0?Math.round(n.reduce((m,v)=>m+v.glucose,0)/n.length):0,u=c.filter(m=>m.glucoseReadings&&m.glucoseReadings.length>0).length;return{data:c,summary:{avg:n.length>0?`${x} mg/dL`:"-",label1:"ค่าเฉลี่ย",count:`วัดแล้ว ${u}/${s} วัน (${n.length} ครั้ง)`,label2:"จำนวนการวัด"},insight:mt(x,u)}}function mt(a,t){return t===0?"ยังไม่มีข้อมูลน้ำตาลในช่วงนี้ ลองวัดระดับน้ำตาลเพื่อติดตามสุขภาพนะครับ":a>=126?"ระดับน้ำตาลเฉลี่ยสูงกว่าปกติ ควรปรึกษาแพทย์เพื่อปรับยาหรือพฤติกรรม":a>=100?"ระดับน้ำตาลอยู่ในช่วงเสี่ยง ควรลดอาหารหวานและออกกำลังกายสม่ำเสมอ":"ระดับน้ำตาลอยู่ในเกณฑ์ปกติ ดีมากครับ รักษาพฤติกรรมนี้ต่อไป"}const we={data:[{day:"จ",date:"2026-01-06",systolic:122,diastolic:80,pulse:72,sys_am:118,dia_am:76,pulse_am:68,sys_pm:122,dia_pm:80,pulse_pm:72},{day:"อ",date:"2026-01-07",systolic:125,diastolic:82,pulse:75,sys_am:120,dia_am:78,pulse_am:70,sys_pm:125,dia_pm:82,pulse_pm:75,event:"สูงนิดหน่อย"},{day:"พ",date:"2026-01-08",systolic:118,diastolic:78,pulse:70,sys_am:115,dia_am:74,pulse_am:66,sys_pm:118,dia_pm:78,pulse_pm:70},{day:"พฤ",date:"2026-01-09",systolic:120,diastolic:79,pulse:73,sys_am:117,dia_am:75,pulse_am:69,sys_pm:120,dia_pm:79,pulse_pm:73},{day:"ศ",date:"2026-01-10",systolic:123,diastolic:81,pulse:74,sys_am:119,dia_am:77,pulse_am:70,sys_pm:123,dia_pm:81,pulse_pm:74,note:"ตื่นมาเหนื่อย"},{day:"ส",date:"2026-01-11",systolic:119,diastolic:77,pulse:71,sys_am:116,dia_am:73,pulse_am:67,sys_pm:119,dia_pm:77,pulse_pm:71},{day:"อา",date:"2026-01-12",systolic:121,diastolic:80,pulse:72,sys_am:118,dia_am:76,pulse_am:68,sys_pm:121,dia_pm:80,pulse_pm:72}],summary:{avg:"121/79",count:"7/7 วัน",label1:"ค่าเฉลี่ย",label2:"บันทึกครบ"},insight:"ความดันคุณอยู่ในเกณฑ์ปกติตลอดสัปดาห์ ยอดเยี่ยม!"},ut={data:[{day:"จ",date:"2026-01-06",percent:100,target:3,done:3},{day:"อ",date:"2026-01-07",percent:67,target:3,done:2,note:"ลืมมื้อเที่ยง"},{day:"พ",date:"2026-01-08",percent:100,target:3,done:3},{day:"พฤ",date:"2026-01-09",percent:100,target:3,done:3},{day:"ศ",date:"2026-01-10",percent:100,target:3,done:3},{day:"ส",date:"2026-01-11",percent:33,target:3,done:1,note:"ลืม 2 มื้อ"},{day:"อา",date:"2026-01-12",percent:100,target:3,done:3}],summary:{avg:"86%",count:"5/7 วัน",label1:"อัตราครบ",label2:"กินครบทั้งวัน"},insight:"สัปดาห์นี้คุณลืมยา 2 วัน ลองตั้งเตือนเพิ่มช่วงเที่ยงนะคะ"},xt={data:[{day:"จ",date:"2026-01-06",hours:7.5},{day:"อ",date:"2026-01-07",hours:6.2,note:"นอนดึก"},{day:"พ",date:"2026-01-08",hours:7},{day:"พฤ",date:"2026-01-09",hours:5.5,note:"ตื่นกลางดึก"},{day:"ศ",date:"2026-01-10",hours:8},{day:"ส",date:"2026-01-11",hours:7.2},{day:"อา",date:"2026-01-12",hours:6.8}],summary:{avg:"6.9 ชม.",count:"7/7 วัน",label1:"เฉลี่ย/คืน",label2:"บันทึกครบ"},insight:"สัปดาห์นี้คุณนอนเฉลี่ย 6.9 ชม. ลองนอนก่อน 22:00 จะดีขึ้นนะคะ"},X=(a=0)=>{const t=new Date;return t.setDate(t.getDate()-a),`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`};function vt(){const{context:a,user:t}=Ce(),s=a.patientId||(t.role==="patient"?t.profileId:null),[r,d]=w.useState("7d"),[l,h]=w.useState("heart"),[o,c]=w.useState(null),[n,x]=w.useState({startDate:X(30),endDate:X(0)}),[u,m]=w.useState(!1),[v,D]=w.useState(n.startDate),[g,k]=w.useState(n.endDate),{data:N,isLoading:A}=Ie(s,r,r==="custom"?n:void 0),{data:Z,isLoading:O}=Re(s,r,r==="custom"?n:void 0),{data:re,isLoading:le}=et(s,r,r==="custom"?n:void 0),{data:oe,isLoading:ne}=rt(s,r,r==="custom"?n:void 0),{data:de,isLoading:ie}=lt(s,r,r==="custom"?n:void 0),{data:ce,isLoading:me}=ot(s,r,r==="custom"?n:void 0),{data:ue,isLoading:xe}=ct(s,r,r==="custom"?n:void 0),f=w.useMemo(()=>{switch(l){case"heart":return N||we;case"meds":return Z||ut;case"sleep":return re||xt;case"exercise":return oe;case"mood":return de;case"water":return ce;case"glucose":return ue;default:return N||we}},[l,N,Z,re,oe,de,ce,ue]),he=w.useMemo(()=>{switch(l){case"heart":return A;case"meds":return O;case"sleep":return le;case"exercise":return ne;case"mood":return ie;case"water":return me;case"glucose":return xe;default:return!1}},[l,A,O,le,ne,ie,me,xe]);w.useEffect(()=>{c(null)},[r,l]);const Se=[{id:"heart",label:"ความดัน",icon:$e},{id:"meds",label:"ยา",icon:Fe},{id:"sleep",label:"นอน",icon:Ae},{id:"exercise",label:"ออกกำลัง",icon:Te},{id:"mood",label:"อารมณ์",icon:Ee},{id:"water",label:"น้ำ",icon:Ke},{id:"glucose",label:"ระดับน้ำตาล",icon:ze}],$=i=>{i&&i.activePayload&&i.activePayload[0]&&c(i.activePayload[0].payload)};return e.jsxs("div",{className:"min-h-screen pb-32 font-sans overflow-x-hidden relative z-10 bg-background",children:[e.jsx("header",{className:"bg-card pt-12 pb-4 px-6 sticky top-0 z-20 flex justify-between items-center border-b border-border",children:e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"แนวโน้ม"})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 space-y-6 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex bg-muted/50 p-1 rounded-xl gap-1",children:["7d","15d","30d","custom"].map((i,b)=>{const q=["7 วัน","15 วัน","30 วัน","กำหนดเอง"],_=r===i;return e.jsxs("button",{onClick:()=>{d(i),i==="custom"&&(D(n.startDate),k(n.endDate),m(!0))},className:fe("flex-1 py-2 text-xs font-semibold rounded-lg transition-all flex items-center justify-center gap-1",_?"bg-primary/10 text-primary shadow-sm border border-primary/30":"text-muted-foreground"),children:[i==="custom"&&e.jsx(pe,{className:"w-3 h-3"}),q[b]]},i)})}),r==="custom"&&e.jsxs("button",{onClick:()=>{D(n.startDate),k(n.endDate),m(!0)},className:"flex items-center justify-center gap-2 text-xs text-primary bg-primary/5 px-3 py-2 rounded-lg border border-primary/20",children:[e.jsx(pe,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[new Date(n.startDate).toLocaleDateString("th-TH",{day:"numeric",month:"short"})," - ",new Date(n.endDate).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"2-digit"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:Se.map(i=>{const b=l===i.id;return e.jsxs("button",{onClick:()=>h(i.id),className:fe("flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all border",b?"bg-primary text-primary-foreground border-primary shadow-md shadow-primary/20":"bg-card text-muted-foreground border-border"),children:[e.jsx(i.icon,{className:"w-3.5 h-3.5"}),i.label]},i.id)})}),he&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Be,{className:"w-8 h-8 animate-spin text-primary"})}),!he&&f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 transition-all",children:[e.jsx(J,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(te,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:f.summary.label1}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:f.summary.avg})]})}),e.jsx(J,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(te,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:f.summary.label2}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:f.summary.count})]})})]}),e.jsxs(J,{className:"border-none shadow-sm bg-card p-6 relative",children:[l==="heart"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#EF4444]"}),"ความดันช่วงเช้า (AM)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#EF4444] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"SYS"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#3B82F6] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"DIA"})]})]}),e.jsx("div",{className:"h-[180px] w-full",children:e.jsx(U,{width:"100%",height:"100%",children:e.jsxs(ae,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,180]}),e.jsx(C,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(I,{y:135,stroke:"#EF4444",strokeDasharray:"6 4",strokeOpacity:.4}),e.jsx(H,{type:"monotone",dataKey:"sys_am",name:"SYS เช้า",stroke:"#EF4444",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#EF4444"},activeDot:{r:5,strokeWidth:0,fill:"#EF4444"},connectNulls:!0}),e.jsx(H,{type:"monotone",dataKey:"dia_am",name:"DIA เช้า",stroke:"#3B82F6",strokeWidth:2,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#3B82F6"},activeDot:{r:5,strokeWidth:0,fill:"#3B82F6"},connectNulls:!0})]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#991B1B]"}),"ความดันช่วงเย็น (PM)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#991B1B] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"SYS"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#1E3A8A] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"DIA"})]})]}),e.jsx("div",{className:"h-[180px] w-full",children:e.jsx(U,{width:"100%",height:"100%",children:e.jsxs(ae,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,180]}),e.jsx(C,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(I,{y:135,stroke:"#991B1B",strokeDasharray:"6 4",strokeOpacity:.4}),e.jsx(H,{type:"monotone",dataKey:"sys_pm",name:"SYS เย็น",stroke:"#991B1B",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#991B1B"},activeDot:{r:5,strokeWidth:0,fill:"#991B1B"},connectNulls:!0}),e.jsx(H,{type:"monotone",dataKey:"dia_pm",name:"DIA เย็น",stroke:"#1E3A8A",strokeWidth:2,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#1E3A8A"},activeDot:{r:5,strokeWidth:0,fill:"#1E3A8A"},connectNulls:!0})]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#F59E0B]"}),"ชีพจร (Heart Rate)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 border-t-2 border-dashed border-[#F59E0B]"}),e.jsx("span",{className:"text-muted-foreground",children:"เช้า"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#F97316] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"เย็น"})]})]}),e.jsx("div",{className:"h-[150px] w-full",children:e.jsx(U,{width:"100%",height:"100%",children:e.jsxs(ae,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[40,120]}),e.jsx(C,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(H,{type:"monotone",dataKey:"pulse_am",name:"HR เช้า",stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"5 5",dot:{r:3,fill:"white",strokeWidth:2,stroke:"#F59E0B"},activeDot:{r:5,strokeWidth:0,fill:"#F59E0B"},connectNulls:!0}),e.jsx(H,{type:"monotone",dataKey:"pulse_pm",name:"HR เย็น",stroke:"#F97316",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#F97316"},activeDot:{r:5,strokeWidth:0,fill:"#F97316"},connectNulls:!0})]})})})]})]}),l==="glucose"&&e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#6366f1]"}),e.jsx("span",{className:"text-muted-foreground",children:"ตื่นนอน"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#f97316]"}),e.jsx("span",{className:"text-muted-foreground",children:"หลังอาหาร 1 ชม."})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#f59e0b]"}),e.jsx("span",{className:"text-muted-foreground",children:"หลังอาหาร 2 ชม."})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#8b5cf6]"}),e.jsx("span",{className:"text-muted-foreground",children:"ก่อนนอน"})]})]}),l!=="heart"&&e.jsx("div",{className:"h-[240px] w-full",children:e.jsx(U,{width:"100%",height:"100%",children:l==="meds"?e.jsxs(Y,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,100]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(V,{dataKey:"percent",radius:[6,6,0,0],children:f.data.map((i,b)=>e.jsx(G,{fill:i.percent===100?"#10b981":i.percent===0?"#ef4444":"#f97316"},`cell-${b}`))})]}):l==="sleep"?e.jsxs(Y,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,10]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(V,{dataKey:"hours",radius:[6,6,0,0],children:f.data.map((i,b)=>e.jsx(G,{fill:i.hours&&i.hours<6?"#f97316":"#8b5cf6"},`cell-${b}`))})]}):l==="exercise"?e.jsxs(Y,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,60]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(V,{dataKey:"duration",radius:[6,6,0,0],children:f.data.map((i,b)=>e.jsx(G,{fill:i.duration==null?"#e5e7eb":(i.duration??0)>=30?"#10b981":"#f97316"},`cell-${b}`))})]}):l==="mood"?e.jsxs(Y,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,5]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(V,{dataKey:"moodScore",radius:[6,6,0,0],children:f.data.map((i,b)=>e.jsx(G,{fill:i.moodScore==null?"#e5e7eb":(i.moodScore??0)>=4?"#10b981":(i.moodScore??0)>=3?"#f59e0b":"#ef4444"},`cell-${b}`))})]}):l==="glucose"?(()=>{const i={fasting:"#6366f1",post_meal_1h:"#f97316",post_meal_2h:"#f59e0b",before_bed:"#8b5cf6"},b={fasting:"ตื่นนอน",post_meal_1h:"หลังอาหาร 1 ชม.",post_meal_2h:"หลังอาหาร 2 ชม.",before_bed:"ก่อนนอน"},q=[];f.data.forEach((p,j)=>{p.glucoseReadings&&p.glucoseReadings.forEach((T,Q)=>{const ee=p.glucoseReadings.length>1?(Q-(p.glucoseReadings.length-1)/2)*.15:0;q.push({dayIndex:j+ee,glucose:T.glucose,mealContext:T.mealContext||"fasting",time:T.time,day:p.day,date:p.date})})});const _={};q.forEach(p=>{const j=p.mealContext;_[j]||(_[j]=[]),_[j].push(p)});const Le=f.data.map(p=>p.day);return e.jsxs(Xe,{margin:{top:10,right:10,left:-25,bottom:0},children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{type:"number",dataKey:"dayIndex",domain:[-.5,f.data.length-.5],ticks:f.data.map((p,j)=>j),tickFormatter:p=>Le[Math.round(p)]||"",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{type:"number",dataKey:"glucose",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,250]}),e.jsx(Ze,{range:[80,80]}),e.jsx(I,{y:100,stroke:"#f59e0b",strokeDasharray:"6 4",strokeOpacity:.5,label:{value:"เสี่ยง 100",position:"insideTopLeft",fontSize:9,fill:"#f59e0b"}}),e.jsx(I,{y:126,stroke:"#ef4444",strokeDasharray:"6 4",strokeOpacity:.5,label:{value:"สูง 126",position:"insideTopLeft",fontSize:9,fill:"#ef4444"}}),e.jsx(C,{content:({payload:p})=>{if(!p||!p[0])return null;const j=p[0].payload;return e.jsxs("div",{className:"bg-card border border-border rounded-xl px-3 py-2 shadow-md text-xs space-y-0.5",children:[e.jsxs("p",{className:"font-bold",children:[j.day," (",j.date,")"]}),e.jsxs("p",{className:"font-bold text-base",style:{color:i[j.mealContext]||"#ec4899"},children:[j.glucose," mg/dL"]}),e.jsxs("p",{className:"text-muted-foreground",children:[b[j.mealContext]||j.mealContext," · ",j.time]})]})}}),Object.entries(_).map(([p,j])=>e.jsx(Qe,{name:b[p]||p,data:j,fill:i[p]||"#ec4899",stroke:"white",strokeWidth:2,onClick:T=>{if(T&&T.date){const Q=f.data.find(ee=>ee.date===T.date);Q&&c(Q)}},cursor:"pointer"},p))]})})():e.jsxs(Y,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:$,children:[e.jsx(M,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(S,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,12]}),e.jsx(C,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(V,{dataKey:"glasses",radius:[6,6,0,0],children:f.data.map((i,b)=>e.jsx(G,{fill:(i.glasses||0)>=8?"#3b82f6":(i.glasses||0)>=6?"#60a5fa":"#93c5fd"},`cell-${b}`))})]})})}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium bg-muted/30 px-3 py-1 rounded-full flex items-center gap-1.5",children:[e.jsx(Je,{className:"w-3 h-3"})," แตะจุดบนกราฟเพื่อดูรายละเอียด"]})}),o&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-muted/50 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:o.day}),l==="heart"&&e.jsxs("div",{className:"space-y-2 mt-1",children:[(o.sys_am||o.pulse_am)&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground w-8",children:"เช้า"}),e.jsxs("p",{className:"text-base font-bold text-[#EF4444]",children:[o.sys_am,"/",o.dia_am," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"mmHg"})]}),e.jsxs("p",{className:"text-sm font-bold text-[#F59E0B]",children:[o.pulse_am," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"bpm"})]})]}),(o.sys_pm||o.pulse_pm)&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground w-8",children:"เย็น"}),e.jsxs("p",{className:"text-base font-bold text-[#991B1B]",children:[o.sys_pm,"/",o.dia_pm," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"mmHg"})]}),e.jsxs("p",{className:"text-sm font-bold text-[#F97316]",children:[o.pulse_pm," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"bpm"})]})]})]}),l==="meds"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-sm font-bold text-foreground",children:["ตั้งไว้ ",o.target," ช่วง | ทำได้ ",o.done," ช่วง |"," ","= ",o.percent,"%"]})}),l==="sleep"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[o.hours," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"ชม."})]})}),l==="exercise"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:o.duration!==null?e.jsxs(e.Fragment,{children:[o.duration," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"นาที"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้ออกกำลังกาย"})}),o.exerciseType&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:o.exerciseType})]}),l==="mood"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-amber-600",children:o.moodScore!==null?e.jsxs(e.Fragment,{children:[o.moodScore,"/5"," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"คะแนน"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้บันทึก"})}),o.note&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:o.note})]}),l==="water"&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[o.glasses," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"แก้ว"})]}),o.ml&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["≈ ",o.ml," ml"]})]}),l==="glucose"&&e.jsx("div",{className:"mt-1 space-y-2",children:o.glucoseReadings&&o.glucoseReadings.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider",children:["วัด ",o.glucoseReadings.length," ครั้ง · เฉลี่ย ",o.glucose," mg/dL"]}),o.glucoseReadings.map((i,b)=>{const q={fasting:"ตื่นนอน",post_meal_1h:"หลังอาหาร 1 ชม.",post_meal_2h:"หลังอาหาร 2 ชม.",before_bed:"ก่อนนอน"},_={fasting:"#6366f1",post_meal_1h:"#f97316",post_meal_2h:"#f59e0b",before_bed:"#8b5cf6"};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:_[i.mealContext||""]||"#ec4899"}}),e.jsx("span",{className:"text-base font-bold",style:{color:_[i.mealContext||""]||"#ec4899"},children:i.glucose}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"mg/dL"}),e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[q[i.mealContext||""]||i.mealContext," · ",i.time]})]},b)})]}):e.jsx("p",{className:"text-muted-foreground text-base",children:"ไม่ได้วัด"})})]}),o.note&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/30 px-3 py-2 rounded-xl text-xs font-medium text-yellow-700 dark:text-yellow-400 max-w-[150px]",children:['"',o.note,'"']})]}),o.event&&!o.note&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 bg-red-50 dark:bg-red-950/30 text-red-600 dark:text-red-400 px-2.5 py-1 rounded-full",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px] font-bold",children:o.event})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-sm font-bold text-foreground flex items-center gap-2 pl-1",children:[e.jsx("div",{className:"w-1 h-4 bg-accent rounded-full"}),"อุ่นใจสังเกตให้"]}),e.jsx(J,{className:"border-none shadow-sm bg-accent/5 overflow-hidden group hover:bg-accent/10 transition-colors",children:e.jsxs(te,{className:"p-5 flex gap-4 items-start",children:[e.jsx("div",{className:"bg-accent/10 p-3 rounded-2xl text-accent group-hover:scale-110 transition-transform",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 space-y-2",children:e.jsxs("p",{className:"text-sm leading-relaxed font-semibold text-foreground",children:['"',f.insight,'"']})})]})})]})]})]}),e.jsx(Pe,{open:u,onOpenChange:m,children:e.jsxs(qe,{className:"max-h-[85vh]",children:[e.jsxs(He,{className:"flex items-center justify-between px-6",children:[e.jsx(Oe,{className:"text-xl font-bold",children:"เลือกช่วงวันที่"}),e.jsx(Ye,{asChild:!0,children:e.jsx(se,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10",children:e.jsx(Ve,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"px-6 pb-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันเริ่มต้น"}),e.jsx(ge,{value:v,onChange:D,maxDate:g})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันสิ้นสุด"}),e.jsx(ge,{value:g,onChange:k,minDate:v,maxDate:X(0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"เลือกด่วน"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"7 วันที่แล้ว",days:7},{label:"14 วันที่แล้ว",days:14},{label:"30 วันที่แล้ว",days:30},{label:"60 วันที่แล้ว",days:60},{label:"90 วันที่แล้ว",days:90}].map(i=>e.jsx("button",{onClick:()=>{D(X(i.days-1)),k(X(0))},className:"px-3 py-1.5 text-xs font-medium rounded-full bg-muted hover:bg-muted/80 text-muted-foreground transition-colors",children:i.label},i.days))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(se,{variant:"ghost",className:"flex-1 h-12 rounded-xl",onClick:()=>m(!1),children:"ยกเลิก"}),e.jsx(se,{className:"flex-1 h-12 rounded-xl bg-primary text-primary-foreground",onClick:()=>{x({startDate:v,endDate:g}),m(!1)},children:"ยืนยัน"})]})]})]})}),e.jsx(Ge,{})]})}export{vt as default};
