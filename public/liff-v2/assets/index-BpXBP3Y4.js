import{r as x,j as e}from"./vendor-query-CmnYLxAr.js";import{c as R,m as de,u as le,g,z as ne,a2 as oe,a as h,U as ie,l as Q,P as V,e as C,f as ce,H as W,a3 as Y,a4 as xe,Q as me,N as pe,a5 as K,R as he,V as ue,W as ge,Y as fe,a6 as be,$ as je}from"./index-BrRdf3uS.js";import{u as ye}from"./use-profile-LVwbSIOg.js";import{E as Ne,a as F}from"./vendor-pdf-IriBjpIe.js";import{f as m,s as N,t as f}from"./th-WB27h3IP.js";import{C as ve}from"./calendar-Bwk-1fjo.js";import{b as $,L as we,d as E,C as z,T as ke,B as U,f as G,g as Me}from"./vendor-charts-CeI395eV.js";import{C as Se}from"./circle-check-B-WQ7EE0.js";import{C as De}from"./chevron-up-DcEToq_C.js";import{C as Ce}from"./chevron-down-gC4Cgr-u.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-ui-BZ8NMy8G.js";const Ae=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Pe=R("clipboard-list",Ae);const Te=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fe=R("eye",Te);const $e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ee=R("message-square",$e);function ze(s){return{normal:"ปกติ",elevated:"สูงเล็กน้อย",high:"สูง",crisis:"สูงมาก"}[s]||s}function Re(s){return{good:"ดีมาก",fair:"พอใช้",poor:"ต้องปรับปรุง"}[s]||s}function He(s){return{good:"เพียงพอ",fair:"พอใช้",poor:"น้อยเกินไป"}[s]||s}function X(s){return{medication:"กินยา",vitals:"วัดความดัน",water:"ดื่มน้ำ",symptom:"อาการ",sleep:"การนอน",exercise:"ออกกำลังกาย"}[s]||s}function _e(s,d,i){const t=[];t.push(["รายงานสุขภาพ - "+d]),t.push(["ช่วงเวลา: "+i]),t.push([]),t.push(["สรุปภาพรวม"]),t.push(["ความดันเฉลี่ย",`${s.summary.bp.avgSystolic}/${s.summary.bp.avgDiastolic} mmHg`]),t.push(["การกินยา",`${s.summary.meds.adherencePercent}%`]),t.push(["น้ำดื่มเฉลี่ย",`${s.summary.water.avgMl} มล./วัน`]),t.push(["กิจกรรมทั้งหมด",`${s.summary.activities.total} รายการ`]),t.push([]),t.push(["ข้อมูลรายวัน"]),t.push(["วันที่","Systolic","Diastolic","ยา (%)","น้ำ (มล.)"]),s.chartData.forEach(o=>{t.push([o.date,o.systolic?.toString()||"-",o.diastolic?.toString()||"-",o.medsPercent?.toString()||"-",o.waterMl?.toString()||"-"])}),t.push([]),t.push(["รายละเอียดกิจกรรม"]),t.push(["วันที่","เวลา","ประเภท","รายละเอียด"]),s.activities.forEach(o=>{t.push([o.date,o.time,X(o.type),o.value])});const c=t.map(o=>o.join(",")).join(`
`),r="\uFEFF",j=new Blob([r+c],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(j),p.download=`health-report-${m(new Date,"yyyy-MM-dd")}.csv`,p.click()}function Le(s,d,i){const t=new Ne,c=t.internal.pageSize.getWidth();let r=20;t.setFontSize(18),t.setFont("helvetica","bold"),t.text("Health Report - OONJAI",c/2,r,{align:"center"}),r+=10,t.setFontSize(12),t.setFont("helvetica","normal"),t.text(`Patient: ${d}`,c/2,r,{align:"center"}),r+=7,t.text(`Period: ${i}`,c/2,r,{align:"center"}),r+=15,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Summary",14,r),r+=10,t.setFontSize(11),t.setFont("helvetica","normal");const j=[["Blood Pressure (Average)",`${s.summary.bp.avgSystolic}/${s.summary.bp.avgDiastolic} mmHg`,ze(s.summary.bp.status)],["Medication Adherence",`${s.summary.meds.adherencePercent}%`,Re(s.summary.meds.status)],["Water Intake (Average)",`${s.summary.water.avgMl} ml/day`,He(s.summary.water.status)],["Total Activities",`${s.summary.activities.total}`,""]];F(t,{startY:r,head:[["Metric","Value","Status"]],body:j,theme:"striped",headStyles:{fillColor:[30,123,156]},margin:{left:14,right:14}}),r=t.lastAutoTable.finalY+15,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Daily Records",14,r),r+=10;const p=s.chartData.map(l=>[l.date,l.systolic?.toString()||"-",l.diastolic?.toString()||"-",l.medsPercent!==void 0?`${l.medsPercent}%`:"-",l.waterMl?.toString()||"-"]);F(t,{startY:r,head:[["Date","Systolic","Diastolic","Meds (%)","Water (ml)"]],body:p,theme:"striped",headStyles:{fillColor:[30,123,156]},margin:{left:14,right:14},styles:{fontSize:9}}),r=t.lastAutoTable.finalY+15,r>230&&(t.addPage(),r=20),t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Activity Log",14,r),r+=10;const o=s.activities.slice(0,20).map(l=>[l.date,l.time,X(l.type),l.value]);F(t,{startY:r,head:[["Date","Time","Type","Detail"]],body:o,theme:"striped",headStyles:{fillColor:[30,123,156]},margin:{left:14,right:14},styles:{fontSize:9}});const y=t.getNumberOfPages();for(let l=1;l<=y;l++)t.setPage(l),t.setFontSize(8),t.setFont("helvetica","italic"),t.text(`Generated by OONJAI - ${m(new Date,"yyyy-MM-dd HH:mm")} - Page ${l} of ${y}`,c/2,t.internal.pageSize.getHeight()-10,{align:"center"});t.save(`health-report-${m(new Date,"yyyy-MM-dd")}.pdf`)}const Ie=s=>{const d=new Date;return Array.from({length:s},(i,t)=>{const c=N(d,s-1-t);return m(c,"d",{locale:f})})},H=Ie(180),Be=H.map((s,d)=>{const i=125+Math.sin(d/10)*10+(Math.random()*10-5),t=80+Math.sin(d/10)*5+(Math.random()*8-4),c=75+Math.random()*10,r=Math.random()>.95;return{day:s,val:Math.round(r?i+20:i),dia:Math.round(r?t+10:t),pulse:Math.round(r?c+15:c),event:r?"สูง":void 0}}),q=H.map(s=>{const d=Math.random();let i=100;return d>.9?i=50:d>.98&&(i=0),{day:s,percent:i}}),Oe=H.map((s,d)=>{const i=6.5+Math.sin(d/5)*1+(Math.random()*1-.5);return{day:s,hours:parseFloat(i.toFixed(1))}}),v=new Date,u=s=>{const d=N(v,s);return m(d,"d MMM",{locale:f})},J={"30d":[{date:u(2),title:"ความดันสูงผิดปกติ (142/92)",tag:"BP/HR",type:"health"},{date:u(10),title:"เวียนหัวระดับ 3 ร่วมกับความดันสูง",tag:"อาการ",type:"symptom"},{date:u(14),title:"ลืมกินยาติดต่อกัน 2 มื้อ",tag:"ยา",type:"meds"},{date:u(20),title:"แน่นหน้าอกหลังออกกำลังกาย",tag:"อาการ",type:"symptom"},{date:u(25),title:"นอนน้อย < 5 ชม. 3 วันติด",tag:"นอน",type:"sleep"}],"60d":[{date:u(45),title:"Crisis: ความดันสูง 150+",tag:"BP/HR",type:"health"},{date:u(50),title:"ปรับยาใหม่ เริ่มกินยาเพิ่ม",tag:"ยา",type:"meds"},{date:u(58),title:"อาการเวียนหัวลดลงชัดเจน",tag:"อาการ",type:"symptom"}],"90d":[{date:m(N(v,30),"MMM",{locale:f}),title:"เดือนที่มีอาการเวียนหัวบ่อยสุด",tag:"ภาพรวม",type:"symptom"},{date:m(N(v,60),"MMM",{locale:f}),title:"เริ่มคุมความดันได้ดีขึ้น",tag:"BP/HR",type:"health"}],"180d":[{date:"Q1",title:"ช่วงปรับยา ความดันยังไม่นิ่ง",tag:"ภาพรวม",type:"health"},{date:"Q2",title:"ความดันเข้าเกณฑ์ปกติ 90%",tag:"ภาพรวม",type:"health"}]},Qe=[{id:"RPT-001",title:"รายงานส่งหมอ (1 หน้า)",range:"1 - 31 ม.ค. 2026",createdAt:"1 ก.พ. 2026 • 09:12 น.",status:"พร้อมดาวน์โหลด",expiresIn:"เหลือ 12 วัน"},{id:"RPT-002",title:"รายงานละเอียด 90 วัน",range:"1 พ.ย. 2025 - 31 ม.ค. 2026",createdAt:"31 ม.ค. 2026 • 20:05 น.",status:"พร้อมดาวน์โหลด",expiresIn:"เหลือ 3 วัน"},{id:"RPT-000",title:"รายงานเก่า (เกินกำหนด)",range:"1 - 15 ต.ค. 2025",createdAt:"16 ต.ค. 2025 • 08:30 น.",status:"หมดอายุแล้ว",expiresIn:"เก็บไว้ครบ 15 วัน"}];function st(){const[,s]=de(),{user:d}=le(),i=d.role==="patient"?d.profileId:null,[t,c]=x.useState("30d"),[r,j]=x.useState("doctor"),[p,o]=x.useState(!1),[y,l]=x.useState(!1),[Z,_]=x.useState(!1),{data:b}=ye(i),w=b?`${b.first_name} ${b.last_name}`:"ผู้ใช้งาน",ee=b?.birth_date?Math.floor((Date.now()-new Date(b.birth_date).getTime())/(365.25*24*60*60*1e3)):35,te=b?.gender==="male"?"ชาย":"หญิง",k=x.useMemo(()=>{let a=30;t==="30d"?a=30:t==="60d"?a=60:t==="90d"?a=90:t==="180d"&&(a=180);const n=N(v,a);return`${m(n,"d MMM",{locale:f})} - ${m(v,"d MMM yyyy",{locale:f})}`},[t]),[M,L]=x.useState(["อาการเวียนหัวช่วงบ่ายเกี่ยวกับความดันไหม?","ควรปรับเวลายาหรือไม่?"]),[A,I]=x.useState(""),[B,P]=x.useState(!1),O=()=>{A.trim()&&(L([...M,A.trim()]),I(""),P(!1))},S=x.useMemo(()=>t==="30d"?30:t==="60d"?60:t==="90d"?90:t==="180d"?180:30,[t]),se=x.useMemo(()=>J[t]||J["30d"],[t]),ae=()=>{Le({summary:{bp:{avgSystolic:125,avgDiastolic:80,count:28,status:"normal"},meds:{adherencePercent:86,takenCount:24,totalCount:28,status:"good"},water:{avgMl:1800,daysRecorded:25,status:"fair"},activities:{total:28,byType:{medication:14,vitals:8,water:6}}},chartData:[],activities:[]},w,k)},re=()=>{_e({summary:{bp:{avgSystolic:125,avgDiastolic:80,count:28,status:"normal"},meds:{adherencePercent:86,takenCount:24,totalCount:28,status:"good"},water:{avgMl:1800,daysRecorded:25,status:"fair"},activities:{total:28,byType:{medication:14,vitals:8,water:6}}},chartData:[],activities:[]},w,k)};return e.jsxs("div",{className:"min-h-screen pb-8 font-sans relative z-10 bg-background",children:[e.jsxs("header",{className:"bg-card pt-12 pb-4 px-4 sticky top-0 z-20 flex justify-between items-center border-b border-border shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>s("/settings"),className:"shrink-0",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"รายงาน"})]}),e.jsx(g,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full bg-muted/30",onClick:()=>_(!0),children:e.jsx(oe,{className:"h-5 w-5 text-foreground"})})]}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar",children:e.jsx("div",{className:"flex bg-muted/50 p-1 rounded-xl w-max",children:["30 วัน","60 วัน","90 วัน","180 วัน","กำหนดเอง"].map((a,n)=>{const D=["30d","60d","90d","180d","custom"][n],T=t===D;return e.jsx("button",{onClick:()=>c(D),className:h("px-4 py-2 text-xs font-semibold rounded-lg transition-all whitespace-nowrap",T?"bg-card shadow-sm text-foreground":"text-muted-foreground"),children:a},D)})})}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground pl-1",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider",children:k})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest pl-1",children:"รูปแบบรายงาน"}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 no-scrollbar",children:[{id:"doctor",title:"ส่งหมอ (1 หน้า)",desc:"กระชับที่สุด"},{id:"detail",title:"ละเอียด (3-5 หน้า)",desc:"สำหรับเก็บเอง"},{id:"specific",title:"เฉพาะเรื่อง",desc:"ความดัน/ชีพจร"}].map(a=>e.jsxs("button",{onClick:()=>j(a.id),className:h("flex-none w-36 p-3 rounded-2xl border-2 transition-all text-left space-y-1",r===a.id?"bg-primary/5 border-primary shadow-sm":"bg-card border-border hover:border-primary/30"),children:[e.jsx("p",{className:h("text-xs font-bold",r===a.id?"text-primary":"text-foreground"),children:a.title}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:a.desc})]},a.id))})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 px-1",children:[e.jsxs("div",{className:"bg-card border border-border/50 px-3 py-1.5 rounded-full text-[10px] font-bold text-foreground flex items-center gap-1.5 shadow-sm",children:[e.jsx(ie,{className:"w-3 h-3 text-primary"})," ",w]}),e.jsxs("div",{className:"bg-card border border-border/50 px-3 py-1.5 rounded-full text-[10px] font-bold text-foreground shadow-sm",children:[ee," ปี / ",te]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-950/30 border border-red-100 dark:border-red-900/30 px-3 py-1.5 rounded-full text-[10px] font-bold text-red-600 dark:text-red-400 flex items-center gap-1.5 shadow-sm",children:[e.jsx(Q,{className:"w-3 h-3"})," แพ้: เพนิซิลลิน"]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/30 border border-orange-100 dark:border-orange-900/30 px-3 py-1.5 rounded-full text-[10px] font-bold text-orange-600 dark:text-orange-400 flex items-center gap-1.5 shadow-sm",children:[e.jsx(V,{className:"w-3 h-3"})," มียา 3 รายการ"]})]}),e.jsx(C,{className:"border-none shadow-md bg-card overflow-hidden ring-1 ring-primary/10",children:e.jsxs(ce,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-border",children:[e.jsx(Pe,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-base font-bold text-foreground",children:"สรุป 10 วินาที"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5 shrink-0"}),e.jsxs("p",{className:"text-sm leading-relaxed",children:[e.jsx("span",{className:"font-bold",children:"ประเด็นสำคัญ:"})," เวียนหัว 3 ครั้ง (ส่วนใหญ่ช่วงบ่าย)"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 mt-1.5 shrink-0"}),e.jsxs("p",{className:"text-sm leading-relaxed",children:[e.jsx("span",{className:"font-bold",children:"ค่าที่น่าจับตา:"})," ความดันสูงกว่าปกติ 2 วัน"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary mt-1.5 shrink-0"}),e.jsxs("p",{className:"text-sm leading-relaxed",children:[e.jsx("span",{className:"font-bold",children:"การกินยา:"})," ครบ 86% (ลืม 2 ครั้ง)"]})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest pl-1",children:"กราฟสรุป"}),e.jsxs(C,{className:"border-none shadow-sm bg-card p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs font-bold flex items-center gap-1.5",children:[e.jsx(W,{className:"w-3 h-3 text-primary"})," ความดัน & ชีพจร"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"เฉลี่ย 125/80 mmHg"})]}),e.jsx("div",{className:"h-[100px] w-full",children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(we,{data:Be.slice(0,S),children:[e.jsx(E,{type:"monotone",dataKey:"val",stroke:"#0E8A9A",strokeWidth:2,dot:{r:2}}),e.jsx(E,{type:"monotone",dataKey:"dia",stroke:"#0E8A9A",strokeOpacity:.5,strokeWidth:2,dot:{r:2}}),e.jsx(E,{type:"monotone",dataKey:"pulse",stroke:"#F2994A",strokeWidth:2,dot:!1}),e.jsx(z,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(ke,{contentStyle:{fontSize:"10px"}})]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs font-bold flex items-center gap-1.5",children:[e.jsx(V,{className:"w-3 h-3 text-orange-500"})," การกินยา"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"ครบ 92%"})]}),e.jsx("div",{className:"h-[60px] w-full",children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:q.slice(0,S),children:[e.jsx(G,{dataKey:"percent",radius:[4,4,0,0],children:q.slice(0,S).map((a,n)=>e.jsx(Me,{fill:a.percent===100?"#10b981":a.percent<50?"#ef4444":"#f97316"},`cell-${n}`))}),e.jsx(z,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"})]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs font-bold flex items-center gap-1.5",children:[e.jsx(Y,{className:"w-3 h-3 text-purple-500"})," การนอน"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"เฉลี่ย 6.4 ชม."})]}),e.jsx("div",{className:"h-[60px] w-full",children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(U,{data:Oe.slice(0,S),children:[e.jsx(G,{dataKey:"hours",radius:[4,4,0,0],fill:"#8b5cf6"}),e.jsx(z,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"})]})})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest pl-1",children:"ความสม่ำเสมอ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(C,{className:"border-none shadow-sm bg-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-2",children:[e.jsx(W,{className:"w-3 h-3 text-primary"})," ความดัน"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-lg font-bold",children:["125 / 80 ",e.jsx("span",{className:"text-[10px] text-muted-foreground font-normal ml-1",children:"เฉลี่ย"})]}),e.jsx("p",{className:"text-[10px] text-emerald-600 font-medium",children:"บันทึกครบ 28/30 วัน"})]})]}),e.jsxs(C,{className:"border-none shadow-sm bg-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-2",children:[e.jsx(Y,{className:"w-3 h-3 text-orange-500"})," ชีพจร"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-lg font-bold",children:["78 ",e.jsx("span",{className:"text-[10px] text-muted-foreground font-normal ml-1",children:"เฉลี่ย"})]}),e.jsx("p",{className:"text-[10px] text-emerald-600 font-medium",children:"บันทึกครบ 28/30 วัน"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest pl-1 flex items-center gap-1.5",children:[e.jsx(xe,{className:"w-3 h-3 text-orange-400 fill-orange-400"})," วันที่มีนัยยะ (หมอควรดู)"]}),e.jsxs("button",{onClick:()=>l(!y),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[y?e.jsx(Se,{className:"w-3 h-3"}):e.jsx("div",{className:"w-3 h-3 rounded-full border border-primary"}),"คัดมาให้แล้ว"]})]}),e.jsx("div",{className:"bg-card rounded-3xl shadow-sm divide-y divide-border/30 overflow-hidden ring-1 ring-orange-100 dark:ring-orange-900/30",children:se.map((a,n)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 hover:bg-orange-50/30 dark:hover:bg-orange-950/10 transition-colors cursor-pointer active:bg-orange-50 dark:active:bg-orange-950/20",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[40px]",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground whitespace-nowrap",children:a.date.split(" ")[0]}),a.date.split(" ")[1]&&e.jsx("span",{className:"text-[9px] text-muted-foreground/70",children:a.date.split(" ")[1]})]}),e.jsx("div",{className:"flex-1 space-y-1",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-xs font-bold text-foreground leading-tight",children:a.title}),e.jsx("span",{className:h("text-[9px] px-1.5 py-0.5 rounded-md font-bold uppercase tracking-wide",a.type==="health"?"bg-blue-100 dark:bg-blue-950/30 text-blue-700 dark:text-blue-400":a.type==="meds"?"bg-orange-100 dark:bg-orange-950/30 text-orange-700 dark:text-orange-400":a.type==="sleep"?"bg-purple-100 dark:bg-purple-950/30 text-purple-700 dark:text-purple-400":"bg-red-100 dark:bg-red-950/30 text-red-700 dark:text-red-400"),children:a.tag})]})})]},n))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest pl-1",children:"คำถามถึงหมอ"}),e.jsxs("div",{className:"bg-card rounded-2xl p-4 shadow-sm border-2 border-dashed border-border relative space-y-3",children:[e.jsx(Ee,{className:"absolute top-4 right-4 w-4 h-4 text-muted-foreground/30"}),M.length===0&&!B&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"ยังไม่มีคำถาม"}),e.jsx("ul",{className:"space-y-2",children:M.map((a,n)=>e.jsxs("li",{className:"flex items-start gap-2 group",children:[e.jsxs("span",{className:"text-xs font-bold text-muted-foreground min-w-[16px] mt-0.5",children:[n+1,")"]}),e.jsx("p",{className:"text-xs text-foreground flex-1 leading-relaxed",children:a}),e.jsx("button",{onClick:()=>L(M.filter((D,T)=>T!==n)),className:"text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(me,{className:"w-3.5 h-3.5"})})]},n))}),B?e.jsxs("div",{className:"flex gap-2 animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("input",{autoFocus:!0,type:"text",value:A,onChange:a=>I(a.target.value),placeholder:"พิมพ์คำถาม...",className:"flex-1 bg-muted/30 rounded-xl px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-primary/20",onKeyDown:a=>{a.key==="Enter"&&O(),a.key==="Escape"&&P(!1)}}),e.jsx(g,{size:"icon",className:"h-8 w-8 rounded-xl bg-primary text-primary-foreground",onClick:O,children:e.jsx(pe,{className:"w-4 h-4"})})]}):e.jsx(g,{variant:"ghost",onClick:()=>P(!0),className:"w-full h-8 text-xs font-bold text-accent border border-accent/20 rounded-xl mt-1 hover:bg-accent/5",children:"+ เพิ่มคำถาม"})]})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"border border-border rounded-2xl bg-muted/20 overflow-hidden",children:[e.jsxs("button",{onClick:()=>o(!p),className:"w-full flex items-center justify-between p-4 bg-card/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-foreground",children:[e.jsx(Fe,{className:"w-4 h-4 text-primary"})," พรีวิวเอกสาร A4"]}),p?e.jsx(De,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(Ce,{className:"w-4 h-4 text-muted-foreground"})]}),p&&e.jsx("div",{className:"p-4 flex justify-center bg-muted/50",children:e.jsxs("div",{className:"w-full max-w-[300px] bg-card shadow-2xl p-4 text-[8px] leading-relaxed flex flex-col gap-2 text-foreground rounded-lg",children:[e.jsx("div",{className:"flex justify-between border-b pb-2 border-border",children:e.jsxs("h1",{className:"text-sm font-bold",children:["รายงานสุขภาพ: ",w]})}),e.jsxs("div",{className:"text-[7px] text-muted-foreground",children:[e.jsxs("p",{children:["ช่วงเวลา: ",k]}),e.jsxs("p",{children:["สร้างเมื่อ: ",m(new Date,"d MMM yyyy",{locale:f})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{className:"border border-border p-2 rounded",children:[e.jsx("h2",{className:"font-bold mb-1",children:"สรุปสำคัญ"}),e.jsxs("ul",{className:"list-disc pl-2 space-y-0.5",children:[e.jsx("li",{children:"เวียนหัว 3 ครั้ง"}),e.jsx("li",{children:"ความดันสูง 2 วัน"}),e.jsx("li",{children:"กินยาครบ 86%"})]})]}),e.jsxs("div",{className:"border border-border p-2 rounded",children:[e.jsx("h2",{className:"font-bold mb-1",children:"สถิติรวม"}),e.jsx("p",{children:"ความดันเฉลี่ย: 125/80"}),e.jsx("p",{children:"ชีพจรเฉลี่ย: 78 bpm"}),e.jsx("p",{children:"นอนเฉลี่ย: 6.4 ชม."})]})]}),e.jsx("div",{className:"h-16 border border-border bg-muted/30 flex items-center justify-center text-muted-foreground rounded mt-2",children:"[กราฟสรุป]"}),e.jsx("div",{className:"mt-auto border-t border-border pt-1 text-center text-[6px] text-muted-foreground",children:"ข้อมูลนี้เป็นข้อมูลที่ผู้ใช้บันทึกเอง"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(g,{onClick:re,variant:"outline",className:"h-12 rounded-2xl font-bold",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(g,{onClick:ae,className:"h-12 rounded-2xl bg-primary text-primary-foreground font-bold shadow-xl shadow-primary/20",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"PDF (ส่งหมอ)"]})]})]})]}),e.jsx(he,{open:Z,onOpenChange:_,children:e.jsxs(ue,{className:"max-h-[80vh]",children:[e.jsxs(ge,{children:[e.jsx(fe,{className:"text-center text-lg font-bold",children:"ประวัติรายงานที่สร้างแล้ว"}),e.jsxs(be,{className:"text-center text-[11px] leading-snug",children:["รายงานที่สร้างจะถูกเก็บไว้ให้ดาวน์โหลดได้ภายใน"," ",e.jsx("span",{className:"font-semibold text-foreground",children:"15 วัน"})," นับจากวันที่สร้าง"]})]}),e.jsxs("div",{className:"px-4 pb-6 space-y-3 overflow-y-auto",children:[e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-900/30 rounded-2xl px-3 py-2 text-[11px] text-amber-800 dark:text-amber-400 flex items-start gap-2",children:[e.jsx(Q,{className:"w-3.5 h-3.5 mt-0.5"}),e.jsx("p",{children:"ตัวอย่างนี้เป็นข้อมูลเดโม่ เพื่อให้เห็นหน้าตารายการรายงานที่เคยสร้าง"})]}),e.jsx("div",{className:"bg-card rounded-2xl shadow-sm divide-y divide-border/30 overflow-hidden",children:Qe.map(a=>{const n=a.status==="หมดอายุแล้ว";return e.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/30 transition-colors",children:[e.jsx("div",{className:"mt-1",children:e.jsx(je,{className:h("w-5 h-5",n?"text-muted-foreground":"text-primary")})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:a.title}),e.jsx("span",{className:h("text-[10px] px-2 py-0.5 rounded-full font-semibold whitespace-nowrap",n?"bg-muted text-muted-foreground":"bg-emerald-50 dark:bg-emerald-950/30 text-emerald-700 dark:text-emerald-400"),children:a.status})]}),e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["ช่วงข้อมูล: ",a.range]}),e.jsxs("p",{className:"text-[11px] text-muted-foreground/80",children:["สร้างเมื่อ: ",a.createdAt]}),e.jsx("p",{className:h("text-[10px] font-medium",n?"text-muted-foreground":"text-orange-600 dark:text-orange-400"),children:a.expiresIn})]}),e.jsx("div",{className:"mt-1",children:e.jsx(g,{variant:"ghost",size:"sm",disabled:n,className:h("h-8 px-3 text-[11px] rounded-xl border",n?"border-muted text-muted-foreground cursor-not-allowed opacity-50":"border-primary/30 text-primary hover:bg-primary/5"),children:"ดาวน์โหลด"})})]},a.id)})})]})]})})]})}export{st as default};
