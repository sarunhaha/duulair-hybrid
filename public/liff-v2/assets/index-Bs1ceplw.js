import{b as C,r as v,j as e}from"./vendor-query-OvJu5Khy.js";import{k as F,u as ve,a as le,l as de,H as De,P as Ne,M as ke,m as we,n as Se,D as _e,L as Me,e as O,f as Q,o as Le,p as $e,q as Ce,r as Fe,s as Ae,t as Te,g as G,X as Be,v as oe,B as Ee}from"./index-CkSmyO3D.js";import{f as X,t as pe,s as ye,R as V,L as J,C as k,X as w,Y as S,T as _,a as ne,b as $,B as W,c as P,d as q}from"./th-CUaDCWeR.js";import{I as Ke}from"./info-Djl2Mt_g.js";import{M as ze}from"./message-circle-heart-BexBgE4R.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-ui-CYcp45lG.js";function A(a){const t=new Date;return Array.from({length:a},(s,r)=>{const n=ye(t,a-1-r);return X(n,"d MMM",{locale:pe})})}function T(a){const t=new Date;return Array.from({length:a},(s,r)=>{const n=ye(t,a-1-r);return X(n,"yyyy-MM-dd")})}const B={"7d":7,"15d":15,"30d":30,custom:0},p={all:["trends"],vitals:(a,t)=>[...p.all,"vitals",a,t],meds:(a,t)=>[...p.all,"meds",a,t],sleep:(a,t)=>[...p.all,"sleep",a,t],exercise:(a,t)=>[...p.all,"exercise",a,t],mood:(a,t)=>[...p.all,"mood",a,t],water:(a,t)=>[...p.all,"water",a,t]};function We(a,t,s){const r=a?t==="custom"&&s?[...p.vitals(a,t),s.startDate,s.endDate]:p.vitals(a,t):["trends","vitals","none"];return C({queryKey:r,queryFn:async()=>{if(!a)return ie(t,s);try{let n=`/trends/vitals/${a}?range=${t}`;return t==="custom"&&s&&(n+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await F.get(n)}catch{return console.warn("Vitals trend API not available, using mock data"),ie(t,s)}},enabled:!0,staleTime:60*1e3})}function Pe(a,t,s){const r=a?t==="custom"&&s?[...p.meds(a,t),s.startDate,s.endDate]:p.meds(a,t):["trends","meds","none"];return C({queryKey:r,queryFn:async()=>{if(!a)return ce(t,s);try{let n=`/trends/meds/${a}?range=${t}`;return t==="custom"&&s&&(n+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await F.get(n)}catch{return console.warn("Meds trend API not available, using mock data"),ce(t,s)}},enabled:!0,staleTime:60*1e3})}function qe(a,t,s){const r=a?t==="custom"&&s?[...p.sleep(a,t),s.startDate,s.endDate]:p.sleep(a,t):["trends","sleep","none"];return C({queryKey:r,queryFn:async()=>{if(!a)return me(t,s);try{let n=`/trends/sleep/${a}?range=${t}`;return t==="custom"&&s&&(n+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await F.get(n)}catch{return console.warn("Sleep trend API not available, using mock data"),me(t,s)}},enabled:!0,staleTime:60*1e3})}function M(a,t){const s=new Date(a),r=new Date(t);return Math.ceil((r.getTime()-s.getTime())/(1e3*60*60*24))+1}function E(a,t){const s=M(a,t),r=new Date(a),n=[],l=[];for(let u=0;u<s;u++){const d=new Date(r);d.setDate(d.getDate()+u),n.push(X(d,"yyyy-MM-dd")),l.push(X(d,"d MMM",{locale:pe}))}return{dates:n,labels:l}}function ie(a,t){let s,r,n;if(a==="custom"&&t){s=M(t.startDate,t.endDate);const o=E(t.startDate,t.endDate);r=o.labels,n=o.dates}else s=B[a]||7,r=A(s),n=T(s);const l=r.map((o,x)=>{const m=118+Math.floor(Math.random()*25),h=73+Math.floor(Math.random()*15),j=68+Math.floor(Math.random()*18),y=122+Math.floor(Math.random()*25),g=76+Math.floor(Math.random()*15),D=72+Math.floor(Math.random()*20),L=y,K=g,Y=D,z=L>=140||K>=90;return{day:o,date:n[x],systolic:L,diastolic:K,pulse:Y,sys_am:m,dia_am:h,pulse_am:j,sys_pm:y,dia_pm:g,pulse_pm:D,event:z?"สูง":void 0,note:z&&Math.random()>.5?"ความดันสูงกว่าปกติ":void 0}}),u=Math.round(l.reduce((o,x)=>o+(x.systolic||0),0)/l.length),d=Math.round(l.reduce((o,x)=>o+(x.diastolic||0),0)/l.length),i=l.filter(o=>o.systolic!==null).length;return{data:l,summary:{avg:`${u}/${d}`,label1:"ค่าเฉลี่ย",count:`วัดแล้ว ${i}/${s} วัน`,label2:"วันที่มีการวัด"},insight:He(u,d,a)}}function ce(a,t){let s,r,n;if(a==="custom"&&t){s=M(t.startDate,t.endDate);const i=E(t.startDate,t.endDate);r=i.labels,n=i.dates}else s=B[a]||7,r=A(s),n=T(s);const l=r.map((i,o)=>{const m=Math.random()>.2?2:Math.random()>.5?1:0,h=Math.round(m/2*100);return{day:i,date:n[o],target:2,done:m,percent:h,event:m===0?"ลืม":m<2?"พลาด":void 0,note:m<2?m===0?"ลืมทั้งวัน":"พลาดบางมื้อ":void 0}}),u=Math.round(l.reduce((i,o)=>i+(o.percent||0),0)/l.length),d=l.filter(i=>i.percent===100).length;return{data:l,summary:{avg:`${u}%`,label1:"% กินยาครบ",count:`กินครบ ${d}/${s} วัน`,label2:"วันกินครบ"},insight:Ye(u)}}function me(a,t){let s,r,n;if(a==="custom"&&t){s=M(t.startDate,t.endDate);const i=E(t.startDate,t.endDate);r=i.labels,n=i.dates}else s=B[a]||7,r=A(s),n=T(s);const l=r.map((i,o)=>{const x=parseFloat((5+Math.random()*3.5).toFixed(1)),m=x<6;return{day:i,date:n[o],hours:x,event:m?"น้อย":void 0,note:m?"นอนน้อยกว่าเกณฑ์":void 0}}),u=(l.reduce((i,o)=>i+(o.hours||0),0)/l.length).toFixed(1),d=l.filter(i=>i.hours!==null).length;return{data:l,summary:{avg:`${u} ชม.`,label1:"ชม.นอนเฉลี่ย",count:`บันทึก ${d}/${s} คืน`,label2:"คืนที่บันทึก"},insight:Oe(parseFloat(u))}}function He(a,t,s){return a>=140||t>=90?"ความดันโดยเฉลี่ยสูงกว่าปกติ ควรปรึกษาแพทย์เพื่อปรับยา":a>=130||t>=80?"ความดันอยู่ในระดับสูงกว่าปกติเล็กน้อย ควรระวังเรื่องอาหารเค็มและพักผ่อนให้เพียงพอ":`ความดัน${s==="7d"?"สัปดาห์นี้":s==="15d"?"15 วันที่ผ่านมา":"เดือนนี้"}อยู่ในเกณฑ์ดี ควบคุมได้ต่อเนื่อง`}function Ye(a,t,s){return a>=95?"กินยาครบถ้วนมาก สุดยอดครับ!":a>=80?"กินยาได้ดี แต่ยังพลาดบ้าง ลองตั้งเตือนเพิ่มไหมครับ":a>=60?"ช่วงนี้พลาดกินยาบ่อย ลองหาวิธีจดจำที่เหมาะกับคุณนะครับ":"ต้องปรับปรุงการกินยา ลองตั้งนาฬิกาเตือนหรือบอกคนใกล้ชิดให้ช่วยเตือน"}function Oe(a,t){return a>=7?"พักผ่อนเพียงพอ สุขภาพโดยรวมจะดีครับ":a>=6?"นอนได้พอประมาณ ลองเข้านอนเร็วขึ้นอีกสัก 30 นาทีจะดีมากครับ":"นอนน้อยกว่าเกณฑ์ ลองพักงีบช่วงบ่าย และเข้านอนเร็วขึ้นนะครับ"}function Ve(a,t,s){const r=a?t==="custom"&&s?[...p.exercise(a,t),s.startDate,s.endDate]:p.exercise(a,t):["trends","exercise","none"];return C({queryKey:r,queryFn:async()=>{if(!a)return xe(t,s);try{let n=`/trends/exercise/${a}?range=${t}`;return t==="custom"&&s&&(n+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await F.get(n)}catch{return console.warn("Exercise trend API not available, using mock data"),xe(t,s)}},enabled:!0,staleTime:60*1e3})}function Xe(a,t,s){const r=a?t==="custom"&&s?[...p.mood(a,t),s.startDate,s.endDate]:p.mood(a,t):["trends","mood","none"];return C({queryKey:r,queryFn:async()=>{if(!a)return ue(t,s);try{let n=`/trends/mood/${a}?range=${t}`;return t==="custom"&&s&&(n+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await F.get(n)}catch{return console.warn("Mood trend API not available, using mock data"),ue(t,s)}},enabled:!0,staleTime:60*1e3})}function Qe(a,t,s){const r=a?t==="custom"&&s?[...p.water(a,t),s.startDate,s.endDate]:p.water(a,t):["trends","water","none"];return C({queryKey:r,queryFn:async()=>{if(!a)return he(t,s);try{let n=`/trends/water/${a}?range=${t}`;return t==="custom"&&s&&(n+=`&startDate=${s.startDate}&endDate=${s.endDate}`),await F.get(n)}catch{return console.warn("Water trend API not available, using mock data"),he(t,s)}},enabled:!0,staleTime:60*1e3})}function xe(a,t){let s,r,n;if(a==="custom"&&t){s=M(t.startDate,t.endDate);const o=E(t.startDate,t.endDate);r=o.labels,n=o.dates}else s=B[a]||7,r=A(s),n=T(s);const l=["เดิน","วิ่ง","ว่ายน้ำ","ปั่นจักรยาน","โยคะ"],u=r.map((o,x)=>{const m=Math.random()>.3,h=m?Math.floor(15+Math.random()*45):null,j=m?l[Math.floor(Math.random()*l.length)]:void 0;return{day:o,date:n[x],duration:h,exerciseType:j,event:h&&h>=30?"ดี":void 0,note:j}}),d=u.filter(o=>o.duration!==null).length,i=d>0?Math.round(u.reduce((o,x)=>o+(x.duration||0),0)/d):0;return{data:u,summary:{avg:d>0?`${i} นาที`:"-",label1:"เวลาเฉลี่ย",count:`ออกกำลังกาย ${d}/${s} วัน`,label2:"วันที่ออกกำลังกาย"},insight:Ge(d,s,i)}}function Ge(a,t,s){const r=a/t;return r>=.7&&s>=30?"ออกกำลังกายสม่ำเสมอมาก สุขภาพแข็งแรงแน่นอนครับ!":r>=.5?"ออกกำลังกายได้ดี ลองเพิ่มเวลาออกกำลังกายอีกนิดจะยิ่งดีครับ":r>=.3?"ออกกำลังกายบ้าง ลองตั้งเป้าอย่างน้อยวันละ 30 นาที 5 วัน/สัปดาห์นะครับ":"ช่วงนี้ออกกำลังกายน้อย ลองเริ่มจากเดินวันละ 15-20 นาทีก่อนนะครับ"}function ue(a,t){let s,r,n;if(a==="custom"&&t){s=M(t.startDate,t.endDate);const m=E(t.startDate,t.endDate);r=m.labels,n=m.dates}else s=B[a]||7,r=A(s),n=T(s);const l=["happy","calm","neutral","sad","anxious"],u={happy:"มีความสุข",calm:"สงบ",neutral:"เฉยๆ",sad:"เศร้า",anxious:"กังวล"},d={happy:5,calm:4,neutral:3,sad:2,anxious:1},i=r.map((m,h)=>{const j=Math.random()>.2,y=j?l[Math.floor(Math.random()*l.length)]:null,g=y?d[y]:null,D=j?Math.floor(1+Math.random()*5):null;return{day:m,date:n[h],mood:y,moodScore:g,stressLevel:D,event:g&&g<=2?"ต่ำ":void 0,note:y?u[y]:void 0}}),o=i.filter(m=>m.moodScore!==null).length,x=o>0?(i.reduce((m,h)=>m+(h.moodScore||0),0)/o).toFixed(1):"0";return{data:i,summary:{avg:o>0?`${x}/5`:"-",label1:"คะแนนอารมณ์เฉลี่ย",count:`บันทึก ${o}/${s} วัน`,label2:"วันที่บันทึก"},insight:Je(parseFloat(x),o)}}function Je(a,t,s){return t===0?"ยังไม่มีการบันทึกอารมณ์ ลองบันทึกทุกวันเพื่อติดตามสุขภาพจิตนะครับ":a>=4?"อารมณ์ดีสม่ำเสมอ ยอดเยี่ยมครับ! รักษาความสุขนี้ไว้นะครับ":a>=3?"อารมณ์โดยรวมปกติดี ลองหากิจกรรมที่ชอบทำเพื่อเพิ่มความสุขนะครับ":a>=2?"ช่วงนี้อารมณ์อาจไม่ค่อยดี ลองพูดคุยกับคนใกล้ชิดหรือทำกิจกรรมผ่อนคลายนะครับ":"ดูเหมือนช่วงนี้อารมณ์ไม่ค่อยดี หากรู้สึกหนักใจ ลองปรึกษาผู้เชี่ยวชาญนะครับ"}function he(a,t){let s,r,n;if(a==="custom"&&t){s=M(t.startDate,t.endDate);const i=E(t.startDate,t.endDate);r=i.labels,n=i.dates}else s=B[a]||7,r=A(s),n=T(s);const l=r.map((i,o)=>{const x=Math.floor(4+Math.random()*6),m=x*250,h=x<6;return{day:i,date:n[o],glasses:x,ml:m,event:h?"น้อย":x>=8?"ดี":void 0,note:h?"ดื่มน้ำน้อย":x>=8?"ดื่มน้ำได้ดี":void 0}}),u=Math.round(l.reduce((i,o)=>i+(o.glasses||0),0)/l.length),d=l.filter(i=>(i.glasses||0)>=8).length;return{data:l,summary:{avg:`${u} แก้ว`,label1:"เฉลี่ย/วัน",count:`ดื่มครบ ${d}/${s} วัน`,label2:"วันดื่มครบ 8 แก้ว"},insight:Ue(u)}}function Ue(a,t,s){return a>=8?"ดื่มน้ำได้ตามเป้าหมาย สุขภาพดีแน่นอนครับ!":a>=6?"ดื่มน้ำได้ดี ลองเพิ่มอีก 2-3 แก้วต่อวันจะยิ่งดีครับ":a>=4?"ดื่มน้ำน้อยไป ลองพกขวดน้ำติดตัวเพื่อเตือนให้ดื่มบ่อยขึ้นนะครับ":"ดื่มน้ำน้อยมาก ร่างกายต้องการน้ำอย่างน้อย 8 แก้ว/วันนะครับ"}const fe={data:[{day:"จ",date:"2026-01-06",systolic:122,diastolic:80,pulse:72,sys_am:118,dia_am:76,pulse_am:68,sys_pm:122,dia_pm:80,pulse_pm:72},{day:"อ",date:"2026-01-07",systolic:125,diastolic:82,pulse:75,sys_am:120,dia_am:78,pulse_am:70,sys_pm:125,dia_pm:82,pulse_pm:75,event:"สูงนิดหน่อย"},{day:"พ",date:"2026-01-08",systolic:118,diastolic:78,pulse:70,sys_am:115,dia_am:74,pulse_am:66,sys_pm:118,dia_pm:78,pulse_pm:70},{day:"พฤ",date:"2026-01-09",systolic:120,diastolic:79,pulse:73,sys_am:117,dia_am:75,pulse_am:69,sys_pm:120,dia_pm:79,pulse_pm:73},{day:"ศ",date:"2026-01-10",systolic:123,diastolic:81,pulse:74,sys_am:119,dia_am:77,pulse_am:70,sys_pm:123,dia_pm:81,pulse_pm:74,note:"ตื่นมาเหนื่อย"},{day:"ส",date:"2026-01-11",systolic:119,diastolic:77,pulse:71,sys_am:116,dia_am:73,pulse_am:67,sys_pm:119,dia_pm:77,pulse_pm:71},{day:"อา",date:"2026-01-12",systolic:121,diastolic:80,pulse:72,sys_am:118,dia_am:76,pulse_am:68,sys_pm:121,dia_pm:80,pulse_pm:72}],summary:{avg:"121/79",count:"7/7 วัน",label1:"ค่าเฉลี่ย",label2:"บันทึกครบ"},insight:"ความดันคุณอยู่ในเกณฑ์ปกติตลอดสัปดาห์ ยอดเยี่ยม!"},Ze={data:[{day:"จ",date:"2026-01-06",percent:100,target:3,done:3},{day:"อ",date:"2026-01-07",percent:67,target:3,done:2,note:"ลืมมื้อเที่ยง"},{day:"พ",date:"2026-01-08",percent:100,target:3,done:3},{day:"พฤ",date:"2026-01-09",percent:100,target:3,done:3},{day:"ศ",date:"2026-01-10",percent:100,target:3,done:3},{day:"ส",date:"2026-01-11",percent:33,target:3,done:1,note:"ลืม 2 มื้อ"},{day:"อา",date:"2026-01-12",percent:100,target:3,done:3}],summary:{avg:"86%",count:"5/7 วัน",label1:"อัตราครบ",label2:"กินครบทั้งวัน"},insight:"สัปดาห์นี้คุณลืมยา 2 วัน ลองตั้งเตือนเพิ่มช่วงเที่ยงนะคะ"},Ie={data:[{day:"จ",date:"2026-01-06",hours:7.5},{day:"อ",date:"2026-01-07",hours:6.2,note:"นอนดึก"},{day:"พ",date:"2026-01-08",hours:7},{day:"พฤ",date:"2026-01-09",hours:5.5,note:"ตื่นกลางดึก"},{day:"ศ",date:"2026-01-10",hours:8},{day:"ส",date:"2026-01-11",hours:7.2},{day:"อา",date:"2026-01-12",hours:6.8}],summary:{avg:"6.9 ชม.",count:"7/7 วัน",label1:"เฉลี่ย/คืน",label2:"บันทึกครบ"},insight:"สัปดาห์นี้คุณนอนเฉลี่ย 6.9 ชม. ลองนอนก่อน 22:00 จะดีขึ้นนะคะ"},H=(a=0)=>{const t=new Date;return t.setDate(t.getDate()-a),`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`};function dt(){const{context:a,user:t}=ve(),s=a.patientId||(t.role==="patient"?t.profileId:null),[r,n]=v.useState("7d"),[l,u]=v.useState("heart"),[d,i]=v.useState(null),[o,x]=v.useState({startDate:H(30),endDate:H(0)}),[m,h]=v.useState(!1),[j,y]=v.useState(o.startDate),[g,D]=v.useState(o.endDate),{data:L,isLoading:K}=We(s,r,r==="custom"?o:void 0),{data:Y,isLoading:z}=Pe(s,r,r==="custom"?o:void 0),{data:U,isLoading:Z}=qe(s,r,r==="custom"?o:void 0),{data:I,isLoading:R}=Ve(s,r,r==="custom"?o:void 0),{data:ee,isLoading:te}=Xe(s,r,r==="custom"?o:void 0),{data:se,isLoading:ae}=Qe(s,r,r==="custom"?o:void 0),f=v.useMemo(()=>{switch(l){case"heart":return L||fe;case"meds":return Y||Ze;case"sleep":return U||Ie;case"exercise":return I;case"mood":return ee;case"water":return se;default:return L||fe}},[l,L,Y,U,I,ee,se]),re=v.useMemo(()=>{switch(l){case"heart":return K;case"meds":return z;case"sleep":return Z;case"exercise":return R;case"mood":return te;case"water":return ae;default:return!1}},[l,K,z,Z,R,te,ae]);v.useEffect(()=>{i(null)},[r,l]);const be=[{id:"heart",label:"ความดัน",icon:De},{id:"meds",label:"ยา",icon:Ne},{id:"sleep",label:"นอน",icon:ke},{id:"exercise",label:"ออกกำลัง",icon:we},{id:"mood",label:"อารมณ์",icon:Se},{id:"water",label:"น้ำ",icon:_e}],N=c=>{c&&c.activePayload&&c.activePayload[0]&&i(c.activePayload[0].payload)};return e.jsxs("div",{className:"min-h-screen pb-32 font-sans overflow-x-hidden relative z-10 bg-background",children:[e.jsx("header",{className:"bg-card pt-12 pb-4 px-6 sticky top-0 z-20 flex justify-between items-center border-b border-border",children:e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"แนวโน้ม"})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 space-y-6 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex bg-muted/50 p-1 rounded-xl gap-1",children:["7d","15d","30d","custom"].map((c,b)=>{const je=["7 วัน","15 วัน","30 วัน","กำหนดเอง"],ge=r===c;return e.jsxs("button",{onClick:()=>{n(c),c==="custom"&&(y(o.startDate),D(o.endDate),h(!0))},className:le("flex-1 py-2 text-xs font-semibold rounded-lg transition-all flex items-center justify-center gap-1",ge?"bg-primary/10 text-primary shadow-sm border border-primary/30":"text-muted-foreground"),children:[c==="custom"&&e.jsx(de,{className:"w-3 h-3"}),je[b]]},c)})}),r==="custom"&&e.jsxs("button",{onClick:()=>{y(o.startDate),D(o.endDate),h(!0)},className:"flex items-center justify-center gap-2 text-xs text-primary bg-primary/5 px-3 py-2 rounded-lg border border-primary/20",children:[e.jsx(de,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[new Date(o.startDate).toLocaleDateString("th-TH",{day:"numeric",month:"short"})," - ",new Date(o.endDate).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"2-digit"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:be.map(c=>{const b=l===c.id;return e.jsxs("button",{onClick:()=>u(c.id),className:le("flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all border",b?"bg-primary text-primary-foreground border-primary shadow-md shadow-primary/20":"bg-card text-muted-foreground border-border"),children:[e.jsx(c.icon,{className:"w-3.5 h-3.5"}),c.label]},c.id)})}),re&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Me,{className:"w-8 h-8 animate-spin text-primary"})}),!re&&f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 transition-all",children:[e.jsx(O,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(Q,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:f.summary.label1}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:f.summary.avg})]})}),e.jsx(O,{className:"border-none shadow-sm bg-card hover:shadow-md transition-shadow",children:e.jsxs(Q,{className:"p-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:f.summary.label2}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:f.summary.count})]})})]}),e.jsxs(O,{className:"border-none shadow-sm bg-card p-6 relative",children:[l==="heart"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#EF4444]"}),"ความดันช่วงเช้า (AM)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#EF4444] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"SYS"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#3B82F6] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"DIA"})]})]}),e.jsx("div",{className:"h-[180px] w-full",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(J,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,180]}),e.jsx(_,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(ne,{y:135,stroke:"#EF4444",strokeDasharray:"6 4",strokeOpacity:.4}),e.jsx($,{type:"monotone",dataKey:"sys_am",name:"SYS เช้า",stroke:"#EF4444",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#EF4444"},activeDot:{r:5,strokeWidth:0,fill:"#EF4444"},connectNulls:!0}),e.jsx($,{type:"monotone",dataKey:"dia_am",name:"DIA เช้า",stroke:"#3B82F6",strokeWidth:2,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#3B82F6"},activeDot:{r:5,strokeWidth:0,fill:"#3B82F6"},connectNulls:!0})]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#991B1B]"}),"ความดันช่วงเย็น (PM)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#991B1B] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"SYS"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#1E3A8A] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"DIA"})]})]}),e.jsx("div",{className:"h-[180px] w-full",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(J,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[50,180]}),e.jsx(_,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(ne,{y:135,stroke:"#991B1B",strokeDasharray:"6 4",strokeOpacity:.4}),e.jsx($,{type:"monotone",dataKey:"sys_pm",name:"SYS เย็น",stroke:"#991B1B",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#991B1B"},activeDot:{r:5,strokeWidth:0,fill:"#991B1B"},connectNulls:!0}),e.jsx($,{type:"monotone",dataKey:"dia_pm",name:"DIA เย็น",stroke:"#1E3A8A",strokeWidth:2,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#1E3A8A"},activeDot:{r:5,strokeWidth:0,fill:"#1E3A8A"},connectNulls:!0})]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#F59E0B]"}),"ชีพจร (Heart Rate)"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-2 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 border-t-2 border-dashed border-[#F59E0B]"}),e.jsx("span",{className:"text-muted-foreground",children:"เช้า"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-1 bg-[#F97316] rounded"}),e.jsx("span",{className:"text-muted-foreground",children:"เย็น"})]})]}),e.jsx("div",{className:"h-[150px] w-full",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(J,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[40,120]}),e.jsx(_,{contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx($,{type:"monotone",dataKey:"pulse_am",name:"HR เช้า",stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"5 5",dot:{r:3,fill:"white",strokeWidth:2,stroke:"#F59E0B"},activeDot:{r:5,strokeWidth:0,fill:"#F59E0B"},connectNulls:!0}),e.jsx($,{type:"monotone",dataKey:"pulse_pm",name:"HR เย็น",stroke:"#F97316",strokeWidth:2.5,dot:{r:3,fill:"white",strokeWidth:2,stroke:"#F97316"},activeDot:{r:5,strokeWidth:0,fill:"#F97316"},connectNulls:!0})]})})})]})]}),l!=="heart"&&e.jsx("div",{className:"h-[240px] w-full",children:e.jsx(V,{width:"100%",height:"100%",children:l==="meds"?e.jsxs(W,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,100]}),e.jsx(_,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(P,{dataKey:"percent",radius:[6,6,0,0],children:f.data.map((c,b)=>e.jsx(q,{fill:c.percent===100?"#10b981":c.percent===0?"#ef4444":"#f97316"},`cell-${b}`))})]}):l==="sleep"?e.jsxs(W,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,10]}),e.jsx(_,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(P,{dataKey:"hours",radius:[6,6,0,0],children:f.data.map((c,b)=>e.jsx(q,{fill:c.hours&&c.hours<6?"#f97316":"#8b5cf6"},`cell-${b}`))})]}):l==="exercise"?e.jsxs(W,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,60]}),e.jsx(_,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(P,{dataKey:"duration",radius:[6,6,0,0],children:f.data.map((c,b)=>e.jsx(q,{fill:c.duration==null?"#e5e7eb":(c.duration??0)>=30?"#10b981":"#f97316"},`cell-${b}`))})]}):l==="mood"?e.jsxs(W,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,5]}),e.jsx(_,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(P,{dataKey:"moodScore",radius:[6,6,0,0],children:f.data.map((c,b)=>e.jsx(q,{fill:c.moodScore==null?"#e5e7eb":(c.moodScore??0)>=4?"#10b981":(c.moodScore??0)>=3?"#f59e0b":"#ef4444"},`cell-${b}`))})]}):e.jsxs(W,{data:f.data,margin:{top:10,right:10,left:-25,bottom:0},onClick:N,children:[e.jsx(k,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),e.jsx(w,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},dy:10}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},domain:[0,12]}),e.jsx(_,{cursor:{fill:"rgba(0,0,0,0.05)"},contentStyle:{borderRadius:"12px",fontSize:"12px",border:"1px solid hsl(var(--border))"}}),e.jsx(P,{dataKey:"glasses",radius:[6,6,0,0],children:f.data.map((c,b)=>e.jsx(q,{fill:(c.glasses||0)>=8?"#3b82f6":(c.glasses||0)>=6?"#60a5fa":"#93c5fd"},`cell-${b}`))})]})})}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium bg-muted/30 px-3 py-1 rounded-full flex items-center gap-1.5",children:[e.jsx(Ke,{className:"w-3 h-3"})," แตะจุดบนกราฟเพื่อดูรายละเอียด"]})}),d&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-muted/50 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:d.day}),l==="heart"&&e.jsxs("div",{className:"space-y-2 mt-1",children:[(d.sys_am||d.pulse_am)&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground w-8",children:"เช้า"}),e.jsxs("p",{className:"text-base font-bold text-[#EF4444]",children:[d.sys_am,"/",d.dia_am," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"mmHg"})]}),e.jsxs("p",{className:"text-sm font-bold text-[#F59E0B]",children:[d.pulse_am," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"bpm"})]})]}),(d.sys_pm||d.pulse_pm)&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground w-8",children:"เย็น"}),e.jsxs("p",{className:"text-base font-bold text-[#991B1B]",children:[d.sys_pm,"/",d.dia_pm," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"mmHg"})]}),e.jsxs("p",{className:"text-sm font-bold text-[#F97316]",children:[d.pulse_pm," ",e.jsx("span",{className:"text-[10px] font-normal text-muted-foreground",children:"bpm"})]})]})]}),l==="meds"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-sm font-bold text-foreground",children:["ตั้งไว้ ",d.target," ช่วง | ทำได้ ",d.done," ช่วง |"," ","= ",d.percent,"%"]})}),l==="sleep"&&e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[d.hours," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"ชม."})]})}),l==="exercise"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:d.duration!==null?e.jsxs(e.Fragment,{children:[d.duration," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"นาที"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้ออกกำลังกาย"})}),d.exerciseType&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:d.exerciseType})]}),l==="mood"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-amber-600",children:d.moodScore!==null?e.jsxs(e.Fragment,{children:[d.moodScore,"/5"," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"คะแนน"})]}):e.jsx("span",{className:"text-muted-foreground text-base",children:"ไม่ได้บันทึก"})}),d.note&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:d.note})]}),l==="water"&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[d.glasses," ",e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"แก้ว"})]}),d.ml&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["≈ ",d.ml," ml"]})]})]}),d.note&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/30 px-3 py-2 rounded-xl text-xs font-medium text-yellow-700 dark:text-yellow-400 max-w-[150px]",children:['"',d.note,'"']})]}),d.event&&!d.note&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 bg-red-50 dark:bg-red-950/30 text-red-600 dark:text-red-400 px-2.5 py-1 rounded-full",children:[e.jsx(Le,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px] font-bold",children:d.event})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-sm font-bold text-foreground flex items-center gap-2 pl-1",children:[e.jsx("div",{className:"w-1 h-4 bg-accent rounded-full"}),"อุ่นใจสังเกตให้"]}),e.jsx(O,{className:"border-none shadow-sm bg-accent/5 overflow-hidden group hover:bg-accent/10 transition-colors",children:e.jsxs(Q,{className:"p-5 flex gap-4 items-start",children:[e.jsx("div",{className:"bg-accent/10 p-3 rounded-2xl text-accent group-hover:scale-110 transition-transform",children:e.jsx(ze,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 space-y-2",children:e.jsxs("p",{className:"text-sm leading-relaxed font-semibold text-foreground",children:['"',f.insight,'"']})})]})})]})]})]}),e.jsx($e,{open:m,onOpenChange:h,children:e.jsxs(Ce,{className:"max-h-[85vh]",children:[e.jsxs(Fe,{className:"flex items-center justify-between px-6",children:[e.jsx(Ae,{className:"text-xl font-bold",children:"เลือกช่วงวันที่"}),e.jsx(Te,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10",children:e.jsx(Be,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"px-6 pb-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันเริ่มต้น"}),e.jsx(oe,{value:j,onChange:y,maxDate:g})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"วันสิ้นสุด"}),e.jsx(oe,{value:g,onChange:D,minDate:j,maxDate:H(0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"เลือกด่วน"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"7 วันที่แล้ว",days:7},{label:"14 วันที่แล้ว",days:14},{label:"30 วันที่แล้ว",days:30},{label:"60 วันที่แล้ว",days:60},{label:"90 วันที่แล้ว",days:90}].map(c=>e.jsx("button",{onClick:()=>{y(H(c.days-1)),D(H(0))},className:"px-3 py-1.5 text-xs font-medium rounded-full bg-muted hover:bg-muted/80 text-muted-foreground transition-colors",children:c.label},c.days))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(G,{variant:"ghost",className:"flex-1 h-12 rounded-xl",onClick:()=>h(!1),children:"ยกเลิก"}),e.jsx(G,{className:"flex-1 h-12 rounded-xl bg-primary text-primary-foreground",onClick:()=>{x({startDate:j,endDate:g}),h(!1)},children:"ยืนยัน"})]})]})]})}),e.jsx(Ee,{})]})}export{dt as default};
