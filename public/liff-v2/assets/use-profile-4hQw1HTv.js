import{b as l,u as s,c as a}from"./vendor-query-OvJu5Khy.js";import{l as i}from"./index-tEBa2Yi-.js";const t={all:["profile"],patient:e=>[...t.all,"patient",e],caregiver:e=>[...t.all,"caregiver",e],caregivers:e=>[...t.all,"caregivers",e],patients:e=>[...t.all,"patients",e],linkCode:e=>[...t.all,"linkCode",e],medications:e=>[...t.all,"medications",e],reminders:e=>[...t.all,"reminders",e]};function y(e){return l({queryKey:e?t.patient(e):["profile","patient","none"],queryFn:async()=>{if(!e)return null;try{const n=await i.get(`/registration/profile/patient/${e}`);return console.log("[usePatientProfile] API response:",n),n.profile}catch(n){return console.warn("[usePatientProfile] API error:",n),d(e)}},enabled:!!e,staleTime:60*1e3})}function f(){const e=s();return a({mutationFn:async({patientId:n,data:r})=>{console.log("[useUpdatePatientProfile] Calling API with:",{patientId:n,data:r});const o=await i.put(`/registration/profile/patient/${n}`,r);return console.log("[useUpdatePatientProfile] API result:",o),o},onError:n=>{console.error("[useUpdatePatientProfile] Error:",n)},onSuccess:(n,{patientId:r})=>{console.log("[useUpdatePatientProfile] Success, invalidating queries for:",r),e.invalidateQueries({queryKey:t.patient(r)})}})}function P(e){return l({queryKey:e?t.linkCode(e):["profile","linkCode","none"],queryFn:async()=>{if(!e)return null;try{const n=await i.post("/registration/generate-link-code",{patient_id:e});return console.log("[useLinkCode] API response:",n),n}catch(n){return console.warn("[useLinkCode] API error:",n),null}},enabled:!!e,staleTime:300*1e3})}function p(e){return l({queryKey:e?t.caregivers(e):["profile","caregivers","none"],queryFn:async()=>{if(!e)return[];try{const n=await i.get(`/registration/patient/${e}/caregivers`);return console.log("[usePatientCaregivers] API response:",n),n.caregivers||[]}catch(n){return console.warn("[usePatientCaregivers] API error:",n),[]}},enabled:!!e,staleTime:60*1e3})}function _(e){return console.log("[usePatientMedicationsAll] Called with patientId:",e),l({queryKey:e?t.medications(e):["profile","medications","none"],queryFn:async()=>{if(console.log("[usePatientMedicationsAll] queryFn executing, patientId:",e),!e)return console.warn("[usePatientMedicationsAll] No patientId, returning empty array"),[];try{console.log("[usePatientMedicationsAll] Calling API:",`/medications/patient/${e}`);const n=await i.get(`/medications/patient/${e}`);return console.log("[usePatientMedicationsAll] API response:",n),console.log("[usePatientMedicationsAll] Medications count:",n.medications?.length||0),n.medications||[]}catch(n){return console.error("[usePatientMedicationsAll] API error:",n),[]}},enabled:!!e,staleTime:60*1e3})}function h(){const e=s();return a({mutationFn:async n=>{console.log("[useAddMedication] Adding medication:",n);const r=await i.post("/medications",n);return console.log("[useAddMedication] Result:",r),r},onError:n=>{console.error("[useAddMedication] Error:",n)},onSuccess:(n,r)=>{console.log("[useAddMedication] Success, invalidating queries"),e.invalidateQueries({queryKey:t.medications(r.patient_id)})}})}function A(){const e=s();return a({mutationFn:async({id:n})=>i.delete(`/medications/${n}`),onSuccess:(n,{patientId:r})=>{e.invalidateQueries({queryKey:t.medications(r)})}})}function q(e){return console.log("[usePatientReminders] Called with patientId:",e),l({queryKey:e?t.reminders(e):["profile","reminders","none"],queryFn:async()=>{if(console.log("[usePatientReminders] queryFn executing, patientId:",e),!e)return console.warn("[usePatientReminders] No patientId, returning empty array"),[];try{console.log("[usePatientReminders] Calling API:",`/reminders/patient/${e}`);const n=await i.get(`/reminders/patient/${e}`);return console.log("[usePatientReminders] API response:",n),console.log("[usePatientReminders] Reminders count:",n.reminders?.length||0),n.reminders||[]}catch(n){return console.error("[usePatientReminders] API error:",n),[]}},enabled:!!e,staleTime:60*1e3})}function C(){const e=s();return a({mutationFn:async n=>i.post("/reminders",n),onSuccess:(n,r)=>{e.invalidateQueries({queryKey:t.reminders(r.patient_id)})}})}function M(){const e=s();return a({mutationFn:async({id:n,data:r})=>i.put(`/reminders/${n}`,r),onSuccess:(n,{data:r})=>{r.patient_id&&e.invalidateQueries({queryKey:t.reminders(r.patient_id)})}})}function v(){const e=s();return a({mutationFn:async({id:n})=>i.delete(`/reminders/${n}`),onSuccess:(n,{patientId:r})=>{e.invalidateQueries({queryKey:t.reminders(r)})}})}function w(e){if(!e)return null;const n=new Date,r=new Date(e);let o=n.getFullYear()-r.getFullYear();const u=n.getMonth()-r.getMonth();return(u<0||u===0&&n.getDate()<r.getDate())&&o--,o}function F(e){if(!e)return"-";const n=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],r=new Date(e),o=r.getDate(),u=n[r.getMonth()],c=r.getFullYear()+543;return`${o} ${u} ${c}`}function k(e){return e?{male:"ชาย",female:"หญิง",other:"อื่นๆ"}[e]||e:"-"}function d(e){return{id:e,user_id:"mock-user-id",first_name:"สมชาย",last_name:"ใจดี",nickname:"ชาย",birth_date:"1955-05-15",gender:"male",phone_number:"081-234-5678",address:"123/45 ถ.สุขุมวิท แขวงคลองเตย เขตคลองเตย กรุงเทพฯ 10110",weight_kg:65,height_cm:168,blood_type:"O",chronic_diseases:["ความดันโลหิตสูง","เบาหวาน"],drug_allergies:["Penicillin"],food_allergies:["อาหารทะเล"],medical_condition:"ความดันสูง ควบคุมด้วยยา",medical_notes:"ต้องวัดความดันทุกเช้า",hospital_name:"โรงพยาบาลบำรุงราษฎร์",hospital_phone:"02-667-1000",emergency_contact_name:"สมหญิง ใจดี",emergency_contact_relation:"ลูกสาว",emergency_contact_phone:"089-876-5432",created_at:"2024-01-15T00:00:00Z"}}export{P as a,p as b,w as c,k as d,f as e,F as f,_ as g,h,A as i,q as j,C as k,M as l,v as m,y as u};
