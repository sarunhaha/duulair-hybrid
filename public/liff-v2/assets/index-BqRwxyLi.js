import{r as M,j as e}from"./vendor-query-CmnYLxAr.js";import{c as i,u as P,n as z,y as f,g as p,z as L,U as x,e as r,f as l,b as A,E as U,G as H,H as b,l as I,P as S,J as $,B,a as N}from"./index-Bie2a3bK.js";import{u as E,a as R,b as T,c as V,f as D,d as G}from"./use-profile-DiKMyhza.js";import{C as q}from"./copy-C3z4bjPc.js";import{C as J}from"./calendar-osKWa3pv.js";import{U as v}from"./users-CfEWACst.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-pdf-IriBjpIe.js";import"./vendor-charts-Cp29jYec.js";import"./vendor-ui-hH0USYad.js";const Z=[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M14 9h-4",key:"1w2s2s"}],["path",{d:"M18 11h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"1tthqt"}],["path",{d:"M18 21V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16",key:"dw4p4i"}]],w=i("hospital",Z);const F=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],K=i("pen-line",F);const O=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],u=i("phone",O);const Q=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],W=i("ruler",Q);const X=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],y=i("scale",X);function ce(){const{context:m}=P(),{profile:d}=z(),n=m.patientId,{data:s,isLoading:_}=E(n),{data:c}=R(n),{data:o}=T(n),[k,j]=M.useState(!1),C=async()=>{c?.code&&(await navigator.clipboard.writeText(c.code),j(!0),setTimeout(()=>j(!1),2e3))};if(_)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const g=V(s?.birth_date);return e.jsxs("div",{className:"min-h-screen pb-32 font-sans bg-background",children:[e.jsxs("header",{className:"bg-gradient-to-br from-primary to-primary/80 pt-12 pb-8 px-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(f,{href:"/dashboard",children:e.jsx(p,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(L,{className:"w-5 h-5"})})}),e.jsx(f,{href:"/profile/edit",children:e.jsxs(p,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"แก้ไข"]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center overflow-hidden ring-4 ring-white/30",children:d?.pictureUrl?e.jsx("img",{src:d.pictureUrl,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(x,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s?.nickname||s?.first_name||d?.displayName||"ผู้ใช้งาน"}),e.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[s?.first_name," ",s?.last_name]}),g&&e.jsxs("p",{className:"text-white/70 text-xs mt-0.5",children:["อายุ ",g," ปี"]})]})]})]})]}),e.jsxs("main",{className:"max-w-md mx-auto px-4 -mt-4 space-y-4 relative z-10",children:[c&&e.jsx(r,{className:"border-none shadow-lg bg-gradient-to-br from-accent to-accent/80 text-white overflow-hidden",children:e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/80 font-medium mb-1",children:"รหัสเชื่อมผู้ดูแล"}),e.jsx("p",{className:"text-2xl font-bold tracking-widest font-mono",children:c.code})]}),e.jsx(p,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:C,children:k?e.jsx(A,{className:"w-5 h-5"}):e.jsx(q,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-[10px] text-white/70 mt-2",children:"ให้ผู้ดูแลพิมพ์รหัสนี้ในแชทเพื่อเชื่อมต่อ"})]})}),e.jsx(r,{className:"border-none shadow-sm bg-card",children:e.jsxs(l,{className:"p-0",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-xl",children:e.jsx(x,{className:"w-5 h-5 text-primary"})}),e.jsx("h2",{className:"font-bold text-foreground",children:"ข้อมูลพื้นฐาน"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(a,{icon:J,label:"วันเกิด",value:D(s?.birth_date)}),e.jsx(a,{icon:x,label:"เพศ",value:G(s?.gender)}),e.jsx(a,{icon:u,label:"โทรศัพท์",value:s?.phone_number||"-"}),e.jsx(a,{icon:U,label:"ที่อยู่",value:s?.address||"-",multiline:!0})]})]})}),e.jsx(r,{className:"border-none shadow-sm bg-card",children:e.jsxs(l,{className:"p-0",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-500/10 p-2 rounded-xl",children:e.jsx(y,{className:"w-5 h-5 text-green-500"})}),e.jsx("h2",{className:"font-bold text-foreground",children:"สถิติร่างกาย"})]}),e.jsxs("div",{className:"p-4 grid grid-cols-3 gap-4 text-center",children:[e.jsx("div",{children:e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[e.jsx(y,{className:"w-5 h-5 text-muted-foreground mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:s?.weight_kg||"-"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"กก."})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[e.jsx(W,{className:"w-5 h-5 text-muted-foreground mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:s?.height_cm||"-"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"ซม."})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[e.jsx(H,{className:"w-5 h-5 text-muted-foreground mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:s?.blood_type||"-"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"เลือด"})]})})]})]})}),e.jsx(r,{className:"border-none shadow-sm bg-card",children:e.jsxs(l,{className:"p-0",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-3",children:[e.jsx("div",{className:"bg-red-500/10 p-2 rounded-xl",children:e.jsx(b,{className:"w-5 h-5 text-red-500"})}),e.jsx("h2",{className:"font-bold text-foreground",children:"ข้อมูลสุขภาพ"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(a,{icon:b,label:"โรคประจำตัว",value:s?.chronic_diseases?.join(", ")||"-",multiline:!0}),e.jsx(a,{icon:I,label:"อาการ/สภาพ",value:s?.medical_condition||"-",multiline:!0}),e.jsx(a,{icon:S,label:"หมายเหตุการรักษา",value:s?.medical_notes||"-",multiline:!0})]})]})}),e.jsx(r,{className:"border-none shadow-sm bg-card",children:e.jsxs(l,{className:"p-0",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-500/10 p-2 rounded-xl",children:e.jsx($,{className:"w-5 h-5 text-orange-500"})}),e.jsx("h2",{className:"font-bold text-foreground",children:"การแพ้"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[s?.drug_allergies&&s.drug_allergies.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-bold mb-2",children:"แพ้ยา"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.drug_allergies.map((t,h)=>e.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-950/30 text-red-600 dark:text-red-400 rounded-full text-xs font-medium",children:t},h))})]}),s?.food_allergies&&s.food_allergies.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-bold mb-2",children:"แพ้อาหาร"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.food_allergies.map((t,h)=>e.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-950/30 text-orange-600 dark:text-orange-400 rounded-full text-xs font-medium",children:t},h))})]}),(!s?.drug_allergies||s.drug_allergies.length===0)&&(!s?.food_allergies||s.food_allergies.length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"ไม่มีข้อมูลการแพ้"})]})]})}),e.jsx(r,{className:"border-none shadow-sm bg-card",children:e.jsxs(l,{className:"p-0",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-500/10 p-2 rounded-xl",children:e.jsx(w,{className:"w-5 h-5 text-blue-500"})}),e.jsx("h2",{className:"font-bold text-foreground",children:"โรงพยาบาล/ผู้ติดต่อฉุกเฉิน"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(a,{icon:w,label:"โรงพยาบาล",value:s?.hospital_name||"-"}),e.jsx(a,{icon:u,label:"เบอร์โรงพยาบาล",value:s?.hospital_phone||"-"}),e.jsxs("div",{className:"pt-3 border-t border-border",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-bold mb-3",children:"ผู้ติดต่อฉุกเฉิน"}),e.jsx(a,{icon:x,label:"ชื่อ",value:s?.emergency_contact_name||"-"}),e.jsx(a,{icon:v,label:"ความสัมพันธ์",value:s?.emergency_contact_relation||"-"}),e.jsx(a,{icon:u,label:"เบอร์โทร",value:s?.emergency_contact_phone||"-"})]})]})]})}),o&&o.length>0&&e.jsx(r,{className:"border-none shadow-sm bg-card",children:e.jsxs(l,{className:"p-0",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-3",children:[e.jsx("div",{className:"bg-purple-500/10 p-2 rounded-xl",children:e.jsx(v,{className:"w-5 h-5 text-purple-500"})}),e.jsxs("h2",{className:"font-bold text-foreground",children:["ผู้ดูแล (",o.length,")"]})]}),e.jsx("div",{className:"p-4 space-y-3",children:o.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-600 font-bold",children:(t.first_name||"U")[0]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-foreground text-sm",children:[t.first_name," ",t.last_name]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.relationship||"ผู้ดูแล"})]})]},t.id))})]})})]}),e.jsx(B,{})]})}function a({icon:m,label:d,value:n,multiline:s}){return e.jsxs("div",{className:N("flex",s?"flex-col gap-1":"items-center justify-between"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:d})]}),e.jsx("p",{className:N("text-sm font-medium text-foreground",s&&"pl-6"),children:n})]})}export{ce as default};
