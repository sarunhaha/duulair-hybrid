<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#F2F1F7">
  <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û - OONJAI</title>

  <!-- Preconnect to speed up external resources -->
  <link rel="preconnect" href="https://static.line-scdn.net">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://npmcdn.com">
  <link rel="dns-prefetch" href="https://static.line-scdn.net">
  <link rel="preload" href="https://static.line-scdn.net/liff/edge/2/sdk.js" as="script">

  <link rel="stylesheet" href="css/minimal-theme.css">
  <link rel="stylesheet" href="css/reports.css">
  <!-- LIFF SDK -->
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Date picker -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://npmcdn.com/flatpickr/dist/l10n/th.js"></script>
  <!-- PDF Generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Loading Overlay -->
    <div id="loading" class="loading-overlay">
      <div class="loading-spinner"></div>
      <p id="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <button class="back-button" onclick="closeLiff()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </button>
        <h1 class="page-title">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</h1>
      </div>
    </header>

    <!-- Patient Selector (if multiple patients) -->
    <div id="patient-selector" class="patient-selector hidden">
      <label class="selector-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</label>
      <select id="patient-select" class="patient-select">
        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ --</option>
      </select>
    </div>

    <!-- Date Range Picker -->
    <div class="date-range-section">
      <label class="selector-label">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</label>
      <div class="date-presets">
        <button class="preset-btn active" data-days="7">7 ‡∏ß‡∏±‡∏ô</button>
        <button class="preset-btn" data-days="30">30 ‡∏ß‡∏±‡∏ô</button>
        <button class="preset-btn" data-days="90">90 ‡∏ß‡∏±‡∏ô</button>
        <button class="preset-btn" data-days="custom">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</button>
      </div>
      <div id="custom-date-range" class="custom-date-range hidden">
        <div class="date-inputs">
          <div class="date-input-group">
            <label>‡∏à‡∏≤‡∏Å</label>
            <input type="text" id="date-from" class="date-input" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
          </div>
          <div class="date-input-group">
            <label>‡∏ñ‡∏∂‡∏á</label>
            <input type="text" id="date-to" class="date-input" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
          </div>
        </div>
        <button class="apply-date-btn" onclick="applyCustomDateRange()">‡πÉ‡∏ä‡πâ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ</button>
      </div>
      <div class="date-display">
        <span id="date-range-display">1 ‡∏°.‡∏Ñ. - 7 ‡∏°.‡∏Ñ. 2567</span>
      </div>
    </div>

    <!-- Summary Cards -->
    <div id="summary-section" class="summary-section">
      <h2 class="section-title">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</h2>
      <div class="summary-cards">
        <!-- Blood Pressure Card -->
        <div class="summary-card bp-card">
          <div class="card-icon">ü©∫</div>
          <div class="card-content">
            <div class="card-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
            <div class="card-value" id="bp-value">--/--</div>
            <div class="card-status" id="bp-status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
          </div>
        </div>

        <!-- Medication Card -->
        <div class="summary-card med-card">
          <div class="card-icon">üíä</div>
          <div class="card-content">
            <div class="card-label">‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏ô‡∏¢‡∏≤</div>
            <div class="card-value" id="med-value">--%</div>
            <div class="card-status" id="med-status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
          </div>
        </div>

        <!-- Water Card -->
        <div class="summary-card water-card">
          <div class="card-icon">üíß</div>
          <div class="card-content">
            <div class="card-label">‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
            <div class="card-value" id="water-value">-- ‡∏°‡∏•.</div>
            <div class="card-status" id="water-status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
          </div>
        </div>

        <!-- Activities Card -->
        <div class="summary-card activity-card">
          <div class="card-icon">üìä</div>
          <div class="card-content">
            <div class="card-label">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
            <div class="card-value" id="activity-value">-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
            <div class="card-status" id="activity-status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div id="charts-section" class="charts-section">
      <!-- Blood Pressure Chart -->
      <div class="chart-card">
        <h3 class="chart-title">üìà ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï</h3>
        <div class="chart-container">
          <canvas id="bp-chart"></canvas>
        </div>
        <div class="chart-legend">
          <span class="legend-item systolic">‚óè Systolic</span>
          <span class="legend-item diastolic">‚óè Diastolic</span>
        </div>
      </div>

      <!-- Medication Compliance Chart -->
      <div class="chart-card">
        <h3 class="chart-title">üíä ‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏ô‡∏¢‡∏≤</h3>
        <div class="chart-container">
          <canvas id="med-chart"></canvas>
        </div>
      </div>

      <!-- Water Intake Chart -->
      <div class="chart-card">
        <h3 class="chart-title">üíß ‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥</h3>
        <div class="chart-container">
          <canvas id="water-chart"></canvas>
        </div>
      </div>
    </div>

    <!-- Activity Details Section -->
    <div id="activities-section" class="activities-section">
      <h2 class="section-title">üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h2>
      <div id="activities-list" class="activities-list">
        <!-- Activities will be populated here -->
      </div>
    </div>

    <!-- Export Section -->
    <div class="export-section">
      <h2 class="section-title">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h2>
      <p class="export-note">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ä‡∏£‡πå‡∏Å‡∏±‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡πå</p>
      <div class="export-buttons">
        <button class="export-btn csv-btn" onclick="exportCSV()">
          <span class="btn-icon">üì•</span>
          <span class="btn-text">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV</span>
        </button>
        <button class="export-btn pdf-btn" onclick="exportPDF()">
          <span class="btn-icon">üìÑ</span>
          <span class="btn-text">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF</span>
        </button>
      </div>
    </div>

    <!-- Disclaimer -->
    <div class="disclaimer">
      <p>‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô<br>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤</p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/liff-init.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/reports.js"></script>
</body>
</html>
