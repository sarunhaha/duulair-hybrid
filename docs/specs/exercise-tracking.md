# Exercise & Walking Tracking

> Activity and exercise tracking for elderly health monitoring

---

## Feature Name
Exercise & Walking Activity Tracker

## Overview
‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏
‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‡πÄ‡∏ß‡∏•‡∏≤ ‡πÅ‡∏•‡∏∞‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏ú‡∏≤‡∏ú‡∏•‡∏≤‡∏ç

## User Story
**As a** ‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏
**I want** ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
**So that** ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠

## Requirements

### Functional Requirements
- [ ] FR-1: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (‡πÄ‡∏î‡∏¥‡∏ô, ‡∏ß‡∏¥‡πà‡∏á, ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢, ‡πÇ‡∏¢‡∏Ñ‡∏∞)
- [ ] FR-2: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (km) ‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ô‡∏≤‡∏ó‡∏µ)
- [ ] FR-3: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏ú‡∏≤‡∏ú‡∏•‡∏≤‡∏ç (‡∏ï‡∏≤‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å + ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°)
- [ ] FR-4: ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏î‡∏¥‡∏ô 30 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ß‡∏±‡∏ô)
- [ ] FR-5: ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏≥
- [ ] FR-6: ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ streak (‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏µ‡πà‡∏ß‡∏±‡∏ô)
- [ ] FR-7: ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô, ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•)
- [ ] FR-8: Integration ‡∏Å‡∏±‡∏ö fitness apps (optional)

### Technical Requirements
- [ ] TR-1: Calculate calories burned based on MET values
- [ ] TR-2: Store activity history
- [ ] TR-3: Generate weekly/monthly reports

## Data Model

### Database Schema
```sql
CREATE TABLE exercise_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  patient_id UUID REFERENCES patients(id) NOT NULL,
  activity_type VARCHAR(50) NOT NULL, -- 'walking', 'jogging', 'cycling', 'yoga', 'other'
  duration_minutes INTEGER NOT NULL,
  distance_km DECIMAL(5,2),
  calories_burned INTEGER,
  intensity VARCHAR(20), -- 'light', 'moderate', 'vigorous'
  heart_rate_avg INTEGER,
  notes TEXT,
  performed_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE exercise_goals (
  patient_id UUID PRIMARY KEY REFERENCES patients(id),
  daily_minutes INTEGER DEFAULT 30,
  weekly_days INTEGER DEFAULT 5, -- ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 5 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
  preferred_activities TEXT[],
  reminder_time TIME DEFAULT '08:00',
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_exercise_patient_date ON exercise_logs(patient_id, DATE(performed_at) DESC);
```

### TypeScript Types
```typescript
interface ExerciseLog {
  id: string;
  patientId: string;
  activityType: 'walking' | 'jogging' | 'cycling' | 'swimming' | 'yoga' | 'tai_chi' | 'other';
  durationMinutes: number;
  distanceKm?: number;
  caloriesBurned?: number;
  intensity: 'light' | 'moderate' | 'vigorous';
  heartRateAvg?: number;
  notes?: string;
  performedAt: Date;
}

interface ExerciseStats {
  today: {
    minutes: number;
    calories: number;
    goalMet: boolean;
  };
  week: {
    totalMinutes: number;
    daysActive: number;
    streak: number;
    averageCalories: number;
  };
  trends: {
    weekOverWeek: number; // percentage change
    recommendation: string;
  };
}

// MET values for calorie calculation
const MET_VALUES = {
  walking: 3.5,
  jogging: 7.0,
  cycling: 6.0,
  swimming: 8.0,
  yoga: 2.5,
  tai_chi: 3.0
};

// Calories = MET √ó weight(kg) √ó time(hours)
```

## API Design

```typescript
class ExerciseAgent extends BaseAgent {
  async logExercise(params: {
    patientId: string;
    activityType: string;
    durationMinutes: number;
    distanceKm?: number;
    intensity?: string;
  }): Promise<ExerciseLog>

  async getStats(
    patientId: string,
    period: 'day' | 'week' | 'month'
  ): Promise<ExerciseStats>

  async calculateCalories(params: {
    activityType: string;
    durationMinutes: number;
    weightKg: number;
  }): Promise<number>

  async checkGoalProgress(patientId: string): Promise<{
    completed: boolean;
    remaining: number;
    streak: number;
  }>
}
```

## Testing Strategy

### Test Scenarios
1. **Walking**: "‡πÄ‡∏î‡∏¥‡∏ô 30 ‡∏ô‡∏≤‡∏ó‡∏µ" ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å + ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà
2. **With Distance**: "‡πÄ‡∏î‡∏¥‡∏ô 2 km" ‚Üí ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
3. **Goal Met**: ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏î‡∏µ
4. **Streak**: ‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á 7 ‡∏ß‡∏±‡∏ô ‚Üí Badge/achievement
5. **Correlation**: ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô/‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•

## Timeline

**Estimated**: 8 hours (1 day)

## Examples

### Input
```
"‡πÄ‡∏î‡∏¥‡∏ô 30 ‡∏ô‡∏≤‡∏ó‡∏µ"
"‡πÄ‡∏î‡∏¥‡∏ô 2 km"
"‡∏ß‡∏¥‡πà‡∏á 20 ‡∏ô‡∏≤‡∏ó‡∏µ"
"‡πÇ‡∏¢‡∏Ñ‡∏∞ 45 ‡∏ô‡∏≤‡∏ó‡∏µ"
```

### Output
```json
{
  "message": "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏î‡∏¥‡∏ô 30 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏ú‡∏≤‡∏ú‡∏•‡∏≤‡∏ç 105 ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà üèÉ‚Äç‚ôÇÔ∏è",
  "stats": {
    "today": { "minutes": 30, "calories": 105, "goalMet": true },
    "streak": 5,
    "achievement": "üéâ ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á 5 ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß!"
  }
}
```

---

**Created**: 2024-01-16
**Priority**: Medium
**Status**: Ready for implementation
