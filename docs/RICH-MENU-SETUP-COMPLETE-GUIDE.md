# Rich Menu Setup - Complete Guide

## Overview

à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸™à¸µà¹‰à¸ˆà¸°à¹à¸™à¸°à¸™à¸³à¸à¸²à¸£ setup Rich Menu à¸ªà¸³à¸«à¸£à¸±à¸š Duulair à¹à¸šà¸š step-by-step à¸„à¸£à¸šà¸—à¸¸à¸à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™

**Rich Menu à¹à¸šà¸šà¹ƒà¸«à¸¡à¹ˆ:** Caregiver-Focused (5 tabs)

---

## ğŸ“± Rich Menu Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸        â”‚   ğŸ“Š à¸£à¸²à¸¢à¸‡à¸²à¸™       â”‚  ğŸ‘¤ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢  â”‚
â”‚  à¸à¸´à¸ˆà¸à¸£à¸£à¸¡         â”‚  à¸§à¸±à¸™à¸™à¸µà¹‰/à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ   â”‚  à¸”à¸¹/à¹à¸à¹‰à¹„à¸‚        â”‚
â”‚  (Message)       â”‚  (Message)       â”‚  (LIFF) âœ¨        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”” à¹€à¸•à¸·à¸­à¸™         â”‚   ğŸ’Š à¸¢à¸²          â”‚  âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²       â”‚
â”‚  à¸”à¸¹/à¹à¸à¹‰à¹„à¸‚à¹€à¸§à¸¥à¸²    â”‚  à¸£à¸²à¸¢à¸à¸²à¸£à¸¢à¸²        â”‚  à¸à¸¥à¸¸à¹ˆà¸¡/à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™  â”‚
â”‚  (LIFF) âœ¨        â”‚  (LIFF) âœ¨        â”‚  (LIFF) âœ¨        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Size:** 2500 Ã— 1686 pixels (2:1 ratio)

---

## ğŸ¯ Button Configuration

| # | à¸›à¸¸à¹ˆà¸¡ | à¸›à¸£à¸°à¹€à¸ à¸— | Action | LIFF File | LIFF URL Required? |
|---|------|--------|--------|-----------|-------------------|
| 1 | ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡ | **Message** | Send text "ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡" | - | âŒ No |
| 2 | ğŸ“Š à¸£à¸²à¸¢à¸‡à¸²à¸™ | **Message** | Send text "ğŸ“Š à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™" | - | âŒ No |
| 3 | ğŸ‘¤ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ | **LIFF** âœ¨ | Open LIFF | `patient-profile.html` | âœ… Yes |
| 4 | ğŸ”” à¹€à¸•à¸·à¸­à¸™ | **LIFF** âœ¨ | Open LIFF | `reminders.html` | âœ… Yes |
| 5 | ğŸ’Š à¸¢à¸² | **LIFF** âœ¨ | Open LIFF | `medications.html` | âœ… Yes |
| 6 | âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² | **LIFF** âœ¨ | Open LIFF | `settings.html` | âœ… Yes |

---

## ğŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1: à¹€à¸•à¸£à¸µà¸¢à¸¡ LIFF Files

### 1.1 à¸­à¸±à¸à¹‚à¸«à¸¥à¸” LIFF Files à¹„à¸›à¸¢à¸±à¸‡ Web Server

LIFF files à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ `public/liff/`:

```bash
# à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡: Upload to server
scp public/liff/*.html user@your-server.com:/var/www/duulair/liff/

# à¸«à¸£à¸·à¸­ deploy to Vercel/Netlify
vercel deploy public/liff/
```

**à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸² files à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™:**
```
âœ… https://your-domain.com/liff/patient-profile.html
âœ… https://your-domain.com/liff/reminders.html
âœ… https://your-domain.com/liff/medications.html
âœ… https://your-domain.com/liff/settings.html
```

### 1.2 à¸­à¸±à¸à¹€à¸”à¸— Supabase Config à¹ƒà¸™ LIFF Files

à¹à¸à¹‰à¹„à¸‚à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡ 4 files:

```javascript
// à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸
const SUPABASE_URL = 'YOUR_SUPABASE_URL';
const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY';

// à¹€à¸›à¹‡à¸™
const SUPABASE_URL = 'https://xxxxx.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
```

---

## ğŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 2: à¸ªà¸£à¹‰à¸²à¸‡ LIFF Apps à¹ƒà¸™ LINE Console

### 2.1 à¹€à¸‚à¹‰à¸² LINE Developers Console

1. à¹„à¸›à¸—à¸µà¹ˆ https://developers.line.biz/console/
2. à¹€à¸¥à¸·à¸­à¸ Provider à¸‚à¸­à¸‡à¸„à¸¸à¸“
3. à¹€à¸¥à¸·à¸­à¸ Channel (Messaging API) à¸‚à¸­à¸‡ Duulair

### 2.2 à¸ªà¸£à¹‰à¸²à¸‡ LIFF App à¸—à¸±à¹‰à¸‡ 4 Apps

#### **LIFF App #1: Patient Profile**

1. à¹„à¸›à¸—à¸µà¹ˆà¹à¸—à¹‡à¸š **LIFF** â†’ à¸„à¸¥à¸´à¸ **Add**
2. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
   ```
   LIFF app name:     Duulair - Patient Profile
   Size:              Full
   Endpoint URL:      https://your-domain.com/liff/patient-profile.html
   Scope:             profile, openid
   Bot link feature:  On (Normal)
   ```
3. à¸„à¸¥à¸´à¸ **Add**
4. **à¸„à¸±à¸”à¸¥à¸­à¸ LIFF ID** â†’ à¹€à¸Šà¹ˆà¸™ `1234567890-AbCdEfGh`

#### **LIFF App #2: Reminders**

1. à¸„à¸¥à¸´à¸ **Add** à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡
2. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
   ```
   LIFF app name:     Duulair - Reminders
   Size:              Full
   Endpoint URL:      https://your-domain.com/liff/reminders.html
   Scope:             profile, openid
   Bot link feature:  On (Normal)
   ```
3. à¸„à¸¥à¸´à¸ **Add**
4. **à¸„à¸±à¸”à¸¥à¸­à¸ LIFF ID** â†’ à¹€à¸Šà¹ˆà¸™ `1234567890-IjKlMnOp`

#### **LIFF App #3: Medications**

1. à¸„à¸¥à¸´à¸ **Add** à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡
2. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
   ```
   LIFF app name:     Duulair - Medications
   Size:              Full
   Endpoint URL:      https://your-domain.com/liff/medications.html
   Scope:             profile, openid
   Bot link feature:  On (Normal)
   ```
3. à¸„à¸¥à¸´à¸ **Add**
4. **à¸„à¸±à¸”à¸¥à¸­à¸ LIFF ID** â†’ à¹€à¸Šà¹ˆà¸™ `1234567890-QrStUvWx`

#### **LIFF App #4: Settings**

1. à¸„à¸¥à¸´à¸ **Add** à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡
2. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
   ```
   LIFF app name:     Duulair - Settings
   Size:              Full
   Endpoint URL:      https://your-domain.com/liff/settings.html
   Scope:             profile, openid
   Bot link feature:  On (Normal)
   ```
3. à¸„à¸¥à¸´à¸ **Add**
4. **à¸„à¸±à¸”à¸¥à¸­à¸ LIFF ID** â†’ à¹€à¸Šà¹ˆà¸™ `1234567890-YzAbCdEf`

### 2.3 à¹€à¸à¹‡à¸š LIFF IDs à¹„à¸§à¹‰

à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `LIFF_IDS.txt`:

```
LIFF_ID_PATIENT_PROFILE=1234567890-AbCdEfGh
LIFF_ID_REMINDERS=1234567890-IjKlMnOp
LIFF_ID_MEDICATIONS=1234567890-QrStUvWx
LIFF_ID_SETTINGS=1234567890-YzAbCdEf
```

---

## ğŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 3: à¸­à¸±à¸à¹€à¸”à¸— Rich Menu JSON

### 3.1 à¹€à¸›à¸´à¸”à¹„à¸Ÿà¸¥à¹Œ `docs/rich-menu-group.json`

### 3.2 à¹à¸—à¸™à¸—à¸µà¹ˆ `LIFF_ID` à¸”à¹‰à¸§à¸¢ LIFF ID à¸ˆà¸£à¸´à¸‡

**à¸à¹ˆà¸­à¸™à¹à¸à¹‰:**
```json
{
  "bounds": {"x": 1667, "y": 0, "width": 833, "height": 843},
  "action": {
    "type": "uri",
    "uri": "https://liff.line.me/LIFF_ID/patient-profile.html"
  }
}
```

**à¸«à¸¥à¸±à¸‡à¹à¸à¹‰:**
```json
{
  "bounds": {"x": 1667, "y": 0, "width": 833, "height": 843},
  "action": {
    "type": "uri",
    "uri": "https://liff.line.me/1234567890-AbCdEfGh/patient-profile.html"
  }
}
```

### 3.3 Full Updated JSON

```json
{
  "size": {
    "width": 2500,
    "height": 1686
  },
  "selected": true,
  "name": "Duulair Group Menu - Caregiver",
  "chatBarText": "à¹€à¸¡à¸™à¸¹",
  "areas": [
    {
      "bounds": {"x": 0, "y": 0, "width": 833, "height": 843},
      "action": {
        "type": "message",
        "text": "ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡"
      }
    },
    {
      "bounds": {"x": 834, "y": 0, "width": 833, "height": 843},
      "action": {
        "type": "message",
        "text": "ğŸ“Š à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™"
      }
    },
    {
      "bounds": {"x": 1667, "y": 0, "width": 833, "height": 843},
      "action": {
        "type": "uri",
        "uri": "https://liff.line.me/1234567890-AbCdEfGh"
      }
    },
    {
      "bounds": {"x": 0, "y": 843, "width": 833, "height": 843},
      "action": {
        "type": "uri",
        "uri": "https://liff.line.me/1234567890-IjKlMnOp"
      }
    },
    {
      "bounds": {"x": 834, "y": 843, "width": 833, "height": 843},
      "action": {
        "type": "uri",
        "uri": "https://liff.line.me/1234567890-QrStUvWx"
      }
    },
    {
      "bounds": {"x": 1667, "y": 843, "width": 833, "height": 843},
      "action": {
        "type": "uri",
        "uri": "https://liff.line.me/1234567890-YzAbCdEf"
      }
    }
  ]
}
```

**âš ï¸ à¸ªà¸³à¸„à¸±à¸:** LIFF URI format à¸„à¸·à¸­ `https://liff.line.me/{LIFF_ID}` (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹ƒà¸ªà¹ˆ path à¸‚à¸­à¸‡ HTML file)

---

## ğŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 4: à¸ªà¸£à¹‰à¸²à¸‡ Rich Menu Image

### 4.1 Design Specifications

**à¸‚à¸™à¸²à¸”:** 2500 Ã— 1686 pixels
**Format:** PNG (à¹à¸™à¸°à¸™à¸³) à¸«à¸£à¸·à¸­ JPEG
**Max file size:** 1 MB
**DPI:** 72-144 DPI

### 4.2 Button Areas

à¹à¸•à¹ˆà¸¥à¸°à¸›à¸¸à¹ˆà¸¡à¸¡à¸µà¸‚à¸™à¸²à¸” **833 Ã— 843 pixels**

```
Row 1 (Top):
  Button 1: x=0,    y=0,   w=833, h=843  (ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸)
  Button 2: x=834,  y=0,   w=833, h=843  (ğŸ“Š à¸£à¸²à¸¢à¸‡à¸²à¸™)
  Button 3: x=1667, y=0,   w=833, h=843  (ğŸ‘¤ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢)

Row 2 (Bottom):
  Button 4: x=0,    y=843, w=833, h=843  (ğŸ”” à¹€à¸•à¸·à¸­à¸™)
  Button 5: x=834,  y=843, w=833, h=843  (ğŸ’Š à¸¢à¸²)
  Button 6: x=1667, y=843, w=833, h=843  (âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²)
```

### 4.3 Design Elements

**Colors:**
- Primary: `#667eea` (Purple)
- Secondary: `#4facfe` (Blue)
- Success: `#4caf50` (Green)
- Text: `#333333` (Dark Gray)

**Fonts:**
- Thai: Sarabun Bold
- Icon size: 80-100px
- Label size: 28-32px

### 4.4 Design Tools

- **Figma** (à¹à¸™à¸°à¸™à¸³): https://figma.com
- **Canva**: https://canva.com
- **Photoshop/Illustrator**

### 4.5 Export Image

```bash
# à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸›à¹‡à¸™
rich-menu-duulair-caregiver.png

# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š
# - Size: 2500x1686 px âœ“
# - Format: PNG âœ“
# - File size: < 1 MB âœ“
```

---

## ğŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 5: Upload Rich Menu via API

### 5.1 à¹€à¸•à¸£à¸µà¸¢à¸¡ Channel Access Token

1. à¹„à¸›à¸—à¸µà¹ˆ LINE Developers Console
2. à¹„à¸›à¸—à¸µà¹ˆà¹à¸—à¹‡à¸š **Messaging API**
3. Scroll à¸¥à¸‡à¹„à¸›à¸«à¸² **Channel access token**
4. à¸„à¸¥à¸´à¸ **Issue** (à¸–à¹‰à¸²à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µ)
5. **à¸„à¸±à¸”à¸¥à¸­à¸ Token** â†’ à¸¢à¸²à¸§à¸¡à¸²à¸ ~ 170 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£

```bash
# à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸§à¹‰à¹ƒà¸™ .env à¸«à¸£à¸·à¸­ notepad
CHANNEL_ACCESS_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI...
```

### 5.2 Create Rich Menu (API)

```bash
# Step 1: Create rich menu
curl -X POST https://api.line.me/v2/bot/richmenu \
  -H 'Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN' \
  -H 'Content-Type: application/json' \
  -d @docs/rich-menu-group.json

# Response:
# {
#   "richMenuId": "richmenu-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
# }
```

**à¸šà¸±à¸™à¸—à¸¶à¸ richMenuId à¸—à¸µà¹ˆà¹„à¸”à¹‰!**

### 5.3 Upload Image to Rich Menu

```bash
# Step 2: Upload image
curl -X POST https://api-data.line.me/v2/bot/richmenu/richmenu-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx/content \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN" \
  -H "Content-Type: image/png" \
  --data-binary @rich-menu-duulair-caregiver.png

# Response:
# {} (empty response = success)
```

### 5.4 Set as Default Rich Menu

```bash
# Step 3: Set as default for all users
curl -X POST https://api.line.me/v2/bot/user/all/richmenu/richmenu-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"

# Response:
# {} (empty response = success)
```

---

## ğŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 6: Verify Setup

### 6.1 Test Rich Menu

1. à¹€à¸›à¸´à¸” LINE app
2. à¹„à¸›à¸—à¸µà¹ˆà¹à¸Šà¸—à¸à¸±à¸šà¸šà¸­à¸— Duulair
3. à¸à¸”à¸›à¸¸à¹ˆà¸¡ **â‰¡** (menu icon) à¸—à¸µà¹ˆà¸¡à¸¸à¸¡à¸¥à¹ˆà¸²à¸‡à¸‹à¹‰à¸²à¸¢
4. Rich menu à¸„à¸§à¸£à¹à¸ªà¸”à¸‡à¸‚à¸¶à¹‰à¸™à¸¡à¸²

### 6.2 Test Message Commands

**à¸à¸”à¸›à¸¸à¹ˆà¸¡ "ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡":**
- âœ… à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ "ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡"
- âœ… à¸šà¸­à¸—à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¸”à¹‰à¸§à¸¢ Quick Reply (5 à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸)

**à¸à¸”à¸›à¸¸à¹ˆà¸¡ "ğŸ“Š à¸£à¸²à¸¢à¸‡à¸²à¸™":**
- âœ… à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ "ğŸ“Š à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™"
- âœ… à¸šà¸­à¸—à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¸”à¹‰à¸§à¸¢ Quick Reply (3 à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸)

### 6.3 Test LIFF Apps

**à¸à¸”à¸›à¸¸à¹ˆà¸¡ "ğŸ‘¤ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢":**
- âœ… à¹€à¸›à¸´à¸” LIFF app (patient-profile.html)
- âœ… à¹à¸ªà¸”à¸‡ 3 tabs: à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹ˆà¸§à¹„à¸›, à¸—à¸²à¸‡à¸à¸²à¸£à¹à¸à¸—à¸¢à¹Œ, à¸‰à¸¸à¸à¹€à¸‰à¸´à¸™
- âœ… à¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰

**à¸à¸”à¸›à¸¸à¹ˆà¸¡ "ğŸ”” à¹€à¸•à¸·à¸­à¸™":**
- âœ… à¹€à¸›à¸´à¸” LIFF app (reminders.html)
- âœ… à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸•à¸·à¸­à¸™
- âœ… à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡/à¹à¸à¹‰à¹„à¸‚/à¸¥à¸šà¹„à¸”à¹‰

**à¸à¸”à¸›à¸¸à¹ˆà¸¡ "ğŸ’Š à¸¢à¸²":**
- âœ… à¹€à¸›à¸´à¸” LIFF app (medications.html)
- âœ… à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸¢à¸²
- âœ… à¸ªà¸²à¸¡à¸²à¸£à¸–à¸ˆà¸±à¸”à¸à¸²à¸£à¹„à¸”à¹‰

**à¸à¸”à¸›à¸¸à¹ˆà¸¡ "âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²":**
- âœ… à¹€à¸›à¸´à¸” LIFF app (settings.html)
- âœ… à¹à¸ªà¸”à¸‡ 5 tabs: à¸à¸¥à¸¸à¹ˆà¸¡, à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™, à¸£à¸²à¸¢à¸‡à¸²à¸™, à¹à¸à¹‡à¸„à¹€à¸à¸ˆ, à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­
- âœ… à¸ªà¸²à¸¡à¸²à¸£à¸–à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹„à¸”à¹‰

---

## ğŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 7 (Optional): Setup via LINE Manager

### 7.1 à¹€à¸‚à¹‰à¸² LINE Official Account Manager

1. à¹„à¸›à¸—à¸µà¹ˆ https://manager.line.biz/
2. à¹€à¸¥à¸·à¸­à¸ Official Account à¸‚à¸­à¸‡ Duulair
3. à¹„à¸›à¸—à¸µà¹ˆ **Home** â†’ **Rich menus**

### 7.2 Create Rich Menu (GUI)

1. à¸„à¸¥à¸´à¸ **Create**
2. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
   ```
   Title:              Duulair - Caregiver Menu
   Display period:     Always display
   Chat bar text:      à¹€à¸¡à¸™à¸¹
   ```
3. **Upload image** (rich-menu-duulair-caregiver.png)
4. **Set template:** 2 rows Ã— 3 columns

### 7.3 Configure Buttons

**Button 1 (Top-Left):**
- Type: Message
- Text: `ğŸ“ à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡`

**Button 2 (Top-Center):**
- Type: Message
- Text: `ğŸ“Š à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™`

**Button 3 (Top-Right):**
- Type: Link
- URL: `https://liff.line.me/1234567890-AbCdEfGh`

**Button 4 (Bottom-Left):**
- Type: Link
- URL: `https://liff.line.me/1234567890-IjKlMnOp`

**Button 5 (Bottom-Center):**
- Type: Link
- URL: `https://liff.line.me/1234567890-QrStUvWx`

**Button 6 (Bottom-Right):**
- Type: Link
- URL: `https://liff.line.me/1234567890-YzAbCdEf`

### 7.4 Save & Apply

1. à¸„à¸¥à¸´à¸ **Save**
2. à¸„à¸¥à¸´à¸ **Apply** à¹€à¸à¸·à¹ˆà¸­ activate

---

## ğŸ”§ Troubleshooting

### Issue 1: Rich Menu à¹„à¸¡à¹ˆà¹à¸ªà¸”à¸‡

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² Rich Menu à¸–à¸¹à¸ set à¹€à¸›à¹‡à¸™ default à¹à¸¥à¹‰à¸§
2. à¸¥à¸­à¸‡à¸¥à¸š Rich Menu à¹€à¸à¹ˆà¸²à¸­à¸­à¸à¸à¹ˆà¸­à¸™
3. à¸¥à¸­à¸‡ unfollow â†’ follow à¸šà¸­à¸—à¹ƒà¸«à¸¡à¹ˆ

```bash
# à¸”à¸¹ Rich Menu à¸—à¸µà¹ˆà¸¡à¸µ
curl -X GET https://api.line.me/v2/bot/richmenu/list \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"

# à¸¥à¸š Rich Menu à¹€à¸à¹ˆà¸²
curl -X DELETE https://api.line.me/v2/bot/richmenu/richmenu-OLD_ID \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"
```

### Issue 2: LIFF App à¹„à¸¡à¹ˆà¹€à¸›à¸´à¸”

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š LIFF URL à¸§à¹ˆà¸²à¹ƒà¸Šà¹‰ `https://liff.line.me/{LIFF_ID}` (à¹„à¸¡à¹ˆà¹ƒà¸ªà¹ˆ path)
2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² LIFF App à¸¡à¸µ **Endpoint URL** à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
3. à¸¥à¸­à¸‡à¹€à¸›à¸´à¸” Endpoint URL à¹ƒà¸™ browser à¸•à¸£à¸‡ à¹†

### Issue 3: LIFF Loading à¹à¸¥à¹‰à¸§à¸„à¹‰à¸²à¸‡

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
1. à¹€à¸Šà¹‡à¸„ JavaScript console à¹ƒà¸™ LIFF app
2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Supabase URL à¹à¸¥à¸° key
3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² LIFF scope à¸¡à¸µ `openid` à¹à¸¥à¸° `profile`

### Issue 4: Image à¸šà¸´à¸”à¹€à¸šà¸µà¹‰à¸¢à¸§

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¸™à¸²à¸”à¸ à¸²à¸: à¸•à¹‰à¸­à¸‡ 2500Ã—1686 px à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
2. à¹ƒà¸Šà¹‰ PNG format
3. à¸¥à¸­à¸‡ upload image à¹ƒà¸«à¸¡à¹ˆ

---

## ğŸ“Š Rich Menu Management Commands

### Get All Rich Menus

```bash
curl -X GET https://api.line.me/v2/bot/richmenu/list \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"
```

### Get Specific Rich Menu

```bash
curl -X GET https://api.line.me/v2/bot/richmenu/richmenu-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"
```

### Delete Rich Menu

```bash
curl -X DELETE https://api.line.me/v2/bot/richmenu/richmenu-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"
```

### Get User's Rich Menu

```bash
curl -X GET https://api.line.me/v2/bot/user/{userId}/richmenu \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"
```

### Link Rich Menu to Specific User

```bash
curl -X POST https://api.line.me/v2/bot/user/{userId}/richmenu/richmenu-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"
```

### Unlink Rich Menu from User

```bash
curl -X DELETE https://api.line.me/v2/bot/user/{userId}/richmenu \
  -H "Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN"
```

---

## ğŸ“ Checklist

### Before Setup:
- [ ] LIFF files deployed to web server
- [ ] Supabase config updated in all LIFF files
- [ ] Rich Menu image designed (2500Ã—1686px PNG)
- [ ] Channel Access Token obtained

### LIFF Setup:
- [ ] LIFF App #1 created (Patient Profile)
- [ ] LIFF App #2 created (Reminders)
- [ ] LIFF App #3 created (Medications)
- [ ] LIFF App #4 created (Settings)
- [ ] All LIFF IDs copied and saved

### Rich Menu Setup:
- [ ] rich-menu-group.json updated with LIFF IDs
- [ ] Rich Menu created via API
- [ ] Image uploaded to Rich Menu
- [ ] Set as default Rich Menu

### Testing:
- [ ] Rich Menu displays in LINE app
- [ ] Message commands work (à¸šà¸±à¸™à¸—à¸¶à¸, à¸£à¸²à¸¢à¸‡à¸²à¸™)
- [ ] LIFF apps open correctly
- [ ] Can edit data in LIFF apps
- [ ] Data saves to Supabase

---

## ğŸ¯ Summary

### LIFF URLs Format

```
à¸›à¸¸à¹ˆà¸¡                LIFF ID                          Full LIFF URL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ‘¤ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢    1234567890-AbCdEfGh     â†’  https://liff.line.me/1234567890-AbCdEfGh
ğŸ”” à¹€à¸•à¸·à¸­à¸™           1234567890-IjKlMnOp     â†’  https://liff.line.me/1234567890-IjKlMnOp
ğŸ’Š à¸¢à¸²              1234567890-QrStUvWx     â†’  https://liff.line.me/1234567890-QrStUvWx
âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²         1234567890-YzAbCdEf     â†’  https://liff.line.me/1234567890-YzAbCdEf
```

### Command Summary

```bash
# 1. Create Rich Menu
curl -X POST https://api.line.me/v2/bot/richmenu \
  -H 'Authorization: Bearer TOKEN' \
  -H 'Content-Type: application/json' \
  -d @docs/rich-menu-group.json

# 2. Upload Image
curl -X POST https://api-data.line.me/v2/bot/richmenu/RICHMENU_ID/content \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: image/png" \
  --data-binary @rich-menu-duulair-caregiver.png

# 3. Set as Default
curl -X POST https://api.line.me/v2/bot/user/all/richmenu/RICHMENU_ID \
  -H "Authorization: Bearer TOKEN"
```

---

## ğŸ“š Resources

- [LINE Messaging API - Rich Menu](https://developers.line.biz/en/docs/messaging-api/using-rich-menus/)
- [LINE LIFF Documentation](https://developers.line.biz/en/docs/liff/overview/)
- [Rich Menu Design Guide](https://developers.line.biz/en/docs/messaging-api/rich-menu-design-guide/)
- [Figma Rich Menu Template](https://www.figma.com/community/search?q=line%20rich%20menu)

---

**Last Updated:** January 5, 2025
**Version:** 2.0 (Caregiver-Focused)
**Author:** Claude Code (Sonnet 4.5)
